/* Minify took 0.012396812438965 */


RelatedPages={module:false,log:function(msg){$().log(msg,'RelatedPages');},init:function(){$(window).unbind('scroll',RelatedPages.updateScroll);this.module=$('.RelatedPagesModule').first();if(!this.module.exists()){return;}
this.module.find('.articleSnippet').css('cursor','pointer').bind('click',function(ev){var target=$(this),href=target.next('.more').attr('href');if(href){window.location=href;}});var content=$('#WikiaArticle');var contentWidth=content.width();var addAfter=parseInt(this.module.attr('data-add-after-section'));if(!addAfter){return;}
var sections=content.find('.mw-headline').parent().filter('h2');var sectionMatch=false;sections.slice(addAfter).each(function(){var node=$(this);if(node.width()>contentWidth-10){sectionMatch=node;return false;}});if(sectionMatch){var sectionId=sections.index(sectionMatch)+1;this.log('moving before #'+sectionId+' section ('+sectionMatch.children().first().text()+')');this.module.insertBefore(sectionMatch.prev());}
else if(sections.length>addAfter){this.log('collision detected');}
else{this.log('article is too short (less than '+addAfter+' sections)');}},scroll_threshold:300,attachLazyLoaderEvents:function(){if(RelatedPages.module.exists()){$(window).bind('scroll',RelatedPages.updateScroll);RelatedPages.updateScroll();}},updateScroll:function(){var fold=$(window).height()+$(window).scrollTop();var topVal=RelatedPages.module.offset().top;if(topVal>0&&topVal<(fold+RelatedPages.scroll_threshold)){RelatedPages.lazyLoadImages();}},lazyLoadImages:function(){RelatedPages.log('loading RelatedPages images');var images=RelatedPages.module.find('img').filter('[data-src]');images.each(function(){var image=$(this);image.attr('src',image.attr('data-src')).removeAttr('data-src');});$(window).unbind('scroll',RelatedPages.updateScroll);}};$(function(){RelatedPages.init();RelatedPages.attachLazyLoaderEvents();});;var CreatePage={pageLayout:null,options:{},loading:false,checkTitle:function(title,enterWasHit){$.getJSON(wgScript,{action:'ajax',rs:'wfCreatePageAjaxCheckTitle',title:title},function(response){if(response.result=='ok'){var action=(enterWasHit)?'enter':'create';CreatePage.track(action+'/'+CreatePage.options[CreatePage.pageLayout]['trackingId']);location.href=CreatePage.options[CreatePage.pageLayout]['submitUrl'].replace('$1',encodeURIComponent(title));}
else{CreatePage.displayError(response.msg);}});},openDialog:function(e,titleText){if((!!window.WikiaEnableNewCreatepage)===false){return;}
if(e&&e.which==2){return;}
if(e&&e.preventDefault){e.preventDefault();}
if(false===CreatePage.loading){CreatePage.loading=true;$.getJSON(wgScript,{action:'ajax',rs:'wfCreatePageAjaxGetDialog'},function(data){$.showModal(data.title,data.html,{width:data.width,id:'CreatePageDialog',callback:function(){CreatePage.loading=false;CreatePage.track('open');for(var name in CreatePage.options){var idToken=name.charAt(0).toUpperCase()+name.substring(1);var elm=$('#CreatePageDialog'+idToken+'Container');elm.data('optionName',name);elm.click(function(){CreatePage.setPageLayout($(this).data('optionName'));});}
if(titleText!=null){$('#wpCreatePageDialogTitle').val(decodeURIComponent(titleText));}
CreatePage.setPageLayout(data.defaultOption);$('#wpCreatePageDialogTitle').focus();$('#CreatePageDialogButton .createpage').click(function(e){e.preventDefault();CreatePage.submitDialog(false);});},onClose:function(){CreatePage.track('close');}});});}},submitDialog:function(enterWasHit){CreatePage.checkTitle($('#wpCreatePageDialogTitle').val(),enterWasHit);},displayError:function(errorMsg){var box=$('#CreatePageDialogTitleErrorMsg');box.html('<span id="createPageErrorMsg">'+errorMsg+'</span>');box.removeClass('hiddenStructure');},setPageLayout:function(layout){CreatePage.pageLayout=layout;var idToken=layout.charAt(0).toUpperCase()+layout.substring(1);$('#CreatePageDialog'+idToken).attr('checked','checked');$('#CreatePageDialogChoices').children('li').removeClass('accent');$('#CreatePageDialog'+idToken+'Container').addClass('accent');CreatePage.track(CreatePage.options[layout]['trackingId']);},track:function(str){WET.byStr('CreatePage/'+str);},getTitleFromUrl:function(url){var vars=[],i,hash,hashes=url.slice(url.indexOf('?')+1).split('&');for(i=0;i<hashes.length;i++){hash=hashes[i].split('=');vars.push(hash[0]);vars[hash[0]]=hash[1];}
return vars['title'].replace(/_/g,' ');},redLinkClick:function(e,titleText){var title=titleText.split(':'),isContentNamespace=false;if(window.ContentNamespacesText&&(title.length>1)){for(var i in window.ContentNamespacesText){if(title[0]==window.ContentNamespacesText[i]){isContentNamespace=true;}}}
else{isContentNamespace=true;}
if(isContentNamespace){CreatePage.openDialog(e,titleText);}
else{return false;}},init:function(){if(window.WikiaEnableNewCreatepage){$().log('init','CreatePage');if(!window.WikiaDisableDynamicLinkCreatePagePopup){$('#dynamic-links-write-article-link, #dynamic-links-write-article-icon').click(function(e){CreatePage.openDialog(e,null);});$('.noarticletext a').click(function(e){CreatePage.openDialog(e,wgPageName);return false;});}
$('.createpage').click(CreatePage.openDialog);var addRecipeTab=$('#add_recipe_tab');if(addRecipeTab.exists()){var addRecipeLink=addRecipeTab.find('a');if(addRecipeLink.attr('href').match(/CreatePage$/)){addRecipeLink.click(CreatePage.openDialog);}}
$("a.new").bind('click',function(e){CreatePage.redLinkClick(e,CreatePage.getTitleFromUrl(this.href));});$(".createboxButton").bind('click',function(e){var form=$(e.target).parent();if(form.attr('class')=='createboxForm'){var field=form.children('.createboxInput');var preloadField=form.children("input[name='preload']");if((typeof preloadField.val()==undefined)||(preloadField.val()=='')){CreatePage.openDialog(e,field.val());}
else{return true;}}});}}};$(CreatePage.init);;var ImageLightbox={target:false,afterLoadOpened:false,videoThumbWidthThreshold:320,wikiAddress:false,showEmbedCodeInstantly:true,log:function(msg){$().log(msg,'ImageLightbox');},track:function(fakeUrl){window.jQuery.tracker.byStr('lightbox'+fakeUrl);},init:function(){var self=this,article;if(!window.wgEnableImageLightboxExt){this.log('disabled');return;}
if(window.skin=='oasis'){article=$('#WikiaArticle, .LatestPhotosModule, #article-comments');}
else{article=$('#bodyContent');}
this.log('init');article.unbind('.lightbox').bind('click.lightbox',function(ev){self.onClick.call(self,ev);});$('#RelatedVideosRL').unbind('.lightbox').bind('click.lightbox',function(ev){self.onClick.call(self,ev);});},getCaption:function(target){var caption=false;if(target.hasClass('slideshow')){caption=target.prev('label').html();}
else if(target.hasClass('lightbox')){caption=target.closest('.thumb').next('.lightbox-caption').html();}
else if(target.hasClass('image')){caption=target.nextAll('.thumbcaption').html();}
return caption;},onClick:function(ev){var target=$(ev.target);if(target.is('span')||target.is('img')){if(target.hasClass('Wikia-video-play-button')||target.hasClass('Wikia-video-thumb')){target=target.parent();target.addClass('image');}else{target=target.parent();}}
if(target.is('div')&&target.hasClass('playButton')){target=target.parent();}
if(!target.is('a')){return;}
if(!target.hasClass('lightbox')&&!target.hasClass('image')){return;}
if(target.hasClass('link-internal')){return;}
if(target.hasClass('wikia-slideshow-image')&&!target.parent().hasClass('wikia-slideshow-from-feed')){return;}
if(ev.ctrlKey){return;}
this.target=target;var caption=this.getCaption(target);if(target.attr('data-shared-help')){var self=this,imageSrc=target.attr('href'),img=new Image();this.log('loading shared help image: '+imageSrc);img.onload=function(){var html='<div id="lightbox-image" style="text-align: center"><img src="'+imageSrc+'" alt="" /></div>'+'<div id="lightbox-caption-content"></div>';self.showLightbox(target.attr('data-image-name'),html,caption);};img.src=imageSrc;ev.preventDefault();return;}
if(target.hasClass('link-external')){var image=target.children('img'),html='<div id="lightbox-image" style="text-align: center"><img src="'+image.attr('src')+'" alt="" /></div>'+'<div id="lightbox-caption-content"></div>';this.showLightbox(target.closest('.wikia-gallery').attr('data-feed-title'),html,caption);ev.preventDefault();return;}
var imageName=false;if(target.attr('data-image-name')){imageName='File:'+target.attr('data-image-name');}
else if(target.attr('ref')){imageName=target.attr('ref');}
else{var re=wgArticlePath.replace(/\$1/,'(.*)');var matches=target.attr('href').match(re);if(matches){imageName=matches.pop();}}
var targetChildImg=target.find('img').eq(0);if(targetChildImg.length>0&&targetChildImg.hasClass('Wikia-video-thumb')){if(target.attr('data-video-name')){imageName='File:'+target.attr('data-video-name');}else if(targetChildImg.length>0&&targetChildImg.attr('data-video')){imageName='File:'+targetChildImg.attr('data-video');}
if(imageName&&targetChildImg.width()>=this.videoThumbWidthThreshold){this.displayInlineVideo(targetChildImg,imageName);ev.preventDefault();return false;}}
if(target.hasClass('video-hubs-video')){if(target[0]&&target[0].dataset['wiki']){if(typeof target[0].dataset['wiki']!=='undefined'){var wikiaddress=target[0].dataset['wiki'];this.wikiAddress=wikiaddress;this.showEmbedCodeInstantly=true;}}}
if(imageName!=false){imageName=decodeURIComponent(imageName);var timestamp=target.attr("data-timestamp");var showShareTools=target.hasParent('#WikiaArticle')?1:0;this.fetchLightbox(imageName,caption,showShareTools,timestamp);ev.preventDefault();var eventValue=0;var rvModule=target.closest('.RelatedVideosModule');if(rvModule&&rvModule.length){var localItem=target.closest('.item');var localGroup=localItem.closest('.group');var container=localGroup.closest('.container');var allGroups=container.children();var localAllItems=localGroup.children();var localItemIndex=localAllItems.index(localItem);var localGroupIndex=allGroups.index(localGroup);var clickedIndex=(localGroupIndex*RelatedVideos.videosPerPage)+localItemIndex;eventValue=clickedIndex+1;WikiaTracker.trackEvent({'tracking_method':'both','ga_category':RelatedVideos.gaCat,'ga_action':WikiaTracker.ACTIONS.PLAY_VIDEO,'ga_label':(target.hasClass('video-thumbnail')?'thumbnail':'title'),'ga_value':eventValue,'internal_params':{'video_title':imageName}});}}},displayInlineVideo:function(targetImage,imageName){var parentTag=targetImage.parent();if(!parentTag.is('a')){return;}
var imageWidth=targetImage.width();var imageHeight=targetImage.height();$.getJSON(wgScript+'?action=ajax&rs=ImageLightboxAjax',{'maxheight':imageHeight,'maxwidth':imageWidth,'method':'ajax','pageName':wgPageName,'share':0,'title':imageName,'videoInline':1},function(res){jQuery(parentTag).siblings('span.Wikia-video-title-bar').eq(0).remove();if(res&&(res.html||res.jsonData)){if(res.asset){$.getScript(res.asset,function(){jQuery('<div id="'+res.jsonData.id+'" style="width:'+imageWidth+'px; height:'+imageHeight+'px; display: inline-block;"></div>').replaceAll(parentTag);jwplayer(res.jsonData.id).setup(res.jsonData);});}else{jQuery('<div>'+res.html+'</div>').replaceAll(parentTag);}}});},setTopPosition:function(){var lightbox=$('#lightbox');if(window.skin=='oasis'){lightbox.css('top',lightbox.getModalTopOffset());}},fetchLightbox:function(imageName,caption,showShareTools,timestamp){var self=this;this.log(imageName);if(this.lock){this.log('lock detected: another lightbox is loading');return;}
this.lock=true;this.imageName=imageName;this.track('/init');var maxWidth=$(window).width();var maxHeight=$(window).height();if(window.skin=='oasis'){maxHeight-=75;maxWidth=850;}
$.getJSON(wgScript+'?action=ajax&rs=ImageLightboxAjax',{'maxheight':maxHeight,'maxwidth':maxWidth,'method':'ajax','pageName':wgPageName,'share':showShareTools,'title':imageName,'t':timestamp,'showEmbedCodeInstantly':this.showEmbedCodeInstantly,'wikiAddress':this.wikiAddress},function(res){if(res&&(res.html||res.jsonData)){if(res.asset){$.getScript(res.asset,function(){self.showLightbox(res.title,'<div id="'+res.jsonData.id+'"></div>'+res.html,caption,res.width,function(){if(typeof(res.jsonData.events)=="undefined"||typeof(res.jsonData.events.onReady)=="undefined"){res.jsonData.events={onReady:function(){self.setTopPosition();}};}
jwplayer(res.jsonData.id).setup(res.jsonData);self.setTopPosition();});});}else{self.showLightbox(res.title,res.html,caption,res.width);self.setTopPosition();}}else{delete self.lock;}});},showLightbox:function(title,content,caption,width,secondCallBack){var self=this;caption=caption||'';$.showModal(title,content,{'id':'lightbox','width':width||'auto','onClose':function(){self.track('/close');},'callback':function(){var lightbox=$('#lightbox');$('#lightbox-link').click(function(){self.track('/details');});$('#lightbox-share-buttons').find('a').click(function(){var source=$(this).attr('data-func');if(source=="email"){if(window.wgUserName===null){if(window.wgComboAjaxLogin){showComboAjaxForPlaceHolder(false,"",function(){AjaxLogin.doSuccess=function(){window.location=$('#lightbox-image-link').val();}});}
else{UserLoginModal.show({callback:function(){window.location=$('#lightbox-image-link').val();}});}
return false;}}
$(this).closest('#lightbox-share').find('.lightbox-share-area').each(function(){if(source==$(this).attr('data-func')){$(this).slideDown();}else{$(this).slideUp();}});if(source=='embed'){$('#lightbox-share-embed-standard').select();}
self.track('/share/'+source);});$('#lightbox-share-email-button').click(function(){self.track('/share/email/send');var addresses=$('#lightbox-share-email-text').val();var throbber=$(this).next('.throbber');throbber.show();$.postJSON(wgScript+'?action=ajax&rs=ImageLightboxAjax',{'addresses':addresses,'method':'sendMail','pageName':wgPageName,'title':self.imageName},function(res){throbber.hide();$.showModal(res['info-caption'],res['info-content']);});});$('#lightbox-share').find('.share-links').find('a').click(function(){var source=$(this).attr('data-func');self.track('/share/www/'+source);});$('#lightbox-share').find('.share-code').find('input').click(function(){var source=$(this).select().attr('data-func');self.track('/share/embed/'+source);});$('#lightbox-caption-content').html(caption);if($('#lightbox-subtitle').text()!=''){$('#lightbox-subtitle').show();}
lightbox.resizeModal(lightbox.width());if(typeof FB!='undefined'){FB.XFBML.parse(lightbox.get(0));}
self.setTopPosition();if(self.target){self.target.trigger('lightbox',[lightbox]);self.target=false;}
if(!self.afterLoadOpened&&$.getUrlVar('open')=='email'){self.afterLoadOpened=true;$('#lightbox-share-buttons').find('a[data-func$="email"]').click();$('#lightbox-share-email-text').focus();}
if(typeof secondCallBack=='function'){$.proxy(secondCallBack,this)();}
delete self.lock;}});}};if((typeof window.skin!='undefined')&&(window.skin=='monaco'||window.skin=='oasis')){$(function(){ImageLightbox.init.call(ImageLightbox);var image=$('#'+$.getUrlVar('image'));if(image.exists()){$(window).scrollTop(image.offset().top+image.height()/2-$(window).height()/2);image.find('img').click();}});};function openLogin(event){if((typeof wgComboAjaxLogin=='undefined')||(!wgComboAjaxLogin)){return true;}else{showComboAjaxForPlaceHolder(false,"");event.preventDefault();}}
function openLoginAndConnect(event){if((typeof wgComboAjaxLogin=='undefined')||(!wgComboAjaxLogin)){return true;}else{if(typeof AjaxLogin=='undefined'){$.getScript(window.wgScript+'?action=ajax&rs=getRegisterJS&uselang='+window.wgUserLanguage+'&cb='+wgMWrevId+'-'+wgStyleVersion,function(){openLoginAndConnect();});}else{showComboAjaxForPlaceHolder(false,"",AjaxLogin.slideToLoginAndConnect);}
event.preventDefault();}}
function openRegister(event){if((typeof wgComboAjaxLogin=='undefined')||(!wgComboAjaxLogin)){return true;}else{showComboAjaxForPlaceHolder(false,"","",true);event.preventDefault();}}
function showComboAjaxForPlaceHolder(element,isPlaceholder,callback,showRegisterTabFirst,showLoginRequiredMessage){if(typeof showComboAjaxForPlaceHolder.statusAjaxLogin=='undefined'){showComboAjaxForPlaceHolder.statusAjaxLogin=false;}
if((wgUserName!==null)||(typeof wgComboAjaxLogin=='undefined')||(!wgComboAjaxLogin)){return false;}
if((typeof AjaxLogin!='undefined')&&AjaxLogin.showComboFromDOM()){if(isPlaceholder){AjaxLogin.setPlaceHolder(element);}
WET.byStr('signupActions/signup/open');if((typeof showRegisterTabFirst!='undefined')&&showRegisterTabFirst){AjaxLogin.showRegister($('#wpGoRegister'));}else{AjaxLogin.showLogin($('#wpGoLogin'));}
return true;}
if(showComboAjaxForPlaceHolder.statusAjaxLogin){return true;}
showComboAjaxForPlaceHolder.statusAjaxLogin=true;window.scrollTo(0,0);$.getMessages('ComboAjaxLogin',function(){$().getModal(window.wgScript+'?action=ajax&rs=GetComboAjaxLogin&uselang='+window.wgUserLanguage+"&returnto="+wgPageName+"&returntoquery="+wgPageQuery+'&cb='+wgMWrevId+'-'+wgStyleVersion,false,{callback:function(){$.getScript(window.wgScript+'?action=ajax&rs=getRegisterJS&uselang='+window.wgUserLanguage+'&cb='+wgMWrevId+'-'+wgStyleVersion,function(){if(isPlaceholder){AjaxLogin.setPlaceHolder(element);}
AjaxLogin.init($('#AjaxLoginLoginForm form:first'));AjaxLogin.show();showComboAjaxForPlaceHolder.statusAjaxLogin=false;if((typeof showRegisterTabFirst!='undefined')&&showRegisterTabFirst){AjaxLogin.showRegister($('#wpGoRegister'));}else{AjaxLogin.showLogin($('#wpGoLogin'));}
if(typeof FB!='undefined'){FB.XFBML.parse();}
if((typeof showLoginRequiredMessage!='undefined')&&(showLoginRequiredMessage)){if(showLoginRequiredMessage==true){$('#comboajaxlogin-actionmsg').show();}
else if(showLoginRequiredMessage=='protected'){$('#comboajaxlogin-actionmsg-protected').show();}}
if(typeof callback=='function'){callback();}});}});});return true;}
$(function(){if((typeof wgComboAjaxLogin!='undefined')&&wgComboAjaxLogin){if(wgUserName!==null){if(window.location.href.indexOf("placeholder=")>0){element=window.location.href.split("placeholder=")[1].split("&")[0];if($("#"+element).parent().parent().hasClass("wikiaPlaceholder")){$("#"+element).trigger("click");}}}}});$(function(){$('.ajaxLogin').click(openLogin);$('.ajaxRegister').click(openRegister);if(wgUserName===null&&window.wgComboAjaxLogin){$(".wikiaPlaceholder .wikia-button").removeAttr("onclick");$(".wikiaPlaceholder .wikia-button").click(function(e){if(e.target.nodeName=="SPAN"){showComboAjaxForPlaceHolder($(e.target.parentNode).attr('id'),true);}
else
{showComboAjaxForPlaceHolder($(e.target).attr('id'),true);}
return false;});var editpromptable=$("#ca-viewsource").add("#te-editanon").add('.loginToEditProtectedPage').add(".upphotoslogin");if((typeof wgDisableAnonymousEditig!=='undefined')&&(wgDisableAnonymousEditig)){editpromptable=editpromptable.add(".editsection");}
editpromptable.click(function(e){var message=true;if($(e.target).is(".loginToEditProtectedPage")){message='protected';}else if($(e.target).is(".upphotoslogin")){message='reload';}
showComboAjaxForPlaceHolder(false,"",function(){AjaxLogin.doSuccess=function(){if(message=='protected'){AjaxLogin.doReload('action=edit');}else if(message=='reload'){AjaxLogin.doReload('');}else{var target=$(e.target);if(target.is('a')){window.location.href=target.attr('href');}else{if(target.parent().is('a')){window.location.href=target.parent().attr('href');}else{window.location.href=target.closest('nav').find('a').attr('href');}}}}},false,message);return false;});$(".wikiaComboAjaxLogin").click(function(e){showComboAjaxForPlaceHolder(false,"",function(){AjaxLogin.doSuccess=function(){CreatePage.openDialog(e,null);}});return false;});$('.require-login').click(function(e){$().log('login required for this action');if(showComboAjaxForPlaceHolder('',false,function(){AjaxLogin.doSuccess=function(){var href=$(e.target).attr('href');if(href){window.location.href=href;}};},false,true)){e.preventDefault();}});}
var clickAfterLogin=$.storage.get('AjaxLoginClickAfterLogin');if(typeof clickAfterLogin=='string'){$().log('clicking '+clickAfterLogin,'AjaxLogin');$(clickAfterLogin).click();$.storage.del('AjaxLoginClickAfterLogin');}});;var UserLoginAjaxForm=function(el,options){this.el=$(el);this.options=options||{};this.init();};UserLoginAjaxForm.prototype.init=function(){this.form=this.el.find("form");this.wikiaForm=new WikiaForm(this.form);this.inputs={username:this.form.find('input[name=username]'),password:this.form.find('input[name=password]'),keeploggedin:this.form.find('input[name=keeploggedin]'),logintoken:this.form.find('input[name=loginToken]'),returnto:this.form.find('input[name=returnto]')};this.submitButton=this.form.find('input[type=submit]');this.forgotPasswordLink=this.form.find('.forgot-password');this.retrieveLoginToken();this.inputs['returnto'].val(wgPageName);this.form.submit($.proxy(this.submitLogin,this));this.forgotPasswordLink.click($.proxy(this.mailPassword,this));this.inputs['username'].focus();};UserLoginAjaxForm.prototype.submitLogin=function(e){this.submitButton.attr('disabled','disabled');if(this.options['ajaxLogin']){e.preventDefault();this.ajaxLogin();}};UserLoginAjaxForm.prototype.ajaxLogin=function(){$.post(wgScriptPath+'/wikia.php',{controller:'UserLoginSpecial',method:'login',format:'json',loginToken:this.loginToken,username:this.inputs['username'].val(),password:this.inputs['password'].val(),keeploggedin:this.inputs['keeploggedin'].is(':checked')},$.proxy(this.submitLoginHandler,this));};UserLoginAjaxForm.prototype.submitLoginHandler=function(json){$().log(json);$('.error-msg').remove();this.form.find('.input-group').removeClass('error');var result=json['result'];if(result==='ok'){var callback=this.options['callback']||'';if(callback&&typeof callback==='function'){callback(json);}else{this.reloadPage();}}else if(result==='resetpass'){var callback=this.options['resetpasscallback']||'';if(callback&&typeof callback==='function'){callback(json);}else{$.post(wgScriptPath+'/wikia.php',{controller:'UserLoginSpecial',method:'changePassword',format:'html',username:this.inputs['username'].val(),password:this.inputs['password'].val(),returnto:this.inputs['returnto'].val(),fakeGet:1},$.proxy(this.retrieveTemplateHandler,this));}}else if(result==='unconfirm'){$.post(wgScriptPath+'/wikia.php',{controller:'UserLoginSpecial',method:'getUnconfirmedUserRedirectUrl',format:'json',username:this.inputs['username'].val()},function(json){window.location=json['redirectUrl'];});}else{this.submitButton.removeAttr('disabled');this.errorValidation(json);}};UserLoginAjaxForm.prototype.retrieveTemplateHandler=function(html){var content=$('<div style="display:none" />').append(html);var heading=content.find('h1');var form=this.form;this.form.slideUp(400,function(){form.replaceWith(content);content.slideDown(400);});};UserLoginAjaxForm.prototype.reloadPage=function(){var location=window.location.href;var delim="?";if(location.indexOf("?")>0){delim="&";}
window.location.href=location.split("#")[0]+delim+"cb="+Math.floor(Math.random()*10000);};UserLoginAjaxForm.prototype.errorValidation=function(json){if(json['errParam']){this.wikiaForm.showInputError(json['errParam'],json['msg']);}else{this.wikiaForm.showGenericError(json['msg']);}};UserLoginAjaxForm.prototype.retrieveLoginToken=function(params){params=params||{};if(!this.loginToken||params['clearCache']){this.loginToken='retrieving';$.post(wgScriptPath+'/wikia.php',{controller:'UserLoginSpecial',method:'retrieveLoginToken',format:'json'},$.proxy(function(res){this.loginToken=res.loginToken;this.inputs['logintoken'].val(res.loginToken);},this));}};UserLoginAjaxForm.prototype.mailPassword=function(e){e.preventDefault();$('.error-msg').remove();this.form.find('.input-group').removeClass('error');this.form.find('.error-msg').remove();$().log('mailing password');$.post(wgScriptPath+'/wikia.php',{controller:'UserLoginSpecial',method:'mailPassword',format:'json',username:this.inputs['username'].val()},$.proxy(this.mailPasswordHandler,this));};UserLoginAjaxForm.prototype.mailPasswordHandler=function(json){$().log(json);if(json['result']==='ok'){this.errorValidation(json);}else if(json['result']==='error'){this.errorValidation(json);}};;var UserSignupAjaxForm=function(wikiaForm,inputsToValidate,submitButton){this.wikiaForm=wikiaForm;this.inputsToValidate=inputsToValidate||[];this.submitButton=$(submitButton);};UserSignupAjaxForm.prototype.validateInput=function(e){var el=$(e.target);var paramName=el.attr('name');var params={controller:'UserSignupSpecial',method:'formValidation',format:'json',field:paramName};params[paramName]=el.val();var proxyObj={'paramName':paramName,'form':this};$.post(wgScriptPath+'/wikia.php',params,$.proxy(this.validationHandler,proxyObj));};UserSignupAjaxForm.prototype.validationHandler=function(res){var paramName=this.paramName;var form=this.form;if(res['result']==='ok'){form.wikiaForm.clearInputError(this.paramName);}else{form.wikiaForm.showInputError(this.paramName,res['msg']);}
var isInvalid=false;var inputsToValidate=form.inputsToValidate;for(var i=0;i<inputsToValidate.length;i++){if(form.wikiaForm.getInputGroup(inputsToValidate[i]).hasClass('error')){isInvalid=true;break;}}
if(isInvalid){form.submitButton.attr('disabled','disabled');}else{form.submitButton.removeAttr('disabled');}};;var UserLoginModal={loginAjaxForm:false,show:function(options){if(!window.wgComboAjaxLogin&&window.wgEnableUserLoginExt){options=options||{};$.get(wgScriptPath+'/wikia.php',{controller:'UserLoginSpecial',method:'modal',format:'html',uselang:window.wgUserLanguage},function(res){UserLoginModal.dialog=$(res).makeModal({width:350});UserLoginModal.loginAjaxForm=new UserLoginAjaxForm(UserLoginModal.dialog,{ajaxLogin:true,callback:function(res){var callback=options['callback'];if(callback&&typeof callback==='function'){if(!options['persistModal']){UserLoginModal.dialog.closeModal();}
callback();}else{UserLoginModal.loginAjaxForm.reloadPage();}},resetpasscallback:function(res){$.post(wgScriptPath+'/wikia.php',{controller:'UserLoginSpecial',method:'changePassword',format:'html',username:UserLoginModal.loginAjaxForm.inputs['username'].val(),password:UserLoginModal.loginAjaxForm.inputs['password'].val(),returnto:UserLoginModal.loginAjaxForm.inputs['returnto'].val(),fakeGet:1},function(html){var content=$('<div style="display:none" />').append(html);var heading=content.find('h1');UserLoginModal.dialog.find('h1').text(heading.text());heading.remove();var contentBlock=UserLoginModal.dialog.find('.UserLoginModal');contentBlock.slideUp(400,function(){contentBlock.html('').html(content);content.show();contentBlock.slideDown(400);});});}});UserLoginFacebook.init();});$.getResources([$.getSassCommonURL('/extensions/wikia/UserLogin/css/UserLoginModal.scss')]);return true;}else if(window.wgComboAjaxLogin){showComboAjaxForPlaceHolder(false,false,function(){if(options['callback']){AjaxLogin.doSuccess=options['callback'];}},false,true);return true;}
return false;},init:function(){var editpromptable=$("#ca-viewsource, #te-editanon, .loginToEditProtectedPage, .upphotoslogin");if(window.wgDisableAnonymousEditing){editpromptable=editpromptable.add(".editsection");}
editpromptable.click(function(ev){if(UserLogin.isForceLogIn()){ev.preventDefault();}});$('body').delegate('.ajaxLogin','click',function(e){UserLoginModal.show();e.preventDefault();});}};$(function(){if((typeof window.wgEnableUserLoginExt!='undefined')&&wgEnableUserLoginExt){UserLoginModal.init();}});;window.onFBloaded=function(){$().log('onFBloaded','FB');var fbAppId=window.fbAppId,channelUrl=window.location.protocol+'//'+
window.location.host+window.wgScriptPath+'/channel.php?lang='+encodeURIComponent(window.fbScriptLangCode);if(typeof fbAppId!='string'){$().log('FB','appId is empty!');return;}
FB.init({appId:fbAppId,oauth:true,status:true,cookie:true,xfbml:window.fbUseMarkup,channelUrl:channelUrl});if(typeof GlobalTriggers!='undefined'){GlobalTriggers.fire('fbinit');}};$(document).ready(function(){$('#pt-fbconnect,#pt-fblink,#pt-fbconvert').addClass('mw-fblink');$('#pt-fblogout').click(function(){var logout=confirm("You are logging out of both this site and Facebook.");if(logout){FB.logout(function(response){window.location=window.fbLogoutURL;});}});$("#fbconnect a").click(function(ev){WET.byStr('FBconnect/userlinks/connect');loginByFBConnect();ev.preventDefault();});if($.getUrlVar('ref')==='fbfeed'){var suffix='',type=$.getUrlVar('fbtype');if(type!==''){suffix='/'+type;}
WET.byStr('FBconnect/userfromfb'+suffix);}
if(skin=='oasis'){var timer=null,mouseIn=false,FBbutton=$('#WikiaPageHeader .likes :first-child');var poll=function(){if(FBbutton.children('span').filter(':visible').length>1){$.hideAds();}else{$.showAds();if(!mouseIn){clearInterval(timer);}}};$('#WikiaPageHeader .likes').hover(function(){mouseIn=true;timer=setInterval(poll,250);},function(){mouseIn=false;if(FBbutton.children('span').filter(':visible').length<2){clearInterval(timer);}});}});function sendToConnectOnLogin(){sendToConnectOnLoginForSpecificForm("");}
function sendToConnectOnLoginForSpecificForm(formName){FB.getLoginStatus(function(response){if(formName!=""){formName="/"+formName;}
var destUrl=wgServer+wgScript+"?title=Special:Connect"+formName+"&returnto="+encodeURIComponent(window.fbReturnToTitle||wgPageName)+"&returntoquery="+encodeURIComponent(window.wgPageQuery||'');if(formName=="/ConnectExisting"){window.location.href=destUrl;return;}
$('#fbConnectModalWrapper').remove();$.postJSON(window.wgScript+'?action=ajax&rs=SpecialConnect::checkCreateAccount&cb='+wgStyleVersion,function(data){if(data.status=="ok"){$().getModal(window.wgScript+'?action=ajax&rs=SpecialConnect::ajaxModalChooseName&returnto='+encodeURIComponent(wgPageName)+'&returntoquery='+encodeURIComponent(window.wgPageQuery||''),"#fbConnectModal",{id:"fbConnectModalWrapper",width:600,callback:function(){$('#fbConnectModalWrapper .close').click(function(){WET.byStr('FBconnect/ChooseName/X');});}});}else{window.location.href=destUrl;}});});}
function openFbLogin(){FB.login(FB.bind(sendToConnectOnLogin,null),{scope:"publish_stream"});}
function loginByFBConnect(){openFbLogin();return false;}
function loginAndConnectExistingUser(){AjaxLogin.action='loginAndConnect';AjaxLogin.form.unbind('submit');AjaxLogin.form=$('#userajaxconnectform');AjaxLogin.form.submit(function(ev){AjaxLogin.formSubmitHandler(ev);return false;});}
window.wgAjaxLoginOnInit=function(){AjaxLogin.slideToNormalLogin=function(el){$().log('AjaxLogin: slideToNormalLogin()');var firstSliderCell=$("#AjaxLoginSliderNormal");var slideto=0;AjaxLogin.beforeDoSuccess=function(){return true;};$("#AjaxLoginConnectMarketing a.forward").show();$("#AjaxLoginConnectMarketing a.back").hide();firstSliderCell.animate({marginLeft:slideto},function(){$('#fbLoginAndConnect').hide();});};AjaxLogin.slideToLoginAndConnect=function(el){$().log('AjaxLogin: slideToLoginAndConnect()');$('#fbLoginAndConnect').show();var firstSliderCell=$("#AjaxLoginSliderNormal");var slideto=-351;$("#AjaxLoginConnectMarketing a.forward").hide();$("#AjaxLoginConnectMarketing a.back").show();AjaxLogin.beforeDoSuccess=function(){FB.getLoginStatus(function(response){if(response.session){sendToConnectOnLoginForSpecificForm("ConnectExisting");}else{var slideto=-354;$('#userloginErrorBox3').hide();$('#fbLoginLastStep').show();$('#AjaxLoginConnectMarketing').animate({marginLeft:slideto},function(){$('#fbLoginAndConnect').animate({marginLeft:slideto});});$('#fbLoginAndConnect').hide();}});return false;}
firstSliderCell.animate({marginLeft:slideto});};AjaxLogin.LoginAndConnectHideBack=function(){$("#AjaxLoginConnectMarketing a.back").hide();};AjaxLogin.slider=function(e){if(typeof e!='undefined'){e.preventDefault();}
if($(this).hasClass("forward")){AjaxLogin.slideToLoginAndConnect(this);}else{AjaxLogin.slideToNormalLogin(this);}};$("#AjaxLoginConnectMarketing a").click(AjaxLogin.slider);$('#fbAjaxLoginConnect').click(function(){WET.byStr('FBconnect/login_dialog/connect');});$("#AjaxLoginConnectMarketing .forward").click(function(){WET.byStr('FBconnect/login_dialog/slider/forward');});$("#AjaxLoginConnectMarketing .back").click(function(){WET.byStr('FBconnect/login_dialog/slider/back');});$("#wpLoginAndConnectCombo").click(function(){WET.byStr('FBconnect/login_dialog/login_and_connect');});$().log('Fbconnect: AjaxLogin expend');}
function fixXFBML(id){if(typeof $.browser.msie!='undefined'&&typeof $.browser.version!='undefined'&&$.browser.version&&$.browser.version.substring(0,$.browser.version.indexOf('.'))<9){GlobalTriggers.bind('fbinit',function(){var node=$('#'+id).parent(),html=node.html();node.html('').append(html);FB.XFBML.parse(node.get(0));$().log('XFBML run for #'+id,'FB');});}}
$(function(){if(window.wgCanonicalSpecialPageName==='Connect'){fixXFBML('fbSpecialConnect');}});;var Geo={cookieName:'Geo',geoData:{}};Geo.getGeoData=function(){if($.isEmptyObject(Geo.geoData)){var jsonData=decodeURIComponent($.cookies.get(Geo.cookieName));Geo.geoData=JSON.parse(jsonData);}
return Geo.geoData;};;var MeeboBar={network:'',init:function(){switch(window.cscoreCat){case'Entertainment':MeeboBar.network='wikia_entertainment';break;case'Gaming':MeeboBar.network='wikia_gaming';break;default:MeeboBar.network='wikia_lifestyles';}
window.Meebo||function(c){function p(){return["<",i,' onload="var d=',g,";d.getElementsByTagName('head')[0].",j,"(d.",h,"('script')).",k,"='//cim.meebo.com/cim?iv=",a.v,"&",q,"=",c[q],c[l]?"&"+l+"="+c[l]:"",c[e]?"&"+e+"="+c[e]:"","'\"></",i,">"].join("")}var f=window,a=f.Meebo=f.Meebo||function(){(a._=a._||[]).push(arguments)},d=document,i="body",m=d[i],r;if(!m){r=arguments.callee;return setTimeout(function(){r(c)},100)}a.$={0:+new Date};a.T=function(u){a.$[u]=new Date-a.$[0]};a.v=5;var j="appendChild",h="createElement",k="src",l="lang",q="network",e="domain",n=d[h]("div"),v=n[j](d[h]("m")),b=d[h]("iframe"),g="document",o,s=function(){a.T("load");a("load")};f.addEventListener?f.addEventListener("load",s,false):f.attachEvent("onload",s);n.style.display="none";m.insertBefore(n,m.firstChild).id="meebo";b.frameBorder="0";b.name=b.id="meebo-iframe";b.allowTransparency="true";v[j](b);try{b.contentWindow[g].open()}catch(w){c[e]=d[e];o="javascript:var d="+g+".open();d.domain='"+d.domain+"';";b[k]=o+"void(0);"}try{var t=b.contentWindow[g];t.write(p());t.close()}catch(x){b[k]=o+'d.write("'+p().replace(/"/g,'\\"')+'");d.close();'}a.T(1)}({network:MeeboBar.network});Meebo.disableSharePageButton=true;Meebo('domReady');}};if(window.wgEnableMeeboExt){MeeboBar.init();};if(!window.Wikia)window.Wikia={};window.Wikia.CookieCutter=(function(){var cookieReplaceRegEx1=/^\s*/,cookieReplaceRegEx2=/\s*$/,lastCookieContent,cookies;function fetchCookies(){var cookieString=document.cookie,pair,name,value,separated;if(lastCookieContent!=cookieString){cookies={};lastCookieContent=cookieString;separated=cookieString.split(';');for(var i=0,m=separated.length;i<m;i++){pair=separated[i].split('=');name=pair[0].replace(cookieReplaceRegEx1,'').replace(cookieReplaceRegEx2,'');value=decodeURIComponent(pair[1]);cookies[name]=value;}}
return cookies;}
return{get:function(name){var val=fetchCookies()[name];return(typeof val!=='undefined')?val:null;},set:function(name,value,options){var expDate,cookieString='',data=[];options=options||{};if(typeof value=='undefined'||value===null){value='';options.expires=-1;}
if(options.expires){if(typeof options.expires=='number'){expDate=new Date();expDate.setTime(expDate.getTime()+(options.expires));}else if(options.expires instanceof Date){expDate=options.expires;}
data.push('; expires='+expDate.toUTCString());}
options.path&&data.push('; path='+options.path);options.domain&&data.push('; path='+options.domain);options.secure&&data.push('; secure');cookieString=name+'='+encodeURIComponent(value);for(var x=0,y=data.length;x<y;x++){cookieString+=data[x];}
document.cookie=cookieString;return cookieString;}};})();;VisualDNAAAT={activeCountries:['US','UK','GB'],apiKey:'wikia',method:'reportPageView',init:function(){$.getScript('http://a1.vdna-assets.com/analytics.js',function(data,textStatus){this.VDNA.queue=this.VDNA.queue||[];VDNA.queue.push({apiKey:VisualDNAAAT.apiKey,method:VisualDNAAAT.method});});}}
if(window.wgIntegrateVisualDNAAAT){if(window.Geo){var geoData=Geo.getGeoData();if(typeof geoData=="object"&&!$.isEmptyObject(geoData)&&$.inArray(geoData['country'],VisualDNAAAT.activeCountries)>-1){VisualDNAAAT.init();}}};var AdMeldAPIClient={sizes:[],slots:{'TOP_RIGHT_BOXAD':{size:'300x250',placement:'test_atf',ad:null,pixels:null},'TOP_LEADERBOARD':{size:'728x90',placement:'test_atf',ad:null,pixels:null},'LEFT_SKYSCRAPER_2':{size:'160x600',placement:'test_btf_right',ad:null,pixels:null},'PREFOOTER_LEFT_BOXAD':{size:'300x250',placement:'test_btf',ad:null,pixels:null},'PREFOOTER_RIGHT_BOXAD':{size:'300x250',placement:'test_btf_right',ad:null,pixels:null}}};AdMeldAPIClient.log=function(msg,level){if(typeof top.WikiaLogger!='undefined'){top.WikiaLogger.log(msg,level,'AdMeldAPIClient');}};AdMeldAPIClient.track=function(data,profile){profile=profile||'admeldapiclient';this.log('track '+data.join('/')+' in '+profile,6);data[0]='admeldapiclient/'+data[0];var event=data;if(event.length>3){event=[event[0],event[1],event.slice(2).join('/')];}
this.log('event: ['+event.join(', ')+']',6);WikiaTracker.track(data.join('/'),'liftium.'+profile,event);};AdMeldAPIClient.getAd=function(slotname){this.log('getAd '+slotname,5);try{slotname=slotname.replace('HOME_','');this.log('slotname HOME_'+slotname+' replaced with '+slotname,9);}catch(e){}
try{return this.slots[slotname].ad.creative+this.slots[slotname].pixels.join("\n");}catch(e){this.log('Error in getAd '+slotname+', returning null',3);this.track(['error','get_ad',slotname],'error');return null;}};AdMeldAPIClient.getBid=function(slotname){this.log('getBid '+slotname,5);try{slotname=slotname.replace('HOME_','');this.log('slotname HOME_'+slotname+' replaced with '+slotname,9);}catch(e){}
try{return this.slots[slotname].ad.bid;}catch(e){this.log('Error in getBid '+slotname+', returning -1',3);this.track(['error','get_bid',slotname],'error');return-1;}};AdMeldAPIClient.init=function(){this.log('init',1);var page=top.wgServer+top.wgArticlePath.replace('$1',top.wgPageName);for(var slot in this.slots){this.log('ask for '+slot+' bid',5);var s=this.slots[slot];this.log(s,9);var url='http://tag.admeld.com/ad/json?publisher_id='+525+'&site_id='+'wikia'+'&placement='+s.placement+'&size='+s.size+'&url='+page+'&callback='+'AdMeldAPIClient.callback'+'&container='+slot;this.log('calling '+url,7);this.track(['call',slot]);$.ajax({url:url,dataType:'jsonp'});this.slots[slot].url=url;this.slots[slot].timer=(new Date).getTime();if($.inArray(s.size,this.sizes)==-1){this.sizes.push(s.size);}}};AdMeldAPIClient.callback=function(data){this.log(data,7);try{var slot=data.ad.container;this.slots[slot].ad=data.ad;this.slots[slot].pixels=data.pixels;}catch(e){this.log('Error in callback, broken ad',3);this.track(['error','callback','ad'],'error');return false;}
try{var time=(new Date).getTime()-this.slots[slot].timer;this.log('callback '+slot+' after '+time+' ms',5);this.slots[slot].timer=time;if(time>5000)time=5000;time=(time/1000).toFixed(1);this.track(['callback',slot,time]);}catch(e){this.log('Error in callback, broken timer',3);this.track(['error','callback','timer'],'error');}
try{var bid=this.slots[slot].ad.bid;this.track(['bid',slot,bid.toFixed(3)]);this.slots[slot].ad.bid=(bid*0.875).toFixed(2);}catch(e){this.log('Error in callback, broken bid',3);this.track(['error','callback','bid'],'error');return false;}
return true;};AdMeldAPIClient.adjustLiftiumChain=function(tags){this.log(tags,7);try{if(this.sizes.indexOf(tags[0].size)==-1){this.log('adjustLiftiumChain '+tags[0].size+' skipped, no tags for this size',5);return tags;}
this.log('adjustLiftiumChain '+tags[0].size,5);}catch(e){this.log('Error in adjustLiftiumChain',3)
this.track(['error','adjust_liftium_chain'],'error');}
for(var i=0;i<tags.length;i++){var t=tags[i];this.log(t,9);if(t.network_id==172){this.log(t,7);var slotname=t.criteria.placement[0];try{slotname=slotname.replace('HOME_','');this.log('slotname HOME_'+slotname+' replaced with '+slotname,9);}catch(e){}
var bid=this.getBid(slotname);var tier=this.getLiftiumTier(bid);tags[i].tier=tier;tags[i].value=bid;this.log('AdMeld tag #'+t.tag_id+' adjusted to tier '+tier+', value $'+bid,5);this.track(['liftium',t.tag_id,tier,bid]);}}
return tags;};AdMeldAPIClient.getLiftiumTier=function(bid){this.log('getLiftiumTier '+bid,5);if(bid>=2.00)return 3;if(bid>=1.00)return 4;if(bid>=0.80)return 5;if(bid>=0.65)return 6;if(bid>=0.50)return 7;if(bid>=0.35)return 8;if(bid>=0.20)return 9;return 10;};AdMeldAPIClient.getParamForDART=function(slotname){this.log('getParamForDART '+slotname,5);var bid=this.roundBidForDART(this.getBid(slotname));this.track(['dart',slotname,bid]);return'admeld='+bid+';';};AdMeldAPIClient.roundBidForDART=function(bid){this.log('roundBidForDART '+bid,5);if(bid>5)bid=5;bid=Math.round(bid*10)/10;bid=bid.toFixed(2);return bid;};if(!top.wgNoExternals&&!(top.wgUserName&&!top.wgUserShowAds)&&top.wgEnableAdMeldAPIClient){top.AdMeldAPIClient.init();};var AdConfig={adSlotsRequiringJSInvocation:{HOME_INVISIBLE_TOP:1,INVISIBLE_TOP:1,INVISIBLE_1:1,INVISIBLE_2:1},geo:null,geoCookieName:'Geo',isHighValueCountry:function(country){country=country.toUpperCase();if(window.wgHighValueCountries){return country in window.wgHighValueCountries&&window.wgHighValueCountries[country];}},isHighValueSlot:function(slotname){switch(slotname){case'CORP_TOP_LEADERBOARD':case'CORP_TOP_RIGHT_BOXAD':case'EXIT_STITIAL_BOXAD_1':case'HOME_INVISIBLE_TOP':case'HOME_TOP_LEADERBOARD':case'HOME_TOP_RIGHT_BOXAD':case'HUB_TOP_LEADERBOARD':case'INVISIBLE_MODAL':case'INVISIBLE_TOP':case'LEFT_SKYSCRAPER_2':case'MIDDLE_RIGHT_BOXAD':case'MODAL_VERTICAL_BANNER':case'TEST_HOME_TOP_RIGHT_BOXAD':case'TEST_TOP_RIGHT_BOXAD':case'TOP_LEADERBOARD':case'TOP_RIGHT_BOXAD':return true;break;default:return false;}},cookie:function(name,value,options){if(arguments.length>1){return Wikia.CookieCutter.set(name,value,options);}else{return Wikia.CookieCutter.get(name);}},pullGeo:function(){if(AdConfig.geo){return;}
var cookie=decodeURIComponent(AdConfig.cookie(AdConfig.geoCookieName));if(typeof cookie!='undefined'&&cookie){try{AdConfig.geo=JSON.parse(cookie);}catch(e){}}},init:function(){AdConfig.pullGeo();}};AdConfig.DART={adDriverNumCall:null,categories:null,categoryStrMaxLength:500,corporateDbName:'wikiaglobal',hasPrefooters:null,height:null,largeWidth:1024,ord:Math.round(Math.random()*23456787654),size:null,tile:1,width:null,zone1:null,zone2:null,sizeMap:{'300x250':'300x250,300x600','600x250':'600x250,300x250','728x90':'728x90,468x60,980x130,980x65','160x600':'160x600,120x600','0x0':'1x1','300x100':'300x100','120x240':'120x240','242x90':'242x90'},slotMap:{'CORP_TOP_LEADERBOARD':{'tile':2,'loc':'top','dcopt':'ist'},'CORP_TOP_RIGHT_BOXAD':{'tile':1,'loc':'top'},'DOCKED_LEADERBOARD':{'tile':8,'loc':"bottom"},'EXIT_STITIAL_BOXAD_1':{'tile':2,'loc':"exit"},'EXIT_STITIAL_BOXAD_2':{'tile':3,'loc':"exit"},'EXIT_STITIAL_INVISIBLE':{'tile':1,'loc':"exit",'dcopt':"ist"},'FOOTER_BOXAD':{'tile':5,'loc':"footer"},'HOME_INVISIBLE_TOP':{'tile':12,'loc':"invisible"},'HOME_LEFT_SKYSCRAPER_1':{'tile':3,'loc':"top"},'HOME_LEFT_SKYSCRAPER_2':{'tile':3,'loc':"middle"},'HOME_TOP_LEADERBOARD':{'tile':2,'loc':"top",'dcopt':"ist"},'HOME_TOP_RIGHT_BOXAD':{'tile':1,'loc':"top"},'HOME_TOP_RIGHT_BUTTON':{'tile':3,'loc':"top"},'HUB_TOP_LEADERBOARD':{'tile':2,'loc':'top','dcopt':'ist'},'INCONTENT_BOXAD_1':{'tile':4,'loc':"middle"},'INCONTENT_BOXAD_2':{'tile':5,'loc':"middle"},'INCONTENT_BOXAD_3':{'tile':6,'loc':"middle"},'INCONTENT_BOXAD_4':{'tile':7,'loc':"middle"},'INCONTENT_BOXAD_5':{'tile':8,'loc':"middle"},'INCONTENT_LEADERBOARD_1':{'tile':4,'loc':"middle"},'INCONTENT_LEADERBOARD_2':{'tile':5,'loc':"middle"},'INCONTENT_LEADERBOARD_3':{'tile':6,'loc':"middle"},'INCONTENT_LEADERBOARD_4':{'tile':7,'loc':"middle"},'INCONTENT_LEADERBOARD_5':{'tile':8,'loc':"middle"},'INVISIBLE_1':{'tile':10,'loc':"invisible"},'INVISIBLE_2':{'tile':11,'loc':"invisible"},'INVISIBLE_MODAL':{'tile':14,'loc':"invisible"},'INVISIBLE_TOP':{'tile':13,'loc':"invisible"},'LEFT_SKYSCRAPER_1':{'tile':3,'loc':"top"},'LEFT_SKYSCRAPER_2':{'tile':3,'loc':"middle"},'LEFT_SKYSCRAPER_3':{'tile':6,'loc':"footer"},'MIDDLE_RIGHT_BOXAD':{'tile':1,'loc':"middle"},'MODAL_VERTICAL_BANNER':{'tile':2,'loc':"modal"},'PREFOOTER_BIG':{'tile':5,'loc':"footer"},'PREFOOTER_LEFT_BOXAD':{'tile':5,'loc':"footer"},'PREFOOTER_RIGHT_BOXAD':{'tile':5,'loc':"footer"},'TOP_BUTTON':{'tile':3,'loc':'top'},'TOP_LEADERBOARD':{'tile':2,'loc':"top",'dcopt':"ist"},'TOP_RIGHT_BOXAD':{'tile':1,'loc':"top"},'TEST_HOME_TOP_RIGHT_BOXAD':{'tile':1,'loc':"top"},'TEST_TOP_RIGHT_BOXAD':{'tile':1,'loc':"top"},'TOP_RIGHT_BUTTON':{'tile':3,'loc':"top"}}};AdConfig.DART.getUrl=function(slotname,size,useIframe,adProvider){if(AdConfig.DART.sizeMap[size]){size=AdConfig.DART.sizeMap[size];}
var mtfIFPath='';var src='';switch(adProvider){case'AdDriver':src='driver';break;case'DART':src='direct';mtfIFPath='mtfIFPath=/extensions/wikia/AdEngine/;';break;case'Liftium':default:src='liftium';mtfIFPath='mtfIFPath=/extensions/wikia/AdEngine/;';break;}
AdConfig.DART.initSiteAndZones();var url='http://'+
AdConfig.DART.getSubdomain()+'.doubleclick.net/'+
AdConfig.DART.getAdType(useIframe)+'/'+
AdConfig.DART.site+'/'+AdConfig.DART.zone1+'/'+AdConfig.DART.zone2+';'+'s0='+AdConfig.DART.site.replace(/wka\./,'')+';'+'s1='+AdConfig.DART.zone1+';'+'s2='+AdConfig.DART.zone2+';'+
AdConfig.DART.getCustomKeyValues()+
AdConfig.DART.getArticleKV()+
AdConfig.DART.getDomainKV(window.location.hostname)+
AdConfig.DART.getHostnamePrefix(window.location.hostname)+'pos='+slotname+';'+
AdConfig.DART.getTitle()+
AdConfig.DART.getLanguage()+
AdConfig.DART.getResolution()+
AdConfig.DART.getPrefooterStatus()+
(window.wgEnableKruxTargeting&&Krux.dartKeyValues?Krux.dartKeyValues:'')+
AdConfig.DART.getImpressionCount(slotname)+
AdConfig.DART.getPartnerKeywords()+
AdConfig.DART.getCategories()+
AdConfig.DART.getLocKV(slotname)+
AdConfig.DART.getDcoptKV(slotname)+
((typeof top.wgEnableAdMeldAPIClient!='undefined'&&top.wgEnableAdMeldAPIClient)?top.AdMeldAPIClient.getParamForDART(slotname):'')+
mtfIFPath+'src='+src+';'+'sz='+size+';'+'mtfInline=true;'+
AdConfig.DART.getTileKV(slotname,adProvider)+'endtag=$;'+'ord='+AdConfig.DART.ord+'?';return url;}
AdConfig.DART.getMobileUrl=function(slotname,size,useIframe,adProvider){size='5x5';var mtfIFPath='';var src='mobile';AdConfig.DART.initSiteAndZones();var url='http://'+'ad.mo'+'.doubleclick.net/'+'DARTProxy/mobile.handler?k='+
AdConfig.DART.site+'/'+AdConfig.DART.zone1+'/'+AdConfig.DART.zone2+';'+'s0='+AdConfig.DART.site.replace(/wka\./,'')+';'+'s1='+AdConfig.DART.zone1+';'+'s2='+AdConfig.DART.zone2+';'+
AdConfig.DART.getCustomKeyValues()+
AdConfig.DART.getArticleKV()+
AdConfig.DART.getDomainKV(window.location.hostname)+
AdConfig.DART.getHostnamePrefix(window.location.hostname)+'pos='+slotname+';'+
AdConfig.DART.getTitle()+
AdConfig.DART.getLanguage()+
AdConfig.DART.getResolution()+
AdConfig.DART.getPrefooterStatus()+
AdConfig.DART.getImpressionCount(slotname)+
AdConfig.DART.getPartnerKeywords()+
AdConfig.DART.getCategories()+
AdConfig.DART.getLocKV(slotname)+
AdConfig.DART.getDcoptKV(slotname)+
mtfIFPath+'src='+src+';'+'ord='+AdConfig.DART.ord+';'+'sz='+size+';'+'mtfInline=true;'+
AdConfig.DART.getTileKV(slotname,adProvider)+'&dw=1'+'&u='+AdConfig.DART.getUniqueId();return url;}
AdConfig.DART.getSubdomain=function(){var subdomain='ad';if(AdConfig.geo){switch(AdConfig.geo.continent){case'AF':case'EU':subdomain='ad-emea';break;case'AS':switch(AdConfig.geo.country){case'AE':case'CY':case'BH':case'IL':case'IQ':case'IR':case'JO':case'KW':case'LB':case'OM':case'PS':case'QA':case'SA':case'SY':case'TR':case'YE':subdomain='ad-emea';break;default:subdomain='ad-apac';}
break;case'OC':subdomain='ad-apac';break;case'NA':case'SA':default:subdomain='ad';}}
return subdomain;}
AdConfig.DART.getAdType=function(useIframe){if(useIframe){return'adi';}else{return'adj';}}
AdConfig.DART.initSiteAndZones=function(){if(AdConfig.DART.isWikiaHub()){AdConfig.DART.site=AdConfig.DART.getSite('hub');AdConfig.DART.zone1=AdConfig.DART.getZone1(window.wgWikiaHubType+'_hub');AdConfig.DART.zone2='hub';}
else if(AdConfig.DART.isAutoHub()){AdConfig.DART.site=AdConfig.DART.getSite(window.wgHubsPages[wgPageName.toLowerCase()]['site']);AdConfig.DART.zone1=AdConfig.DART.getZone1(window.wgHubsPages[wgPageName.toLowerCase()]['name']);AdConfig.DART.zone2='hub';}
if(!AdConfig.DART.site){AdConfig.DART.site=AdConfig.DART.getSite(window.cityShort);}
if(!AdConfig.DART.zone1){AdConfig.DART.zone1=AdConfig.DART.getZone1(window.wgDBname);}
if(!AdConfig.DART.zone2){AdConfig.DART.zone2=AdConfig.DART.getZone2(window.adLogicPageType);}}
AdConfig.DART.isWikiaHub=function(){if(window.wgWikiaHubType){return true;}
return false;}
AdConfig.DART.isAutoHub=function(){if(wgDBname!=AdConfig.DART.corporateDbName){return false;}
if(!window.wgHubsPages){return false;}
for(var key in window.wgHubsPages){if(typeof key=='object'&&key['name']){key=key['name'];}
if(wgPageName.toLowerCase()==key.toLowerCase()){return true;}}
return false;}
AdConfig.DART.getSite=function(hub){return'wka.'+hub;}
AdConfig.DART.getZone1=function(dbname){if(typeof dbname!='undefined'&&dbname){return'_'+dbname.replace('/[^0-9A-Z_a-z]/','_');}else{return'_wikia';}};AdConfig.DART.getZone2=function(pageType){if(typeof pageType!='undefined'&&pageType){return pageType;}else{return'article';}};AdConfig.DART.getCustomKeyValues=function(){if(typeof wgDartCustomKeyValues!='undefined'&&wgDartCustomKeyValues){return wgDartCustomKeyValues+';';}
return'';};AdConfig.DART.getArticleKV=function(){if(typeof wgArticleId!='undefined'&&wgArticleId){return"artid="+wgArticleId+';';}else{return'';}};AdConfig.DART.getDomainKV=function(hostname){var lhost,pieces,sld='',np;lhost=hostname.toLowerCase();pieces=lhost.split(".");np=pieces.length;if(pieces[np-2]=='co'){sld=pieces[np-3]+'.'+pieces[np-2]+'.'+pieces[np-1];}else{sld=pieces[np-2]+'.'+pieces[np-1];}
if(sld!==''){return'dmn='+sld.replace(/\./g,'')+';';}else{return'';}};AdConfig.DART.getHostnamePrefix=function(hostname){lhost=hostname.toLowerCase();pieces=lhost.split('.');if(pieces.length){return'hostpre='+pieces[0]+';';}
return'';}
AdConfig.DART.getTitle=function(){if(window.wgPageName){return"wpage="+encodeURIComponent(wgPageName.toLowerCase())+";";}else{return"";}};AdConfig.DART.getLanguage=function(){var lang='unknown';if(typeof wgContentLanguage!='undefined'&&wgContentLanguage){lang=wgContentLanguage;}
return'lang='+lang+';';};AdConfig.DART.getResolution=function(){if(!AdConfig.DART.width||!AdConfig.DART.height){AdConfig.DART.width=document.documentElement.clientWidth||document.body.clientWidth;AdConfig.DART.height=document.documentElement.clientHeight||document.body.clientHeight;}
if(AdConfig.DART.width>AdConfig.DART.largeWidth){return'dis=large;';}else{return'';}};AdConfig.DART.getPrefooterStatus=function(){if(AdConfig.DART.hasPrefooters==null){if(typeof AdEngine!="undefined"){if(AdEngine.isSlotDisplayableOnCurrentPage("PREFOOTER_LEFT_BOXAD")){AdConfig.DART.hasPrefooters="yes";}else{AdConfig.DART.hasPrefooters="no";}}else{AdConfig.DART.hasPrefooters="unknown";}}
return"hasp="+AdConfig.DART.hasPrefooters+";";};AdConfig.DART.getImpressionCount=function(slotname){if(AdConfig.DART.adDriverNumCall==null){var cookie=AdConfig.cookie('adDriverNumAllCall');if(typeof cookie!='undefined'&&cookie){AdConfig.DART.adDriverNumCall=eval('('+cookie+')');}}
if(AdConfig.DART.adDriverNumCall!=null){for(var i=0;i<AdConfig.DART.adDriverNumCall.length;i++){if(AdConfig.DART.adDriverNumCall[i].slotname==slotname){if(parseInt(AdConfig.DART.adDriverNumCall[i].ts)+wgAdDriverCookieLifetime*3600000>wgNow.getTime()){var num=parseInt(AdConfig.DART.adDriverNumCall[i].num);return'impct='+num+';';}}}}
return'';};AdConfig.DART.getPartnerKeywords=function(){var kw='';if(typeof window.partnerKeywords=='undefined'||!window.partnerKeywords){return kw;}
kw='pkw='+encodeURIComponent(window.partnerKeywords)+';';return kw;};AdConfig.DART.initCategories=function(){if(typeof wgCategories!='object'||!wgCategories){AdConfig.DART.categories='';return;}
var categories='';for(var i=0;i<wgCategories.length;i++){categoryStr='cat='+encodeURIComponent(wgCategories[i].toLowerCase().replace(/ /g,'_'))+';';if(categories.length+categoryStr.length<=AdConfig.DART.categoryStrMaxLength){categories+=categoryStr;}}
AdConfig.DART.categories=categories;};AdConfig.DART.getCategories=function(){if(!AdConfig.DART.categories){AdConfig.DART.initCategories();}
return AdConfig.DART.categories;};AdConfig.DART.getLocKV=function(slotname){if(AdConfig.DART.slotMap[slotname]&&AdConfig.DART.slotMap[slotname].loc){return'loc='+AdConfig.DART.slotMap[slotname].loc+';';}else{return'';}};AdConfig.DART.getDcoptKV=function(slotname){if(window.wgUserName&&!window.wgUserShowAds){return'';}
else if(AdConfig.DART.slotMap[slotname]&&AdConfig.DART.slotMap[slotname].dcopt){return'dcopt='+AdConfig.DART.slotMap[slotname].dcopt+';';}else{return'';}};AdConfig.DART.getTileKV=function(slotname,adProvider){switch(adProvider){case'AdDriver':return'tile='+AdConfig.DART.tile+++';';break;default:if(AdConfig.DART.slotMap[slotname]&&AdConfig.DART.slotMap[slotname].tile){return'tile='+AdConfig.DART.slotMap[slotname].tile+';';}}
return'';};AdConfig.DART.getUniqueId=function(){var wikia_mobile_id=AdConfig.cookie('wikia_mobile_id');if(typeof wikia_mobile_id!='undefined'&&wikia_mobile_id){return wikia_mobile_id;}else{wikia_mobile_id=Math.round(Math.random()*23456787654);AdConfig.cookie('wikia_mobile_id',wikia_mobile_id,{expires:1000*60*60*24*180,path:wgCookiePath,domain:wgCookieDomain});return wikia_mobile_id;}
return'';};AdConfig.init();;var AdsCB=Math.floor(Math.random()*99999999);var AdEngine={bodyWrapper:'bodyContent',adColorsContent:[],hidableSlotThreshold1:2400,hidableSlotThreshold2:4000,hidableSlotsThresholds:{},init:function(){AdEngine.hidableSlotsThresholds['LEFT_SKYSCRAPER_2']=AdEngine.hidableSlotThreshold1;AdEngine.hidableSlotsThresholds['LEFT_SKYSCRAPER_3']=AdEngine.hidableSlotThreshold2;AdEngine.hidableSlotsThresholds['PREFOOTER_LEFT_BOXAD']=AdEngine.hidableSlotThreshold1;AdEngine.hidableSlotsThresholds['PREFOOTER_RIGHT_BOXAD']=AdEngine.hidableSlotThreshold1;}};AdEngine.init();AdEngine.resetCssClear=function(side){$("#"+AdEngine.bodyWrapper+" div, #"+AdEngine.bodyWrapper+" table").each(function(){if($(this).css("float")==side){$(this).css("clear",side);}});};AdEngine.getAdColor=function(type){if(typeof window.themename=='string'){if(typeof AdEngine.adColorsContent[window.themename]=='object'){if(typeof AdEngine.adColorsContent[window.themename][type]=='string'){return AdEngine.adColorsContent[window.themename][type];}}}
if(typeof AdEngine.adColorsContent[type]=='string'){return AdEngine.adColorsContent[type];}
if(type=='text'){AdEngine.adColorsContent[type]=AdEngine.normalizeColor($('#article').css('color'));return AdEngine.adColorsContent[type];}
if(type=='link'||type=='url'){var a;if($("#article a:first").length>0){a=$("#article a:first");AdEngine.adColorsContent[type]=AdEngine.normalizeColor(a.css('color'));}else if($("a:first").length>0){a=$("a:first");AdEngine.adColorsContent[type]=AdEngine.normalizeColor(a.css('color'));}else{AdEngine.adColorsContent[type]="black";}
return AdEngine.adColorsContent[type];}
if(type=='bg'){var color=AdEngine.normalizeColor($('#article').css('background-color'));if(color===''||color==window.AdGetColor('text')){color=AdEngine.normalizeColor($('#wikia_page').css('background-color'));}
if(color===''||color=='000000'){color=AdEngine.normalizeColor($("#bodyContent").css('background-color'));}
AdEngine.adColorsContent[type]=color;return AdEngine.adColorsContent[type];}};AdEngine.normalizeColor=function(input){if(input=="transparent"){return"";}else if(input.match(/^#[A-F0-9a-f]{6}/)){return input.toUpperCase().replace(/^#/,"");}else if(input.match(/^#[A-F0-9a-f]{3}$/)){var f=input.substring(1,1);var s=input.substring(2,1);var t=input.substring(3,1);var out=f+f+s+s+t+t;return out.toUpperCase();}else if(input.match(/^rgb/)){var str=input.replace(/[^0-9,]/g,'');var rgb=str.split(",");return AdEngine.dec2hex(rgb[0])+
AdEngine.dec2hex(rgb[1])+
AdEngine.dec2hex(rgb[2]);}else{return input;}};AdEngine.dec2hex=function(d){var h=parseInt(d,10).toString(16);if(h.toString()=="0"){return"00";}else{return h.toUpperCase();}};window.AdGetColor=AdEngine.getAdColor;AdEngine.displaySlotIfAd=function(slotname){var noopStrings=['http://images.wikia.com/common/wikia/noad.gif'];var noopFound=false;for(var i=0;i<noopStrings.length;i++){if($('#'+slotname+'_load').html().indexOf(noopStrings[i])>-1){$("#"+slotname+"_load").hide();noopFound=true;break;}}
if(!noopFound){$("#"+slotname).show();}};AdEngine.getKeywords=function(){var metaTags=document.getElementsByTagName('meta');for(var i=0;i<metaTags.length;i++){if(metaTags[i].name=="keywords"){return metaTags[i].content;}}
return'';};AdEngine.getMinuteTargeting=function(){var myDate=new Date();return myDate.getMinutes()%15;};AdEngine.isSlotHidable=function(slotname){return slotname in AdEngine.hidableSlotsThresholds;};AdEngine.isSlotDisplayableOnCurrentPage=function(slotname){if(AdEngine.isSlotHidable(slotname)){if($(document).height()>=AdEngine.hidableSlotsThresholds[slotname]){return true;}
else{return false;}}
return true;};AdEngine.hiddenSlotOnShortPage=function(slotname){if(AdEngine.isSlotHidable(slotname)){if(AdEngine.isSlotDisplayableOnCurrentPage(slotname)){$('#'+slotname).css("display","block")
return false;}
else{return true;}}
return false;};;var AdProviderOpenX={url:'',url2:''};AdProviderOpenX.getUrl=function(baseUrl,slotname,zoneId,affiliateId,hub,additionalParams){var url=baseUrl;url+="?loc="+escape(window.location);if(typeof document.referrer!="undefined"){url+="&referer="+escape(document.referrer);}
if(typeof document.context!="undefined"){url+="&context="+escape(document.context);}
if(typeof document.mmm_fo!="undefined"){url+="&mmm_fo=1";}
url+="&target=_top";if(typeof AdsCB!="undefined"){url+="&cb="+AdsCB;}else{url+="&cb="+Math.floor(Math.random()*99999999);}
if(typeof document.MAX_used!="undefined"&&document.MAX_used!=","){url+="&exclude="+document.MAX_used;}
url+="&hub="+hub;url+="&skin_name="+skin;url+="&cont_lang="+wgContentLanguage;url+="&user_lang="+wgUserLanguage;url+="&dbname="+wgDBname;url+="&tags="+wgWikiFactoryTagNames.join(",");url+=additionalParams;if(slotname!=''){url+="&slotname="+slotname;}
if(zoneId!=''){url+="&zoneid="+zoneId;}
if(affiliateId!=''){url+="&id="+affiliateId;}
url+="&block=1";AdProviderOpenX.url=url;return AdProviderOpenX.url;}
AdProviderOpenX.getUrl2=function(){var url="/__spotlights/spc.php";url+="?zones=14|15|16|17|18|19|20|21|22";url+="&source=";url+="&r="+Math.floor(Math.random()*99999999);url+="&loc="+escape(window.location);if(typeof document.referrer!="undefined")url+="&referer="+escape(document.referrer);url+="&target=_top";url+="&cb="+Math.floor(Math.random()*99999999);url+="&hub="+cityShort;url+="&skin_name="+skin;url+="&cont_lang="+wgContentLanguage;url+="&user_lang="+wgUserLanguage;url+="&dbname="+wgDBname;url+="&tags="+escape(wgWikiFactoryTagNames.join(","));url+="&block=1";url+=(document.charset?'&charset='+document.charset:(document.characterSet?'&charset='+document.characterSet:''));AdProviderOpenX.url2=url;return AdProviderOpenX.url2;}
if(!window.wgNoExternals&&window.wgEnableOpenXSPC){setTimeout(function(){$.getScript(AdProviderOpenX.getUrl2(),function(){if(typeof window.spcCallbacks!='undefined'){for(var i=0;i<window.spcCallbacks.length;i++){window[window.spcCallbacks[i]]();}}});},0);};var LazyLoadAds={log:function(msg){$().log(msg,'LazyLoadAds');},settings:{threshhold:200},init:function(){LazyLoadAds.update();$(window).scroll(LazyLoadAds.update);},update:function(){if(!LazyLoadAds.allAds){LazyLoadAds.w=$(window);LazyLoadAds.allAds=[];$(".LazyLoadAd").each(function(i,el){LazyLoadAds.allAds.push($(el));});LazyLoadAds.num=LazyLoadAds.allAds.length;}
var fold=LazyLoadAds.w.height()+LazyLoadAds.w.scrollTop();for(var i=0;i<LazyLoadAds.num;i++){if(LazyLoadAds.allAds[i]){var top=LazyLoadAds.allAds[i].offset().top;if(top>0&&top<(fold+LazyLoadAds.settings.threshhold)){var elemId=LazyLoadAds.allAds[i].attr("id");var adslot=elemId;if($('#'+elemId).get(0).nodeName=='IFRAME'){var fillFunction="fillIframe_"+adslot.replace("_iframe","");}else{var fillFunction="fillElem_"+adslot;}
if(typeof(window[fillFunction])!=='undefined'){window[fillFunction]();window[fillFunction]=false;}
else{LazyLoadAds.log("Warning! "+fillFunction+" does not exist.");}
LazyLoadAds.allAds[i]=false;}}}}};$(function(){LazyLoadAds.init();});;this.ghostwriter=this.ghostwriter||function(){function o(a,d){d=d||{};if(!w){w=true;z=o.htmlstreamparser;e=o.domtree;r=o.domelement;C=o.capabilities;o.fh.set()}if(f)return n(a,d);f=true;var k=a;if(typeof k=="string")k=H.getElementById(k);if(!k)throw Error("Unable to find element "+k+"\nUsage: ghostwriter(element|elementid, options)");a=k;return K(a,d)}function n(a,d){m&&u(i.D,d.script);x[x.length]=Array.prototype.slice.call(arguments);return false}function u(a,d){var k=s(d);flog([a,k,""].join(' "'))}
function K(a,d){function k(p){O.parse(p+"\n")}function D(p){O.parse(p)}function A(p){var I=C.synchronous;P--;m&&!p&&u(i.g,this);I||Q&&Q.parentNode&&Q.parentNode===G&&G.removeChild(Q);p||R("finishscript",this);if(U.length>0){if(!P){p=U.shift();l(p,A);R("startscript",p);P++;M.reset();m&&u(i.f,p);R("onelement",p);M.a&&M.a.element!=p?M.a.appendChild(p):N(p)}}else if(I||p)P<1&&Z&&L();else{o.currload=A;Q=H.createElement("SCRIPT");Q.text="ghostwriter.currload(true)";Q.type="text/javascript";flog("setting local trigger");P++;G.appendChild(Q)}return true}function J(p){if(p){if(p.defer){M.close();return p}if(P&&p.src){U[U.length]=p;M.close("script",false);return p}if(typeof p=="function"){p();m&&flog([i.f,p+"",""].join(" '"));A.call(p,true);return p}P++;var I=false;m&&u(i.f,p);R("startscript",p);if(!p.src){I=C;var S=!(I.synchronous&&I.localonload);if(S){p.setAttribute("type","text/any");p.removeAttribute("language")}else if(I.usedatauri){p.setAttribute("src","data:text/javascript,"+encodeURIComponent(p.text));p.async=true}I=S}I||l(p,A);M.close();if(I){I=p.text;S=E.execScript||eval;try{S(I)}finally{I=true}I&&A.call(p)}return p}}function L(){H.write=T;H.writeln=aa;m&&u(i.o,d.script);R("end",d.script);setTimeout(ba,0);f=false;if(!(x.length<1)){var p=x.shift();m&&u(i.A,p[1].script);o.apply(o,p)}return true}var N=g(a,d.insertType),O=new z({chars:function(p){M.m(p)},start:function(p,I,S){p=p.toLowerCase();for(var $={},W=0,ca=I.length,X=I[W];W<ca;X=I[++W])$[X.name]=X.value;I=$;if(!R("check",p,I))return false;M.add(p,I);S&&M.close(p)},end:function(p){p.toLowerCase()=="script"?J(M.a.element):M.close(p)}}),T=H.write,aa=H.writeln,V=F(d.script),ba=typeof d.done=="function"?d.done:h,R=v(o.handlers||{},d.handlers||{}),M=new e(N,function(){var p=Array.prototype.slice.call(arguments);p.unshift("onelement");R.apply(E,p)}),P=0,U=[],Z=false,Q=null;m&&u(i.start,d.script);H.write=D;D[q]=o[t]("write");H.writeln=k;k[q]=o[t]("writeln");R("begin",d.script);"tagName"in V&&y(M,V);J(V);V=null;Z=true;P<1&&L()}function y(a,d){var k=new r("script",{});k.b=false;k.element=d;k.parentNode=a.a;a.a=k}function v(a,d){var k={begin:[],end:[],onelement:[],check:[],startscript:[],finishscript:[]};B(k,function(D,A){typeof a[D]=="function"&&A.push(a[D]);typeof d[D]=="function"&&A.push(d[D])});return function(D){var A=k[D],J=Array.prototype.slice.call(arguments);J.shift();for(var L=0,N=A.length,O;L<N;L++){try{O=A[L].apply(E,J)}catch(T){flog([i.O,'handler type: "'+D+"'",'callback funtion: "'+A[L]+'"','exception: "'+T+'"'].join("\n"))}if(O!=null&&!O)return O}return true}}function B(a,d){for(var k in a)a.hasOwnProperty(k)&&d.call(a,k,a[k]);return a}function F(a){if(typeof a=="function"||typeof a=="object"&&"nodeType"in a&&"tagName"in a&&a.tagName=="SCRIPT")return a;var d=H.createElement("SCRIPT");if(typeof a=="string")a={src:a};for(var k in a){if(k=="text"||k=="innerText")d.text=a[k];if(typeof a[k]!="object")d[k]=a[k]}return d}function l(a,d){function k(D){D.type=="error"&&flog("uh oh ... script "+a.src+" finished shamefully");if(!(D.type=="readystatechange"&&a.readyState&&a.readyState!="complete"&&a.readyState!="loaded")){if(a.detachEvent){a.detachEvent("onreadystatechange",arguments.callee);a.detachEvent("onerror",arguments.callee)}else if(a.removeEventListener){a.removeEventListener("load",arguments.callee,false);a.removeEventListener("error",arguments.callee,false)}else a.onload=a.onerror=null;d.call(a)}}if(a.attachEvent){a.attachEvent("onreadystatechange",k);a.attachEvent("onerror",k)}else if(a.addEventListener){a.addEventListener("load",k,false);a.addEventListener("error",k,false)}else{a.onload=k;a.onerror=k}}function s(a){var d=typeof a=="function"?a+"":a.src?a.src:a.text;a=a.id||"";var k=d.length;a=a?"(#"+a+") ":"";d=d.replace(/\n/g," ");if(k<=45)return d;return[a,d.substr(0,40),"{...}",d.substr(k-40,k-1)].join("")}var E=this,H=E.document,G=H.G||H.getElementsByTagName("HEAD")[0],q="toString",t="nativeToString",z,e,r,C,x=[],w=false,f=false,m=E.location.hash.toLowerCase().indexOf("gwrdebug")>=0?true:false,h=new Function,g,j=function(a){var d={h:false,q:false,F:false};d.h=/msie/i.test(a);d.q=d.h&&/msie 6/i.test(a);d.F=!d.h&&/firefox/i.test(a);d.opera=!!E.opera;return d}(navigator.userAgent),i=function(a){for(var d in a)a[d]=["ghostwriter.js  >> ",a[d],""].join("");return a}({D:"ENQUEUE script",A:"DEQUEUE script",start:"BEGIN ghostload",o:"FINISHED ghostload",f:"\tattach/execute script",g:"\tloaded/finished script",N:" !!! ERROR !!!!  Error executing handler "});o.queue=x;o.handlers={};o.debug=function(a){return a==null?m:m=a};o.currload=h;o.getscriptidentifier=s;g=function(a){return function(d,k){var D=k in a?a[k]:a.append,A=d.parentNode;return function(J){D(d,J,A)}}}({append:function(a,d){a.appendChild(d)},before:function(a,d,k){if(k=a.parentNode||k)k!=a.parentNode||j.q&&a.nodeType==3&&d.tagName.toLowerCase()=="script"?k.appendChild(d):k.insertBefore(d,a)},after:function(a,d){a.parentNode.insertBefore(d,a.nextSibling)}});return o}();window.flog=function(){var o=new Date;return function(n){n=["#gwr[+",((new Date-o)/100).toFixed(1),"] ",n].join("");typeof Y=="object"&&typeof Y.log=="function"&&Y.log(n);typeof console=="object"&&"log"in console&&console.log(n)}}();ghostwriter.nativeToString=function(){var o="function 00() {\n    [native code]\n}".split(0);return function(n){var u=o.slice();u[1]=n;return function(){return u.join("")}}}();window.ghostwriter.flushloadhandlers=window.ghostwriter.fh=function(o){function n(){x();K();r=true}function u(){if(C)return x;var f,m,h=G.documentElement;if(typeof Element=="object"&&typeof Element.prototype=="object"&&Element.prototype.doScroll)f=Element.prototype;else if(h&&h.doScroll)f=G.documentElement;if(!f)return new Function("return new Function()");m=f.doScroll;f.doScroll=new Function("throw new Error;");return function(){if(f==G.documentElement)G.documentElement.doScroll=m;else f.doScroll=function(){m.call(this)}}}function K(){var f=t;s(f,function(m){var h=f[m];s(h,function(g){g=h[g];g.event&&y(g,m)})})}function y(f,m){var h=m.indexOf("on")==0;f.target.dispatchEvent&&!h?v.apply(this,arguments):B.apply(this,arguments)}function v(f){var m=f.event;f=f.target;var h=G.createEvent("UIEvents"),g=z+m.type;h.H=m;h.initEvent(g,false,false);f.dispatchEvent(h)}function B(f){var m=f.event,h=f.target;if(f=f.s)for(;listener=f.shift();)try{listener.call(h,m)}catch(g){E(w.z,listener+"",g.message)}}
function F(){function f(g){var j=t;return function(i){var a;if(i in j){a=[z+i,h(arguments[1],i),false];H()&&E(w.v,i,this)}else a=Array.prototype.slice.call(arguments);return Function.prototype.apply.call(g,this,a)}}function m(g){var j=t;return function(i,a){if(!(i in j))return Function.prototype.apply.call(g,this,Array.prototype.slice.call(arguments));var d=j[i][this];d=d.s=d.s||[];d[d.length]=a;return true}}function h(g){return function(j){var i=j.target,a=j.H;i.removeEventListener&&i.removeEventListener(j.type,arguments.callee,false);g.call(i,a)}}if(C)return false;l(q,function(g){if(g.addEventListener)g.addEventListener=f.call(g,g.addEventListener);if(g.attachEvent)g.attachEvent=m.call(g,g.attachEvent)})}function l(f,m){for(var h=0,g=f.length;h<g;h++)m.call(f,f[h]);return f}function s(f,m){for(var h in f)f.hasOwnProperty(h)&&m.call(f,h,f[h]);return f}function E(f,m,h){flog([f,' "',m,'" / "',h.toString(),'"'].join(""))}var H=o.ghostwriter.debug,G=document,q=[o,G],t,z="gwrsim",e=o.onload,r=false,C=false,x=new Function,w=function(f){for(var m in f)f[m]=["loadhandlers.js >> ",f[m],""].join("");return f}({B:"Received DOM load event of type ",K:"Registering for event of type ",v:"Adding new event listener ",z:"!!ERROR!! Exception thrown running callback function "});t=function(f,m){function h(j){var i=j.currentTarget||this,a=!j.target,d=a?"on"+j.type:j.type,k=g[d][i];H()&&E(w.B,d,i);if(a)if(document.createEventObject)j=document.createEventObject(j);else{a={};for(var D in j)a[D]=j[D];j=a}else j=j;k.event=j;i.removeEventListener&&i.removeEventListener(d,h,false);i.detachEvent&&!d.indexOf("on")==0&&i.detachEvent(d,h);r&&y(k,d)}var g={};l(f,function(j){l(m,function(i){var a=j;H()&&E(w.K,a,i);if(i.addEventListener){g[a]=g[a]||{};g[a][i]={event:null,target:i};i.addEventListener(a,h,false)}if(i.attachEvent){a="on"+a;g[a]=g[a]||{};g[a][i]={event:null,target:i};i.attachEvent(a,h)}})});return g}("DOMContentLoaded0load0readystatechange".split(0),q);n.set=function(){x=u();for(var f="write0writeln0close0open".split(0),m="flog('Illegal call to document.00(): \"'+ a + '\"')".split(0),h=o.ghostwriter.nativeToString,g=0,j;j=f[g++];){m[1]=j;fn=new Function("a",m.join(""));G[j]=fn;fn.toString=h(j)}F(t);f=o.onload||e;m=G.addEventListener?"load":"onload";o.onload=e=null;if(f)if(o.addEventListener)o.addEventListener(m,f,false);else o.attachEvent&&o.attachEvent(m,f);if(C)return false;else return C=true};n.eventlist=t;o.onload=null;return n}(this);window.ghostwriter.domtree=function(){function o(v){document.body.appendChild(v)}function n(v,B){y=y||K.domelement;var F=this;this.r=typeof v=="function"?v:o;this.n=B||new Function;this.a={tagName:null,appendChild:function(l){F.r(l);return this},close:function(){return this},parentNode:null,ready:function(){return true}};this.a.parentNode=this.a;this.R=null;this.c=0}var u={html:false,head:false,body:false,noscript:true,noembed:true,title:true,meta:true},K=window.ghostwriter,y;n.prototype={m:function(v){var B=y("",v);!this.c&&v!=="\n"&&v!=="\r\n"&&this.a.appendChild(B.element);return this},add:function(v,B){B=typeof B=="undefined"?{}:B;if(v in u){u[v]&&this.c++;return this}else if(this.c)return this;var F=this.a,l=this.a=y(v,B);l.parentNode=F;if(l.ready()){try{this.n(l.element)}catch(s){flog("ERROR executing element add handler: "+s.message)}F.appendChild(l.element)}return this},reset:function(){this.c=0;return this},close:function(v,B){v=v||"";v=v.toLowerCase();if(B==null)B=true;if(v&&v in u&&u[v]&&this.c){this.c--;return this}else if(v&&v in u)return this;else if(this.c)return this;var F=this.a.ready(),l=F||this.a.close()&&this.a.ready();this.a=this.a.parentNode;if(!l)throw Error("attempting to close tag that is not ready");if(B&&!F){try{this.n(l)}catch(s){flog("ERROR executing element add handler: "+s.message)}this.a?this.a.appendChild(l):this.r(l)}return this}};n.prototype.addText=n.prototype.m;n.prototype.add=n.prototype.add;n.prototype.close=n.prototype.close;return n}();window.ghostwriter.domelement=function(){function o(l,s){this.element=u.createTextNode(s);this.b=true;return this}function n(l,s){if(K==this)return new n(l,s);if(!l)return this;this.tagName=l.toUpperCase();this.element=this.create(l,s);this.b=l in B?B[l]:true;return this}var u=document,K=window,y=navigator.userAgent,v=y.indexOf("MSIE")>-1?true:false;y=y.indexOf("WebKit")>-1?true:false;var B={style:false,script:false},F={};n.prototype={setAttribute:function(l,s){return this.element.setAttribute(l,s)},appendChild:function(l){var s=this.element;if(!(s.tagName.toLowerCase()=="script"&&s.src)){if("canHaveChildren"in s&&!s.canHaveChildren){l="data"in l?l.data:l.textContent;if(!l)return false;s.text+=l}else s.appendChild(l);return this}},J:function(){return this.b?this.element:false},close:function(){this.b=true;return this.element},create:function(){function l(q,t){var z=["<"+q];E(t,function(e,r){if(e.toLowerCase().indexOf("on")==0)r=r.replace(/\"/g,"&quot;");z[z.length]=e+'="'+r+'"'});z[z.length]=">";return u.createElement(z.join(" "))}function s(q,t){G=G||window.ghostwriter.htmlstreamparser.Encoder;var z=u.createElement(q);E(t,function(e,r){r=typeof r=="string"?G.htmlDecode(r):r;z.setAttribute(e,r)});return z}function E(q,t){for(var z in q)q.hasOwnProperty(z)&&t.call(q,z,q[z]);return q}var H=v&&(!u.documentMode||u.documentMode<9)?l:s,G=null;return function(q,t){q=q.toLowerCase();t=typeof t=="object"?t:{};return H.call(this,q,t)}}()};n.prototype.setAttribute=n.prototype.setAttribute;n.prototype.appendChild=n.prototype.appendChild;n.prototype.ready=n.prototype.J;n.prototype.close=n.prototype.close;n.prototype.create=n.prototype.create;F.link=function(){var l={};return function(s,E){if(E.href&&E.href in l)return new o("","");l[E.href]=true;return new n(s,E)}}();o.prototype=new n;F[""]=o;v&&function(){function l(){n.apply(this,arguments);return this}function s(q,t){this.k="";this.u=t;this.b=false;return this}function E(){n.apply(this,arguments);this.b=false;return this}E.prototype=new n;s.prototype=new n;l.prototype=new n;l.prototype.appendChild=function(q){if(q.tagName=="TBODY"){this.e=q;this.element.appendChild(q);return this}else if(!this.e){this.e=document.createElement("TBODY");this.element.appendChild(this.e)}this.e.appendChild(q);return this};s.prototype.create=function(q,t){return t};s.prototype.appendChild=function(q){if(q="data"in q?q.data:q.text)this.k+=q};s.prototype.close=function(){var q="STYLE",t=["<span>&nbsp;</span><"+q],z=u.getElementsByTagName("HEAD")[0];return function(){var e=this.u,r=t.slice(),C=u.createElement("DIV");for(var x in e)r[r.length]=[x,'"'+e[x]+'"'].join("=");r[r.length]=[">",this.k,"</",q,">"].join("");C.innerHTML=r.join(" ");e=this.element=C.lastChild;e=e.styleSheet.imports;r=0;for(C=e.length;r<C;r++){x=(new n("LINK",{href:e[r].href.replace(t,""),type:"text/css",rel:"stylesheet"})).close();z.appendChild(x)}this.b=true;return this.element}}();var H={setAttribute:function(q,t){this.element.l[q]=t},appendChild:function(q){if(!q.tagName)return null;if(q.tagName.toUpperCase()==="PARAM"){var t=q.getAttribute("name"),z=this.element.t;if(t)z[t]=q.getAttribute("value")}return this},close:function(){var q=this.element,t=q.l,z=u.createElement("DIV"),e=["<object"];q=q.t;for(var r in t)e[e.length]=[r,'="',t[r],'"'].join("");e[e.length]=">";for(var C in q)e[e.length]=['<PARAM name="',C,'" value="',q[C],'"></PARAM>'].join("");e[e.length]="</object>";z.innerHTML=e.join(" ");this.b=true;return this.element=z.firstChild},create:function(q,t){t.type="application/x-shockwave-flash";return{l:t,t:{}}}};for(var G in H)E.prototype[G]=H[G];F.object=E;F.table=l;F.style=s}();if(y)F.Q=function(){function l(){return n.apply(this,arguments)}l.prototype=new n;l.prototype.create=function(){return u.createElement("noscript")};return l}();return function(l,s){l=l.toLowerCase();return l in F?new F[l](l,s):new n(l,s)}}();window.ghostwriter.htmlstreamparser=function(){function o(e){e=e||{};this.stack=[];this.i="";this.p=e||{};this.I=0;this.P=-1;for(var r=0,C=q.length,x=q[r];r<C;x=q[++r])x in this.p||(e[x]=new Function);this.get=function(){return""}}function n(e){var r={};e=e.split(",");for(var C=0;C<e.length;C++)r[e[C]]=true;return r}var u=/^<(\w+)((?:\s+[\w\-:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,K=/^<\/(\w+) *[>\n]/,y={L:/^\s*(?:<!--).*/,j:"<!--",C:/--[^>]*>/,M:"--\>"},v=/<!\[CDATA\[(.*?)]]\>/g,B=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,F=n("xml,area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),l=n("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul"),s=n("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,kbd,label,map,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var"),E=n("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),H=n("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),G=n("script,style,iframe"),q="chars,comment,start,end".split(","),t={};o.prototype={parse:function(e){function r(a,d){d=d.replace(y.L,"").replace(v,"$1");d.length>0&&g.chars(d);return""}function C(a,d,k,D){d=d.toLowerCase();if(l[d])for(;m.d()&&s[m.d()];)x("",m.d());E[d]&&m.d()==d&&x("",d);(D=F[d]||!!D)||m.push(d.toLowerCase());var A=[];k.replace(B,function(J,L,N,O,T){A.push({name:L,value:N?N:O?O:T?T:H[L]?L:""})});g.start(d,A,D)}function x(a,d){if(d){var k=false,D=m.slice();d=d.toLowerCase();for(var A=m.length-1;A>=0;A--)if(m[A]==d){k=true;break}if(k){m.length=A;for(k=D.length-1;k>=A;k--)g.end(D[k])}}}e=this.i+e;var w,f,m=this.stack,h=e,g=this.p,j="",i=0;this.i="";this.get=this.html=function(){return e};this.I++;for(m.d=function(){return this[this.length-1]};e;){j=this.stack[this.stack.length-1];f=true;i++;if(!j||!G[j]){if(e.indexOf(y.j)===0){if(w=y.C.exec(e.substr(y.j.length))){e=e.substr(y.j.length);w=w[0].length>3?w.index+w[0].length-3:w.index;g.comment(e.substr(w));e=e.substring(w+3);f=false}}else if(e.indexOf("</")===0){if(w=e.match(K)){e=e.substring(w[0].length);w[0].replace(K,x);f=false}}else if(e.indexOf("<")===0)if(w=e.match(u)){e=e.substring(w[0].length);w[0].replace(u,C);f=false}else e=e.replace(/^<[^>]*>/,"");if(f){w=e.indexOf("<");f=w<0?e:e.substring(0,w);j=j;e=w<0?"":e.substring(w);j in G||(f=z.htmlDecode(f));f.length>0&&g.chars(f)}}else if(e.indexOf("</")>-1&&e.match(RegExp("</"+j+" *[>\n]","i"))){w=e.length;f=t[j]=t[j]||RegExp("((?:.|\n|\r)*?)</"+j+" *[>\n]","i");e=e.replace(f,r);w>e.length&&x("",j)}if(e==h){this.i=e;return this}h=e}x();return false}};var z=o.Encoder=function(){function e(x,w){var f="";if(w[0]=="#")f=w[1]=="x"?parseInt(w.substr(2),16):parseInt(w.substr(1));else if(w in r)f=r[w];return f?String.fromCharCode(f):x}var r={apos:39,quot:34,amp:38,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};(function(x){var w={};for(var f in x)w[String.fromCharCode(x[f])]=f;return w})(r);var C=/&(.+?);/g;return{htmlDecode:function(x){return x.replace(C,e)}}}();return o}();window.ghostwriter.loadscripts=function(){function o(){if(!f.length){F()&&flog(m.g);return K()}var h=f.shift()||[],g=h[0],j=h[1],i;if(!h[2]){j.parentNode.replaceChild(g,j);return o()}if(g[r]){x[x.length]=[b,c];w=null;return o()}i={insertType:"before",script:g,done:o};if(j.parentNode===v){i.insertType="append";j=v}w=g;F()&&function(a){flog([m.start,"'",a,"'"].join(""));i.o=function(){flog(m.end);o()}}(l(g));B(j,i);return false}function n(){var h=y.createElement(z);h.text="void null";v.insertBefore(h,v.firstChild)}function u(h){h.className="";var g=E?h.cloneNode(false):y.createElement(z),j=h.attributes,i="";if("cssText"in g.style)g.style.cssText="";if(!E)for(var a=0,d=j.length;a<d;a++){i=j[a];g.setAttribute(i.name,i.value)}g.setAttribute(G,q);g.removeAttribute(t);g.removeAttribute(C);if(h.text)g.text=h.text;return g}function K(){for(var h,g,j=y.getElementsByTagName(z)[0],i=0,a=x.length;i<a;i++){h=u(x[i][0]);h.removeAttribute(e);g=x[i][1];g.parentNode?g.parentNode.replaceChild(h,g):j.parentNode.insertBefore(h,j)}setTimeout(B.flushloadhandlers,0)}var y=document,v=y.getElementsByTagName("HEAD")[0],B=window.ghostwriter,F=B.debug,l=B.getscriptidentifier,s=y.defaultView,E=navigator.userAgent.indexOf("MSIE")>=0,H=s&&s.getComputedStyle?"background-position":"backgroundPositionX",G="type",q="text/javascript",t="language",z="script",e="defer",r=e,C=e+"src",x=[],w=null,f=function(h){for(var g=[],j=0,i=h.length;j<i;j++)g[g.length]=h[j][2];return g}(function(){for(var h=y.getElementsByTagName(z),g=[],j=0,i="";h.length>0;){var a=h[0];i=(a.getAttribute(G)||"").toLowerCase();var d=(a.getAttribute(t)||"").toLowerCase(),k=y.createTextNode(""),D=i.indexOf(r)>=0;i=i.indexOf("javascript")>0||d&&d.indexOf("javascript")>-1||!i;d=a.getAttribute(C)||a.getAttribute("src");var A;if(D){A=parseInt;var J;J=a;var L=H,N=void 0;if(s&&s.getComputedStyle)N=s.getComputedStyle(J,"").getPropertyValue(L);else if(J.currentStyle)N=J.currentStyle[L];J=N||"";A=A(J.split.call(J," "),10)||0}else A=0;A=A;J=D?u(a):a;if(d&&!J.src){J.removeAttribute(C);J.src=d}i||(g[g.length]=[A,j,[J,k,D]]);a.parentNode.replaceChild(k,a);j++}return g}().sort(function(h,g){var j=h[0],i=g[0];if(j==i){j=h[1];i=g[1];return j<i?-1:1}else return j>i?-1:1})),m=function(h){for(var g in h)h[g]=["scriptloader.js >> ",h[g]," text/deferscript "].join("");return h}({start:"Starting ",end:"Complete",w:"BEGIN loading",g:"LOADED all"});F()&&flog(m.w);E&&n();o()};this.ghostwriter.capabilities=function(o){function n(){if(this.readyState&&this.readyState!="complete"&&this.readyState!="loaded")return false;this.onload=this.onreadystatechange=null;return true}var u={synchronous:false,localonload:false,usedatauri:false,complete:false},K=o.G||o.getElementsByTagName("head")[0];(function(){var y=o.createElement("script"),v=o.createElement("script");y.async=v.async=false;y.src="data:text/javascript,void 0";v.text="$gwsynctest= true";K.appendChild(y,K);K.appendChild(v,K);u.synchronous=typeof this.$gwsynctest=="boolean"})();(function(){var y=o.createElement("script"),v;y.onload=y.onreadystatechange=function(){n.apply(this,arguments);u.localonload=true;u.usedatauri=false;u.complete=true;clearTimeout(v)};v=setTimeout(function(){var B=o.createElement("script");B.src="data:text/javascript,void 0";B.onload=B.onreadystatechange=function(){if(n.apply(this,arguments))u.localonload=u.complete=u.usedatauri=true};K.appendChild(B)},1);K.appendChild(y);return false})();return u}(document);;var Aperture={eligibleGeos:{'US':1},geoData:[],liveconClientId:4651450754457,nonsecureScriptHost:'http://edge.aperture',secureScriptHost:'https://xedge.aperture',scriptUrl:'.displaymarketplace.com/displayscript.js',init:function(){if(window.wgEnableAperture){Aperture.geoData=Geo.getGeoData();var key='country';if($(Aperture.geoData).exists()){if(Aperture.geoData[key]in Aperture.eligibleGeos){var scriptHost=window.location.protocol=='https'?Aperture.secureScriptHost:Aperture.nonsecureScriptHost;var fullUrl=scriptHost+Aperture.scriptUrl+'?liveconclientID='+Aperture.liveconClientId+'&PageID='+window.aperturePageId;$.getScript(fullUrl);}}}}};Aperture.init();;var LiftiumOptions=LiftiumOptions||{};if(!window.Liftium){var Liftium={baseUrl:LiftiumOptions.baseUrl||"http://liftium.wikia.com/",chain:[],currents:[],eventsTracked:0,geoUrl:LiftiumOptions.geoUrl||"http://liftium.wikia.com/",loadDelay:100,maxHops:LiftiumOptions.maxHops||5,slotHops:[],rejTags:[],slotPlacements:[],slotTimeouts:0,slotTimer2:[],hopRegister:[],maxLoadDelay:LiftiumOptions.maxLoadDelay||2500,isCalledAfterOnload:LiftiumOptions.isCalledAfterOnload||0,hasMoreCalls:LiftiumOptions.hasMoreCalls||0,slotnames:[],fingerprint:'a'};Liftium._=function(id){return document.getElementById(id);};Liftium.addEventListener=function(item,eventName,callback){if(window.addEventListener){return item.addEventListener(eventName,callback,false);}else if(window.attachEvent){return item.attachEvent("on"+eventName,callback);}else{return false;}};Liftium.beaconCall=function(url,cb){var img=new Image(0,0);if(cb!==false){url+='&cb='+Math.random().toString().substring(2,8);}
if(url.length>1000){Liftium.d("Truncating beacon call url to 1000 characters");url=url.substring(0,1000);}
Liftium.d("Beacon call: "+url,7);img.src=url;};Liftium.buildChain=function(slotname){Liftium.slotTimer=Liftium.slotTimer||[];var size=Liftium.getSizeForSlotname(slotname);var now=new Date();Liftium.slotTimer[slotname]=now.getTime();var networks=[];Liftium.chain[slotname]=[];if(window.LiftiumPlacement){Liftium.slotPlacements[slotname]=window.LiftiumPlacement;window.LiftiumPlacement=null;}else{Liftium.slotPlacements[slotname]=LiftiumOptions.placement;LiftiumOptions.placement=null;}
if(size=="1x1"){size="0x0";}
if(Liftium.e(Liftium.config.sizes)||Liftium.e(Liftium.config.sizes[size])){Liftium.reportError("Unrecognized size in Liftium: "+size,"publisher");return false;}
if(typeof top.wgEnableAdMeldAPIClient!='undefined'&&top.wgEnableAdMeldAPIClient){Liftium.d('Calling AdMeldAPIClient.adjustLiftiumChain for '+size,3);top.AdMeldAPIClient.adjustLiftiumChain(Liftium.config.sizes[size]);}
Liftium.setAdjustedValues(Liftium.config.sizes[size]);Liftium.config.sizes[size].sort(Liftium.chainSort);var forcedAd=Liftium.getRequestVal('liftium_tag');if(!Liftium.e(forcedAd)){for(var j=0,l2=Liftium.config.sizes[size].length;j<l2;j++){var tf=Liftium.clone(Liftium.config.sizes[size][j]);if(tf.tag_id==forcedAd){Liftium.d("Forcing tagid #"+forcedAd+" on the front of the chain.",1,tf);Liftium.config.sizes[size][j].inChain=true;Liftium.chain[slotname].push(tf);networks.push(tf.network_name+", #"+tf.tag_id);}}}
for(var i=0,l=Liftium.config.sizes[size].length;i<l;i++){var t=Liftium.clone(Liftium.config.sizes[size][i]);if(Liftium.isValidCriteria(t,slotname)){Liftium.config.sizes[size][i].inChain=true;Liftium.chain[slotname].push(t);networks.push(t.network_name+", #"+t.tag_id);if(t.always_fill==1){Liftium.d("Chain complete - last ad is always_fill",2,networks);break;}else if(Liftium.chain[slotname].length==Liftium.maxHops-1){break;}}else{Liftium.rejTags.push(t.tag_id);}}
if(Liftium.chain[slotname].length===0){Liftium.reportError("Error building chain for "+slotname+".  No matching tags?");WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"error","no_matching_tags",slotname]),'liftium.errors');return false;}
if(Liftium.chain[slotname][Liftium.chain[slotname].length-1].always_fill!=1){var gAd=Liftium.getAlwaysFillAd(size,slotname);if(gAd!==false){Liftium.chain[slotname].push(gAd);networks.push("AlwaysFill: "+gAd.network_name+", #"+gAd.tag_id);}}
var sampledAd=Liftium.getSampledAd(size);if(sampledAd!==false&&Liftium.isValidCriteria(sampledAd,slotname)&&Liftium.chain[slotname][0].tier!="1"){Liftium.chain[slotname].reverse();Liftium.chain[slotname].push(sampledAd);Liftium.chain[slotname].reverse();networks.push("Sampled: "+sampledAd.network_name+", #"+sampledAd.tag_id);}
Liftium.d("Chain for "+slotname+" = ",3,networks);return true;};Liftium.buildQueryString=function(nvpairs,sep){if(Liftium.e(nvpairs)){return'';}
if(typeof sep=="undefined"){sep='&';}
var out='';for(var name in nvpairs){if(Liftium.e(nvpairs[name])){continue;}
out+=sep+encodeURIComponent(name)+'='+encodeURIComponent(nvpairs[name]);}
return out.substring(sep.length);};Liftium.callAd=function(sizeOrSlot,iframe){if(LiftiumOptions.offline){Liftium.d("Not printing tag because LiftiumOptions.offline is set");return false;}
if(Liftium.e(Liftium.config)){Liftium.reportError("Error downloading config");var t=Liftium.fillerAd(sizeOrSlot,"Error downloading config");document.write(t.tag);return false;}else if(Liftium.config.error){Liftium.reportError("Config error "+Liftium.config.error);var t2=Liftium.fillerAd(sizeOrSlot,Liftium.config.error);document.write(t2.tag);return false;}
var slotname=Liftium.getUniqueSlotname(sizeOrSlot);document.write('<div id="'+slotname+'">');Liftium._callAd(slotname);document.write("</div>");return true;};Liftium._callAd=function(slotname,iframe){Liftium.d("Calling ad for "+slotname,1);var t=Liftium.getNextTag(slotname);if(t===false){t=Liftium.fillerAd(slotname,"getNextTag returned false");if(iframe){Liftium.clearPreviousIframes(slotname);}else{document.write("<!-- Liftium Tag #"+t.tag_id+"-->\n");document.write(t.tag);}
return false;}
Liftium.handleNetworkOptions(t);Liftium.d("Ad #"+t.tag_id+" for "+t.network_name+" called in "+slotname);Liftium.d("Config = ",6,t);try{if(!Liftium.e(iframe)){Liftium.clearPreviousIframes(slotname);Liftium.callIframeAd(slotname,t);}else{Liftium.d("Tag :"+t.tag,5);Liftium.lastTag=t;Liftium.lastSlot=slotname;document.write(t.tag);Liftium.lastTag=null;}}catch(e){Liftium.reportError("Error loading tag #"+t.tag_id+": "+Liftium.print_r(e),"tag");}
return true;};Liftium.callIframeAd=function(slotname,tag,adIframe){Liftium.d("Calling Iframe Ad for "+slotname,1);var iframeUrl=Liftium.getIframeUrl(slotname,tag);if(Liftium.e(iframeUrl)||iframeUrl=="about:blank"){Liftium.d("Skipping No iframe ad called for No Ad for "+slotname,3);return;}
Liftium.slotTimer2[slotname+"-"+tag.tag_id]=Liftium.debugTime();Liftium.d("slotTimer2 begin for #"+tag.tag_id+" in "+slotname,3,Liftium.slotTimer2);if(typeof adIframe=="object"){adIframe.src=iframeUrl;}else{adIframe=document.createElement("iframe");var s=tag.size.split("x");adIframe.src=iframeUrl;adIframe.width=s[0];adIframe.height=s[1];adIframe.scrolling="no";adIframe.frameBorder=0;adIframe.marginHeight=0;adIframe.marginWidth=0;adIframe.allowTransparency=true;adIframe.id=slotname+'_'+tag.tag_id;var fs=tag.tag_name.match(/ [0-9]+x[0-9]+ /);if(fs){fs=fs[0].match(/[0-9]+x[0-9]+/);fs=fs[0].split("x");if(fs[0]==adIframe.width&&fs[1]==adIframe.height){}else{Liftium.d("Forced size "+fs[0]+"x"+fs[1]+" for "+slotname,3);adIframe.className+=" jumbo";adIframe.width=fs[0];adIframe.height=fs[1];var sz=iframeUrl.match(/;sz=[0-9x,]+;/);if(sz){iframeUrl=iframeUrl.replace(/;sz=[0-9x,]+;/,";sz="+fs[0]+"x"+fs[1]+";");Liftium.d("Forced size "+fs[0]+"x"+fs[1]+" in Dart URL: "+iframeUrl,3);adIframe.src=iframeUrl;}}}
Liftium._(slotname).appendChild(adIframe);}};Liftium.callInjectedIframeAd=function(sizeOrSlot,iframeElement){Liftium.d("Calling injected Iframe Ad for "+sizeOrSlot,1);var slotname=Liftium.getContainingDivId(iframeElement);Liftium.d("It's "+iframeElement.id+" inside "+slotname+" div",3);var placement=iframeElement.id.replace(/_iframe$/,"");WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"slot",sizeOrSlot+"_"+placement]),'liftium.slot');var track_string=Liftium.buildTrackUrl([LiftiumOptions.pubid,"slot",sizeOrSlot+"_"+placement]);if(track_string.indexOf('unknown')!=-1){_wtq.push([null,'liftium.varia',['error','fb_15045',track_string]]);}
var t=Liftium.getNextTag(slotname);if(!t){Liftium.d("no tag found for "+sizeOrSlot+". Collapsing frame.",1);iframeElement.width=0;iframeElement.height=0;return;}
var iframeUrl=Liftium.getIframeUrl(slotname,t);iframeElement.src=iframeUrl;Liftium.slotTimer2[slotname+"-"+t.tag_id]=Liftium.debugTime();Liftium.d("slotTimer2 begin for #"+t.tag_id+" in "+slotname,3,Liftium.slotTimer2);if(iframeUrl=="about:blank"){Liftium.d("Forced size 0x0 for "+slotname,3);iframeElement.width=0;iframeElement.height=0;return;}
var fs=t.tag_name.match(/ [0-9]+x[0-9]+ /);if(fs){fs=fs[0].match(/[0-9]+x[0-9]+/);fs=fs[0].split("x");if(fs[0]==iframeElement.width&&fs[1]==iframeElement.height){return;}
Liftium.d("Forced size "+fs[0]+"x"+fs[1]+" for "+slotname,3);iframeElement.className+=" jumbo";iframeElement.width=fs[0];iframeElement.height=fs[1];var sz=iframeUrl.match(/;sz=[0-9x,]+;/);if(sz){iframeUrl=iframeUrl.replace(/;sz=[0-9x,]+;/,";sz="+fs[0]+"x"+fs[1]+";");Liftium.d("Forced size "+fs[0]+"x"+fs[1]+" in Dart URL: "+iframeUrl,3);iframeElement.src=iframeUrl;}
return;}};Liftium.catchError=function(msg,url,line){try{var jsmsg;if(typeof msg=="object"){jsmsg="Error object: "+Liftium.print_r(msg);}else{jsmsg="Error on line #"+line+" of "+url+" : "+msg;}
Liftium.d("ERROR! "+jsmsg);if(Liftium.e(Liftium.lastTag)){Liftium.reportError(jsmsg,"onerror");}else{Liftium.reportError("Tag error for tag "+Liftium.print_r(Liftium.lastTag)+"\n"+jsmsg,"tag");}
if(!Liftium.e(window.failTestOnError)){window.LiftiumTest.testFailed();alert(msg);}}catch(e){}
return false;};Liftium.chainSort=function(a,b){var a_tier=parseInt(a.tier,10)||0;var b_tier=parseInt(b.tier,10)||0;if(a_tier<b_tier){return-1;}else if(a_tier>b_tier){return 1;}else{var a_value=parseFloat(a.adjusted_value)||0;var b_value=parseFloat(b.adjusted_value)||0;var a_weight=a_value+(a_value*Math.random()*0.75);var b_weight=b_value+(b_value*Math.random()*0.75);return b_weight-a_weight;}};Liftium.clearPreviousIframes=function(slotname){var loadDiv=Liftium._(slotname);if(loadDiv===null){return false;}
var iframes=loadDiv.getElementsByTagName("iframe");for(var i=0,l=iframes.length;i<l;i++){iframes[i].style.display="none";}
return true;};Liftium.clone=function(obj){if(typeof obj=="object"){if(obj==null){Liftium.d("Liftium.clone: obj == null",7);return"";}
var t=new obj.constructor();for(var key in obj){t[key]=Liftium.clone(obj[key]);}
return t;}else{return obj;}};Liftium.crossDomainMessage=function(message){XDM.allowedMethods=["Liftium.iframeHop","LiftiumTest.testPassed"];XDM.executeMessage(message.data);};Liftium.cookie=function(name,value,options){if(arguments.length>1){options=options||{};if(Liftium.e(value)){value='';options.expires=-1;}
var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var d;if(typeof options.expires=='number'){d=new Date();Liftium.d("Setting cookie expire "+options.expires+" milliseconds from "+d.toUTCString(),7);d.setTime(d.getTime()+(options.expires));}else{d=options.expires;}
expires='; expires='+d.toUTCString();}
var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';Liftium.d("Set-Cookie: "+[name,'=',encodeURIComponent(value),expires,path,domain,secure].join(''),6);document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');return true;}else{var cookieValue=null;if(!Liftium.e(document.cookie)){var cookies=document.cookie.split(';');for(var i=0,l=cookies.length;i<l;i++){var cookie=cookies[i].replace(/^\s+|\s+$/g,"");if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;}};Liftium.debug=function(msg,level,obj){if(Liftium.e(Liftium.debugLevel)){return false;}else if(level>Liftium.debugLevel){return false;}
if(typeof console=="object"&&console.dir){console.log(Liftium.debugTime()+" Liftium: "+msg);if(arguments.length>2){console.dir(obj);}}else if(typeof console=="object"&&console.log){console.log(Liftium.debugTime()+" Liftium: "+msg);if(arguments.length>2){console.log(Liftium.print_r(obj));}}
return true;};Liftium.d=Liftium.debug;Liftium.debugTime=function(){return new Date().getTime()-Liftium.startTime;};Liftium.formatTrackTime=function(t,max){if(isNaN(t)){Liftium.d("Error, time tracked is NaN: "+t,7);return"NaN";}
if(t<0){Liftium.d("Error, time tracked is a negative number: "+t,7);return"negative";}
t=t/1000;if(t>max){return"more_than_"+max;}
return t.toFixed(1);};Liftium.dec2hex=function(d){var h=parseInt(d,10).toString(16);if(h.toString()=="0"){return"00";}else{return h.toUpperCase();}};Liftium.empty=function(v){if(typeof v==='object'){for(var key in v){return false;}
return true;}else{return v===undefined||v===""||v===0||v===null||v===false||(typeof v==="number"&&isNaN(v))||false;}};Liftium.e=Liftium.empty;Liftium.fillerAd=function(size,message){size=size||"300x250";var tag='';if(!Liftium.e(message)){tag+='<div class="LiftiumError" style="display:none">Liftium message: '+message+"</div>";}
if(size.match(/300x250/)){tag+='<a href="http://www.peacecorps.gov/psa/webbanners/click?cid=psa15" target="_blank"><img src="http://www.peacecorps.gov/images/webbanners/full/300x250_legacy.gif" width="300" height="250" border="0" alt="Public Service Announcement"/></a>';}else if(size.match(/728x90/)){tag+='<a href="http://www.peacecorps.gov/psa/webbanners/click?cid=psa1" target="_blank"><img src="http://www.peacecorps.gov/images/webbanners/full/728x90_thinklocal.gif" width="728" height="90" border="0" alt="Public Service Announcement"/></a>';}else if(size.match(/160x600/)){tag+='<a href="http://www.peacecorps.gov/psa/webbanners/click?cid=psa14" target="_blank"><img src="http://www.peacecorps.gov/images/webbanners/full/160x600_legacy.gif" width="160" height="600" border="0" alt="Public Service Announcement"/></a>';}else{tag+='<span style="display: none">No available ads</span>';}
return{tag_id:'psa',network_name:"Internal Error PSA",tag:tag,size:size};};Liftium.getAdColor=function(type){try{switch(type){case"link":var links=document.getElementsByTagName("a");if(Liftium.e(links)){return null;}else{return Liftium.normalizeColor(Liftium.getStyle(links[0],"color"));}
case"bg":return Liftium.normalizeColor(Liftium.getStyle(document.body,"background-color"));case"text":return Liftium.normalizeColor(Liftium.getStyle(document.body,"color"));default:return null;}}catch(e){Liftium.d("Error in Liftium.getAdColor: "+e.message);return null;}};Liftium.getContainingDivId=function(element){var tempElement=element,tries=0;while(tempElement&&tries<10){if(tempElement.tagName=="DIV"&&tempElement.id){return tempElement.id;}else{tempElement=tempElement.parentNode;}
tries++;}
return false;};Liftium.getCookieDomain=function(){var domain=document.domain;var d=domain.match(/(?:wikia(?:-dev)?\.com|wowwiki\.com|wiki\.ffxiclopedia\.org|memory-alpha\.org|websitewiki\.de|yoyowiki\.org|marveldatabase\.com|www\.jedipedia\.de)$/);if(!Liftium.e(d)){domain=d[0];}else{WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"cookie_domain",domain]),'liftium.varia');}
Liftium.d("cookie domain is "+domain,7);return domain;};Liftium.getPageVar=function(name,defaultVal){return LiftiumOptions['kv_'+name]||defaultVal||'';};Liftium.getStyle=function(element,cssprop){var camelCase=cssprop.replace(/\-(\w)/g,function(all,letter){return letter.toUpperCase();});if(element.currentStyle){return element.currentStyle[camelCase]||"";}else if(document.defaultView&&document.defaultView.getComputedStyle){return document.defaultView.getComputedStyle(element,"")[camelCase]||"";}else{return element.style[camelCase]||"";}};Liftium.getAlwaysFillAd=function(size,slotname){for(var i=0,l=Liftium.config.sizes[size].length;i<l;i++){var t=Liftium.config.sizes[size][i];if(t.always_fill==1&&Liftium.isValidCriteria(t,slotname)){return Liftium.clone(t);}}
return false;};Liftium.getCountry=function(){if(!Liftium.e(Liftium.getCountryFound)){return Liftium.getCountryFound;}
var ac,geo=Liftium.geo||window.Geo;if(!Liftium.e(Liftium.getRequestVal('liftium_country'))){ac=Liftium.getRequestVal('liftium_country');Liftium.d("Using liftium_country for geo targeting ("+ac+")",8);}else if(Liftium.e(geo)||Liftium.e(geo.country)){Liftium.d("Unable to find a country for this IP, defaulting to unknown");return"unknown";}else{ac=geo.country.toLowerCase();}
if(ac==="gb"){ac="uk";}
Liftium.getCountryFound=ac;return ac;};Liftium.getBrowserLang=function(){var n=window.navigator;var l=n.language||n.systemLanguage||n.browserLanguage||n.userLanguage||"";return l.substring(0,2);};Liftium.getIframeUrl=function(slotname,tag){var m=tag.tag?tag.tag.match(/<iframe[\s\S]+src="([^"]+)"/):null;var iframeUrl;if(m!==null){iframeUrl=m[1].replace(/&amp;/g,"&");Liftium.d("Found iframe in tag, using "+iframeUrl+" for "+slotname,3);}else if(tag.network_name=="No Ad"){Liftium.d("Using about:blank for 'No Ad' to avoid iframe in "+slotname,3);iframeUrl="about:blank";}else if(tag.network_name=="DART"){iframeUrl=window.LiftiumDART.getUrl(Liftium.slotPlacements[slotname],tag.size,tag.network_options,true);}else{var p={"tag_id":tag.tag_id,"size":tag.size,"slotname":slotname,"placement":Liftium.slotPlacements[slotname]};iframeUrl=Liftium.baseUrl+"tag/?"+Liftium.buildQueryString(p);Liftium.d("No iframe found in tag, using "+iframeUrl+" for "+slotname,4);}
return iframeUrl;};Liftium.getMinutesSinceMidnight=function(){var now=new Date();return(now.getHours()*60)+now.getMinutes();};Liftium.getMinutesSinceReject=function(tag_id){var m=Liftium.getTagStat(tag_id,"m");if(m===null){return null;}else{return Liftium.getMinutesSinceMidnight()-m;}};Liftium.getNextTag=function(slotname){if(Liftium.e(Liftium.chain[slotname])){if(Liftium.buildChain(slotname)===false){Liftium.reportError("Error building chain "+slotname,"chain");return false;}}
Liftium.slotHops[slotname]=Liftium.slotHops[slotname]||0;Liftium.slotHops[slotname]++;if(Liftium.slotHops[slotname]>10){Liftium.reportError("Maximum number of hops exceeded: 10","chain");return false;}
var now=new Date();var length=Liftium.chain[slotname].length;var current=Liftium.currents[slotname]||0;var diff=now.getTime()-Liftium.slotTimer[slotname];if(diff>Liftium.maxHopTime){Liftium.d("Liftium.maxHopTime="+Liftium.maxHopTime,5);Liftium.d("Hop Time of "+Liftium.maxHopTime+" exceeded, it's "+diff+" now. Using the always_fill for "+slotname,2);WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"error","timeout","loc",slotname]),'liftium.errors');var sec=diff/1000;WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"error","timeout","sec",sec.toFixed(1)]),'liftium.errors');WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"error","timeout","tag",Liftium.chain[slotname][current].tag_id]),'liftium.errors');Liftium.slotTimeouts++;var lastOne=length-1;Liftium.currents[slotname]=lastOne;Liftium.chain[slotname][lastOne].started=now.getTime();return Liftium.chain[slotname][lastOne];}else{for(var i=current,l=length;i<l;i++){if(!Liftium.e(Liftium.chain[slotname][i].started)){continue;}else{Liftium.chain[slotname][i].started=now.getTime();Liftium.currents[slotname]=i;return Liftium.chain[slotname][i];}}}
Liftium.reportError("No more tags left in the chain - "+slotname+" Last ad in the chain marked as always fill but actually hopped? :"+Liftium.print_r(Liftium.chain[slotname][Liftium.chain[slotname].length-1]),"chain");WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"error","last_hopped",slotname]),'liftium.errors');return Liftium.fillerAd(slotname,"No more tags left in the chain");};Liftium.getPagesSinceSearch=function(){var kwords=Liftium.getReferringKeywords();if(Liftium.e(kwords)){return null;}
var pagesSince=Liftium.cookie("Lps");if(Liftium.e(pagesSince)){pagesSince=1;}else{pagesSince++;}
Liftium.cookie("Lps",pagesSince);return null;};Liftium.getPropertyCount=function(obj){try{if(typeof obj!="object"){return 0;}
var c=0;for(var property in obj){if(obj.hasOwnProperty(property)){c++;}}
return c;}catch(e){return 0;}};Liftium.getReferrer=function(){return LiftiumOptions.referrer||document.referrer;};Liftium.getReferringKeywords=function(){var l=Liftium.getReferrer(),kwords;var qstring=l.match(/\?(.*)$/);if(Liftium.e(qstring)){qstring=[];}else{qstring=qstring[1];}
var varNames=["q","p","query"];for(var i=0;i<varNames.length;i++){kwords=Liftium.getRequestVal(varNames[i],'',qstring);if(!Liftium.e(kwords)){break;}}
var kwordsCookie=Liftium.cookie("Lrk");if(!Liftium.e(kwords)){Liftium.cookie("Lrk",kwords);return kwords;}else if(!Liftium.e(kwordsCookie)){return kwordsCookie;}else{return null;}};Liftium.getRequestVal=function(varName,defaultVal,qstring){var nvpairs=Liftium.parseQueryString(qstring||document.location.search);if(typeof nvpairs[varName]!="undefined"){return nvpairs[varName];}else if(typeof defaultVal!="undefined"){return defaultVal;}else{return'';}};Liftium.getSampledAd=function(size){var sArray=[],total=0,myRandom=Math.random()*100;for(var i=0,l=Liftium.config.sizes[size].length;i<l;i++){var sample_rate=parseFloat(Liftium.config.sizes[size][i].sample_rate);if(Liftium.e(sample_rate)){continue;}
total+=sample_rate;Liftium.d("Sample Rate for "+Liftium.config.sizes[size][i].tag_id+" is "+sample_rate,7);sArray.push({"upper_bound":total,"index":i});}
Liftium.d("Sample Array = ",7,sArray);for(var j=0,l2=sArray.length;j<l2;j++){if(myRandom<sArray[j].upper_bound){var f=sArray[j].index;return Liftium.clone(Liftium.config.sizes[size][f]);}}
return false;};Liftium.getSlotnameFromElement=function(element){if(typeof element!="object"){return false;}
var tempElement=element,tries=0;while(tempElement&&tries<10){if(tempElement.id&&tempElement.id.match(/^Liftium_/)){return tempElement.id;}else{tempElement=tempElement.parentNode;}
tries++;}
return false;};Liftium.getStatRegExp=function(tag_id){return new RegExp(Liftium.now.getDay()+'_'+tag_id+'l([0-9]+)r*([0-9]*)m*([0-9]*)');};Liftium.getSizeForSlotname=function(slotname){var match=slotname.match(/[0-9]{1,3}x[0-9]{1,3}/);if(match!==null){return match[0];}
for(var slot in Liftium.config.slotnames){if(typeof Liftium.config.slotnames[slot]=="function"){continue;}
if(slot==slotname){return Liftium.config.slotnames[slot];}}
return false;};Liftium.getTagStat=function(tag_id,type){var stat=null;if(Liftium.e(Liftium.tagStats)){Liftium.tagStats=Liftium.getRequestVal("liftium_tag_stats",null)||Liftium.cookie("LTS")||"";}
var statMatch=Liftium.tagStats.match(Liftium.getStatRegExp(tag_id));if(!Liftium.e(statMatch)){var len=statMatch.length;if(type==="l"&&len>=2){stat=statMatch[1];}else if(type==="r"&&len>=3){stat=statMatch[2];}else if(type==="m"&&len>=4){stat=statMatch[3];}else if(type==="a"){var l=parseInt(statMatch[1],0)||0;var r=parseInt(statMatch[2],0)||0;stat=l+r;}}
if(Liftium.e(stat)){if(type=="m"){stat=null;}else{stat=0;}}else{stat=parseInt(stat,10);}
Liftium.d("Stats for "+tag_id+" type "+type+" = "+stat,9);return stat;};Liftium.getUniqueSlotname=function(sizeOrSlot){Liftium.slotnames=Liftium.slotnames||[];var s="Liftium_"+sizeOrSlot+'_'+Liftium.slotnames.length;Liftium.slotnames.push(s);return s;};Liftium.handleNetworkOptions=function(tag){switch(tag.network_id){case"1":for(var opt in LiftiumOptions){if(opt.match(/^google_/)){Liftium.d(opt+" set to "+LiftiumOptions[opt],5);window[opt]=LiftiumOptions[opt];}}
return true;default:return true;}};Liftium.hop=function(slotname){if(Liftium.e(slotname)){slotname=Liftium.lastSlot;}
Liftium.d("Liftium.hop() called for "+slotname);Liftium.markLastAdAsRejected(slotname);return Liftium._callAd(slotname);};var LiftiumHop=Liftium.hop;Liftium.iframeHop=function(iframeUrl){Liftium.d("Liftium.iframeHop() called from "+iframeUrl,3);if(Liftium.in_array(iframeUrl,Liftium.hopRegister)){Liftium.d("Hop from "+iframeUrl+" already registered. Bailing out.",1);WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"error","last_hopped_2"]),'liftium.errors');Liftium.reportError("Hop from "+iframeUrl+" already registered.");return;}
Liftium.hopRegister.push(iframeUrl);var slotname;var iframes=document.getElementsByTagName("iframe"),found=false,srcs=[];Liftium.d("iframes:",5,iframes);for(var i=0,len=iframes.length;i<len;i++){var id=Math.random();if(!iframes[i].id){iframes[i].id=id;}else{id=iframes[i].id;}
var myframe=Liftium._(id);if(Liftium.e(myframe.src)){Liftium.d("myframe.src for #"+i+" ("+id+") is empty, skipping",7);continue;}
if(iframeUrl.indexOf(myframe.src)>=0){found=true;Liftium.d("found iframe match, #"+i+" ("+id+")",5);slotname=Liftium.getContainingDivId(myframe);Liftium.debug("Slotname from containing div is "+slotname,3);if(Liftium.e(slotname)){Liftium.reportError("Unable to determine slotname from iframe "+iframeUrl);return;}
break;}
srcs.push(myframe.src);}
if(!found){Liftium.reportError("Unable to find iframe for "+iframeUrl+"in : "+srcs.join(", "));return;}
Liftium.d("slotname is "+slotname+" in iframeHop",3);Liftium.markLastAdAsRejected(slotname);Liftium._callAd(slotname,true);};Liftium.iframeContents=function(iframe,html){if(typeof iframe!="object"){return false;}
if(!iframe.doc){if(iframe.contentDocument){iframe.doc=iframe.contentDocument;}else if(iframe.contentWindow){iframe.doc=iframe.contentWindow.document;}else if(iframe.document){iframe.doc=iframe.document;}
iframe.doc.open();iframe.doc.close();}
if(typeof html!="undefined"){iframe.doc.body.style.backgroundColor="blue";var div=iframe.doc.createElement("div");div.id="div42";div.innerHTML=html;iframe.doc.body.appendChild(div);return true;}else{return iframe.doc.getElementById("div42").innerHTML;}};Liftium.in_array=function(needle,haystack,ignoreCase){for(var key in haystack){if(haystack[key]==needle){return true;}else if(ignoreCase&&haystack[key].toString().toLowerCase()==needle.toString().toLowerCase()){return true;}}
return false;};Liftium.init=function(){if(Liftium.e(LiftiumOptions.pubid)){return false;}
Liftium.pullGeo();Liftium.pullConfig();Liftium.addEventListener(window,"load",Liftium.onLoadHandler);if(LiftiumOptions.enableXDM!==false){XDM.listenForMessages(Liftium.crossDomainMessage);}
if(BrowserDetect.browser=="Opera"){Liftium.iframeOnload=function(e){var iframe=e.target||e;try{if(typeof iframe.readyState=="undefined"){iframe.readyState="complete";}}catch(err){}};Liftium.addEventListener(window,"DOMFrameContentLoaded",Liftium.iframeOnload);}
if(Liftium.getRequestVal('liftium_exclude_tag')){LiftiumOptions.exclude_tags=[Liftium.getRequestVal('liftium_exclude_tag')];}
WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"init"]),'liftium.init');Liftium.trackQcseg();return true;};Liftium.iframesLoaded=function(){if(Liftium.isCalledAfterOnload&&Liftium.hasMoreCalls){return false;}
var iframes=document.getElementsByTagName("iframe");var l=iframes.length;if(l===0){return true;}
var b=BrowserDetect.browser;if(Liftium.in_array(b,["Firefox","Gecko","Mozilla"])&&!Liftium.isCalledAfterOnload&&Liftium.pageLoaded){return true;}else if(Liftium.in_array(b,["Explorer","Opera"])&&document.readyState=="complete"){for(var i=0;i<l;i++){if(iframes[i].document.readyState!="complete"){return false;}}
if(Liftium.loadDelay<200){return false;}else{return true;}}else{if(Liftium.loadDelay<1000*Liftium.slotnames.length){return false;}else{return true;}}};Liftium.isValidBrowser=function(browser){var obv=BrowserDetect.OS+" "+BrowserDetect.browser+" "+BrowserDetect.version;var reg=new RegExp(browser,"i");if(obv.match(reg)){return true;}else{return false;}};Liftium.isNetworkInChain=function(network_name,slotname){var found=false;for(var k=0;k<Liftium.chain[slotname].length;k++){if(Liftium.chain[slotname][k].network_name==network_name){found=true;break;}}
return found;};Liftium.isValidCountry=function(countryList){var ac=Liftium.getCountry();Liftium.d("Checking if '"+ac+"' is in:",8,countryList);if(Liftium.in_array("row",countryList,true)&&!AdConfig.isHighValueCountry(ac)){Liftium.d("ROW targetted, and country not high-value",8);return true;}
if(Liftium.in_array(ac,countryList,true)){return true;}
return false;};Liftium.isValidCriteria=function(t,slotname){var rejmsg="Ad #"+t.tag_id+" from "+t.network_name+" invalid for "+slotname+": ";if(!Liftium.e(t.inChain)&&!Liftium.e(t.freq_cap)){Liftium.d(rejmsg+"it has a freq cap and is already in another chain",3);return false;}
if(!Liftium.e(LiftiumOptions.exclude_tags)&&Liftium.in_array(t.tag_id,LiftiumOptions.exclude_tags)){Liftium.d(rejmsg+"in LiftiumOptions excluded tags list",2);return false;}
if(!Liftium.e(t.freq_cap)){var a=Liftium.getTagStat(t.tag_id,"a");if(a>=parseInt(t.freq_cap,10)){Liftium.d(rejmsg+a+"attempts is >= freq_cap of "+t.freq_cap,5);return false;}}
if(!Liftium.e(t.rej_time)){var elapsedMinutes=Liftium.getMinutesSinceReject(t.tag_id);if(elapsedMinutes!==null){Liftium.d(" rej_time = "+t.rej_time+" elapsed = "+elapsedMinutes,8);if(elapsedMinutes<parseInt(t.rej_time,10)){Liftium.d(rejmsg+"tag was rejected sooner than rej_time of "+t.rej_time,5);return false;}}}
if(!Liftium.e(t.criteria)){for(var key in t.criteria){switch(key){case'country':if(!Liftium.isValidCountry(t.criteria.country)){Liftium.d(rejmsg+"Invalid country",6);return false;}
break;case'browser':if(!Liftium.isValidBrowser(t.criteria.browser[0])){Liftium.d(rejmsg+"Invalid browser",6);return false;}
break;case'domain':LiftiumOptions.domain=LiftiumOptions.domain||document.domain;if(t.criteria.domain[0]!=LiftiumOptions.domain){Liftium.d(rejmsg+"Invalid domain",6);return false;}
break;case'placement':if(!Liftium.in_array(Liftium.slotPlacements[slotname],t.criteria.placement)){Liftium.d(rejmsg+"Invalid placement ("+Liftium.slotPlacements[slotname]+")",6,t.criteria.placement);return false;}
break;default:if(key.match(/^kv_/)){if(!Liftium.in_array(LiftiumOptions[key],t.criteria[key])){Liftium.d(rejmsg+"key value "+key+" does not match: "+t.criteria[key],6);return false;}}
break;}}}
if(!XDM.canPostMessage()&&Liftium.e(Liftium.config.xdm_iframe_path)&&t.tag.toString().match(/iframe/i)&&t.always_fill!=1){Liftium.reportError("Iframe called on HTML 4 browser for publisher without a xdm_iframe_path. tagid #"+t.tag_id,"tag");return false;}
if(!Liftium.e(t.pacing)&&!Liftium.isValidPacing(t)){Liftium.d(rejmsg+" - pacing criteria not met ("+t.pacing+")",5);return false;}
Liftium.d("Targeting criteria passed for tag #"+t.tag_id,6);return true;};Liftium.isValidPacing=function(tag){return(Math.random()*100)<tag.pacing;};Liftium.loadScript=function(url,noblock){if(typeof noblock=="undefined"){document.write('<scr'+'ipt type="text/javascript" src="'+url+'"><\/sc'+'ript>');return true;}else{var h=document.getElementsByTagName("head").item(0);var s=document.createElement("script");s.src=url;h.appendChild(s);return s;}};Liftium.markChain=function(slotname){Liftium.d("Marking chain for "+slotname,5);if(Liftium.e(Liftium.chain[slotname])){Liftium.debug("Skipping marking chain for "+slotname+", chain was empty");return false;}
for(var i=0,len=Liftium.chain[slotname].length;i<len;i++){if(i<Liftium.currents[slotname]&&Liftium.chain[slotname][i].started){Liftium.chain[slotname][i].rejected=true;}else if(i==Liftium.currents[slotname]){Liftium.chain[slotname][i].loaded=true;break;}}
return i;};Liftium.markLastAdAsRejected=function(slotname){var i=Liftium.currents[slotname];var tag_id=Liftium.chain[slotname][i].tag_id;Liftium.d("Marking last ad as rejected for "+slotname+" (#"+tag_id+")",3);if(typeof i=="undefined"){Liftium.d("No chain for "+slotname+" found. Bailing out.",1);WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"error","no_chain",slotname]),'liftium.errors');return;}
Liftium.chain[slotname][i].rejected=true;Liftium.setTagStat(tag_id,"r");var time=Liftium.debugTime()-Liftium.slotTimer2[slotname+"-"+tag_id];Liftium.d("slotTimer2 end for #"+tag_id+" in "+slotname+" after "+time+" ms",3);WikiaTracker.track([LiftiumOptions.pubid,"hop",tag_id,Liftium.formatTrackTime(time,5)],'liftium.hop');};Liftium.normalizeColor=function(input){input=input||"";if(input=="transparent"){return"";}else if(input.match(/^#[A-F0-9a-f]{6}/)){return input.toUpperCase().replace(/^#/,"");}else if(input.match(/^#[A-F0-9a-f]{3}$/)){var f=input.substring(1,1);var s=input.substring(2,1);var t=input.substring(3,1);var out=f+f+s+s+t+t;return out.toUpperCase();}else if(input.match(/^rgb/)){var str=input.replace(/[^0-9,]/g,'');var rgb=str.split(",");return Liftium.dec2hex(rgb[0])+
Liftium.dec2hex(rgb[1])+
Liftium.dec2hex(rgb[2]);}else{return input.replace(/"/g,"");}};Liftium.onLoadHandler=function(){Liftium.pageLoaded=true;if(Liftium.iframesLoaded()){Liftium.sendBeacon();}else if(Liftium.loadDelay<Liftium.maxLoadDelay){Liftium.loadDelay+=Liftium.loadDelay;window.setTimeout("Liftium.onLoadHandler()",Liftium.loadDelay);}else{Liftium.d("Gave up waiting for ads to load, sending beacon now");WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"error","gave_up_waiting_for_ads"]),'liftium.errors');Liftium.sendBeacon();}};Liftium.parseQueryString=function(qs){var ret=[];if(typeof qs!="string"||qs===""){return ret;}
if(qs.charAt(0)==='?'){qs=qs.substr(1);}
qs=qs.replace(/\;/g,'&',qs);qs=qs.replace(/\+/g,'%20',qs);var nvpairs=qs.split('&');for(var i=0,intIndex;i<nvpairs.length;i++){if(nvpairs[i].length===0){continue;}
var varName='',varValue='';if((intIndex=nvpairs[i].indexOf('='))!=-1){varName=decodeURIComponent(nvpairs[i].substr(0,intIndex));varValue=decodeURIComponent(nvpairs[i].substr(intIndex+1));}else{varName=nvpairs[i];varValue=true;}
ret[varName]=varValue;}
return ret;};Liftium.pullConfig=function(){if(Liftium.config){return;}
var p={"pubid":LiftiumOptions.pubid,"v":1.2,"country":Liftium.getCountry()};if(!Liftium.e(LiftiumOptions.config_delay)){p.config_delay=LiftiumOptions.config_delay;p.cb=Math.random();}
if(window.location.hostname.indexOf(".dev.liftium.com")>-1){Liftium.baseUrl='/';}
var u=Liftium.baseUrl+'config?'+Liftium.buildQueryString(p);Liftium.d("Loading config from "+u,2);Liftium.loadScript(u);};Liftium.pullGeo=function(){if(Liftium.geo){return;}
Liftium.d("Loading geo data from cookie",3);var cookie=decodeURIComponent(Liftium.cookie("Geo"));if(!Liftium.e(cookie)){Liftium.geo=eval("("+cookie+")");Liftium.d("Geo data loaded:",7,Liftium.geo);return;}
Liftium.d("Loading geo data from "+Liftium.geoUrl,3);Liftium.loadScript(Liftium.geoUrl);};Liftium.print_r=function(data,level){if(data===null){return"*null*";}
level=level||0;if(level>6){return false;}
var padding='';for(var j=1;j<level+1;j++){padding+=" ";}
switch(typeof data){case"string":return data===""?"*empty string*":data;case"undefined":return"*undefined*";case"boolean":return data===true?"*boolean true*":"*boolean false*";case"function":return"*function*";case"object":var out=[];for(var item in data){if(typeof data[item]=='object'){out.push(padding+"'"+item+"' ..."+"\n");out.push(Liftium.print_r(data[item],level+1));}else{out.push(padding+"'"+item+"' => \""+
Liftium.print_r(data[item])+"\"\n");}}
if(Liftium.e(out)){return"*empty object*";}else{return out.join("");}
default:return data.toString();}};Liftium.recordEvents=function(slotname){var e='';for(var i=0,l=Liftium.chain[slotname].length;i<l;i++){var t=Liftium.chain[slotname][i];if(Liftium.e(t.started)){continue;}
var loads=Liftium.getTagStat(t.tag_id,"l");if(!Liftium.e(Liftium.chain[slotname][i].loaded)){Liftium.d("Recording Load for "+t.network_name+", #"+t.tag_id+" in "+slotname,4);Liftium.setTagStat(t.tag_id,"l");e+=',l'+t.tag_id+'pl'+loads;}else if(!Liftium.e(t.rejected)){e+=',r'+t.tag_id+'pl'+loads;Liftium.d("Recording Reject for "+t.network_name+", #"+t.tag_id+" in "+slotname,5);continue;}}
return e.replace(/^,/,'');};Liftium.reportError=function(msg,type){try{Liftium.d("Liftium ERROR: "+msg);if(Liftium.getBrowserLang()!="en"){}
if(typeof Liftium.errorCount!="undefined"){Liftium.errorCount++;}else{Liftium.errorCount=1;}
if(Liftium.errorCount>5){return;}
var ignores=["Error loading script","Script error.","GA_googleFillSlot is not defined","translate.google","COMSCORE","quantserve","urchin","greasemonkey","Permission denied","Unexpected token ILLEGAL","Access is denied"];for(var i=0;i<ignores.length;i++){if(msg.indexOf(ignores[i])>=0){return;}}
if(type=='onerror'){WikiaTracker.track(null,'main.sampled',['Error','JS',msg]);}else{var p={'msg':msg,'type':type||"general",'pubid':LiftiumOptions.pubid,'lang':"en"};if(type=="tag"){p.tag_id=Liftium.lastTag.tag_id;}
Liftium.beaconCall(Liftium.baseUrl+"error?"+Liftium.buildQueryString(p));}}catch(e){Liftium.d("Yikes. Liftium.reportError has an error");}};Liftium.errorMessage=function(e){if(typeof e=="object"){return Liftium.print_r(e);}else{return e;}};Liftium.sendBeacon=function(){if(!Liftium.e(Liftium.beacon)){return true;}
var throttle;if(Liftium.e(Liftium.config)||throttle===undefined||throttle===null){Liftium.d("No throttle defined, using 1.0");throttle=1.0;}else{throttle=Liftium.config.throttle;}
if(Math.random()>throttle){Liftium.d("Beacon throttled at "+throttle);return true;}
var events='',numSlots=0;for(var slotname in Liftium.chain){if(typeof Liftium.chain[slotname]=="function"){continue;}
numSlots++;Liftium.markChain(slotname);events+=','+Liftium.recordEvents(slotname);}
events=events.replace(/^,/,'');Liftium.storeTagStats();var b={};b.numSlots=numSlots;b.events=events;b.country=Liftium.getCountry();if(Liftium.slotTimeouts>0){b.slotTimeouts=Liftium.slotTimeouts;}
Liftium.d("Beacon: ",7,b);var p;if(!window.JSON){p={"events":b.events};}else{p={"beacon":window.JSON.stringify(b)};}
Liftium.beacon=p;Liftium.beaconCall(Liftium.baseUrl+'beacon?'+Liftium.buildQueryString(p));Liftium.d("Liftium done, beacon sent");WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"beacon"]),'liftium.beacon');if(window.LiftiumTest&&typeof window.LiftiumTest.afterBeacon=="function"){window.LiftiumTest.afterBeacon();}
return true;};Liftium.setAdjustedValues=function(tags){var attempts,reducer=0.05,avalue;for(var i=0;i<tags.length;i++){if(tags[i].adjusted_value){continue;}
avalue=tags[i].value;if(tags[i].pay_type=="CPC"){reducer+=0.20;}
if(parseFloat(tags[i].floor,10)){avalue=avalue*1.01;}
if(tags[i].pay_type=="CPC"&&!Liftium.e(Liftium.getReferringKeywords())){avalue=avalue*1.25;reducer=0;}
attempts=Liftium.getTagStat(tags[i].tag_id,"a");for(var j=0;j<attempts;j++){avalue=avalue-(avalue*reducer);}
if(avalue<tags[i].value*0.15){tags[i].adjusted_value=tags[i].value*0.15;}else{tags[i].adjusted_value=avalue;}}
return tags;};Liftium.setPageVar=function(name,value){LiftiumOptions['kv_'+name]=value;};Liftium.setTagStat=function(tag_id,type){Liftium.d("Setting a "+type+" stat for "+tag_id,6);var pieces=Liftium.tagStats.split(','),holder=[];if(pieces.length>Liftium.statMax){pieces.shift();}
var loads=Liftium.getTagStat(tag_id,"l");var rejects=Liftium.getTagStat(tag_id,"r");var rejectMinutes=0;if(type==="l"){loads++;rejectMinutes=Liftium.getTagStat(tag_id,"m")||0;}else if(type==="r"){rejects++;rejectMinutes=Liftium.getMinutesSinceMidnight();}
var piece=Liftium.now.getDay()+'_'+tag_id+"l"+loads;if(rejects>0){piece=piece+"r"+rejects;piece=piece+"m"+rejectMinutes;}
var ts=Liftium.tagStats.replace(Liftium.getStatRegExp(tag_id),piece);if(ts===Liftium.tagStats){Liftium.tagStats=Liftium.tagStats+','+piece;}else{Liftium.tagStats=ts;}
Liftium.tagStats=Liftium.tagStats.replace(/^,/,'');Liftium.d("Tag Stats After Set = "+Liftium.tagStats,6);Liftium.storeTagStats();};Liftium.storeTagStats=function(){Liftium.d("Stored Tag Stats = "+Liftium.tagStats,6);Liftium.cookie("LTS",Liftium.tagStats,{domain:Liftium.getCookieDomain(),path:"/",expires:86400*1000});};Liftium.trackEvent=function(page,profile){if(typeof page=="object"){page=page.join("/");}
Liftium.d("Track event: "+page,1);var n=window.navigator;Liftium.sessionid=Liftium.sessionid||Math.round(Math.random()*2147483647);page='/'+LiftiumOptions.pubid+'/'+page;var c="__utma="+Liftium.cookie("__utma")+';+__utmz='+Liftium.cookie("__utmz")+';';var p={utmwv:"4.6.5",utmn:Math.round(Math.random()*2147483647),utmhn:"liftium.wikia.com",utmcs:"UTF-8",utmsr:"1024x768",utmsc:"24-bit",utmul:(n.language||n.systemLanguage||n.browserLanguage||n.userLanguage||"").toLowerCase(),utmje:"1",utmfl:"10.0 r32",utmdt:document.title,utmhid:Liftium.sessionid,utmr:"0",utmp:page,utmcc:c};if(typeof profile!="undefined"){p.utmac=profile;Liftium.d("Tracking is using custom profile: "+profile,7);}else{p.utmac="UA-17475676-10";}
var url="https:"==window.location.protocol?"https://ssl.":"http://www.";url+="google-analytics.com/__utm.gif?"+Liftium.buildQueryString(p);Liftium.beaconCall(url,false);};Liftium.buildTrackUrl=function(data){return data.join("/")+"/"+
[Liftium.getPageVar("Hub","unknown"),Liftium.langForTracking(Liftium.getPageVar("cont_lang","unknown")),Liftium.dbnameForTracking(Liftium.getPageVar("wgDBname","unknown")),Liftium.geoForTracking(Liftium.getCountry())].join("/");};Liftium.langForTracking=function(lang){if(!Liftium.in_array(lang,["en","es","de","fr"])){Liftium.d("Wiki lang "+lang+" changed to 'other' for tracking",7);lang="other";}
return lang;};Liftium.dbnameForTracking=function(dbname){if(wgWikiFactoryTagIds!="undefined"&&!Liftium.e(wgWikiFactoryTagIds)&&wgWikiFactoryTagIds.length>4){return dbname;}
Liftium.d("Wiki dbname "+dbname+" changed to 'other' for tracking",7);return"other";};Liftium.geoForTracking=function(country){if(!Liftium.in_array(country,["unknown","us","uk","ca"])){Liftium.d("Country "+country+" changed to 'other' for tracking",7);country="other";}
return country;};Liftium.trackQcseg=function(){c=Liftium.cookie("qcseg");Liftium.d("Quantcast cookie: "+c,5);if(Liftium.e(c)){return;}
if((c.search(/"[DT]"/)!=-1)&&(c.search(/"[0-9]{4}"/)==-1)){return;}
try{qcseg=eval("("+c+")");Liftium.d("Quantcast cookie parsed:",7,qcseg);if(Liftium.e(qcseg.segments)){return;}
var empty=true;for(var i in qcseg.segments){if(typeof qcseg.segments[i]!="object")continue;if(Liftium.e(qcseg.segments[i])){continue;}
if(Liftium.e(qcseg.segments[i].id)){WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"quantcast","segments","broken",c]),'liftium.errors');continue;}
Liftium.d("Quantcast segment: "+qcseg.segments[i].id,5);WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"quantcast","segments",qcseg.segments[i].id]),'liftium.quantcast');empty=false;}
if(empty){return;}}catch(e){Liftium.d("Quantcast cookie parse error:",7,e);WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"quantcast","broken"]),'liftium.errors');return;}};Liftium.throwError=function(){return window.LiftiumthrowError.UndefinedVar;};var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"";this.OS=this.searchString(this.dataOS)||"";},searchString:function(data){for(var i=0,l=data.length;i<l;i++){var dataString=data[i].string;var dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!=-1){return data[i].identity;}}else if(dataProp){return data[i].identity;}}
return null;},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index==-1){return null;}
return parseFloat(dataString.substring(index+this.versionSearchString.length+1));},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();Liftium.loadInspector=function(){var d=Liftium._("LiftiumInspectorScript");if(Liftium.e(d)){var s=Liftium.loadScript(Liftium.baseUrl+"js/Inspector.js?r="+Math.random().toString().substring(2,8),true);s.id="LiftiumInspectorScript";}};var XDM={allowedMethods:[],debugOn:false,iframeUrl:"/liftium_iframe.html",postMessageEnabled:true};XDM.send=function(destWin,method,args){XDM.debug("XDM.send called from "+document.location.hostname);if(typeof method!="string"){XDM.debug("Bad argument for XDM.send, 'method' is not a string, ("+typeof method+")");return false;}
if(typeof args=="undefined"){args=[];}
if(XDM.canPostMessage()){return XDM._postMessage(destWin,method,args);}else{return XDM._postMessageWithIframe(destWin,method,args);}};XDM.getDestinationDomain=function(destWin){if(destWin==top){if(document.referrer.toString()!==''){var m=document.referrer.toString().match(/https*:\/\/([^\/]+)/);XDM.debug("Hostname for destWin set to "+m[1]+" using referrer");return m[1];}else{return false;}}else{return destWin.location.hostname;}};XDM._postMessage=function(destWin,method,args){XDM.debug("Sending message using postMessage()");var d=XDM.getDestinationDomain(destWin),targetOrigin;if(d===false){targetOrigin='*';}else{targetOrigin='http://'+d;}
var msg=XDM.serializeMessage(method,args);if(destWin.postMessage){return destWin.postMessage(msg,targetOrigin);}else if(destWin.document.postMessage){return destWin.document.postMessage(msg,targetOrigin);}else{throw("No supported way of using postMessage");}};XDM._postMessageWithIframe=function(destWin,method,args){XDM.debug("Sending message using iframe");if(XDM.iframeUrl===null){XDM.debug("Iframe method called, but no html file is specified");return false;}
var d=XDM.getDestinationDomain(destWin),targetOrigin;if(d===false){return false;}else{targetOrigin='http://'+d;}
var iframeUrl=targetOrigin+XDM.iframeUrl+'?'+XDM.serializeMessage(method,args);XDM.debug("Calling iframe dispatch url: "+iframeUrl);if(typeof XDM.iframe=="undefined"){XDM.iframe=document.createElement("iframe");XDM.iframe.style.display="none";XDM.iframe.width=0;XDM.iframe.height=0;if(document.body===null){document.firstChild.appendChild(document.createElement("body"));}
document.body.appendChild(XDM.iframe);}
XDM.iframe.src=iframeUrl;return false;};XDM.serializeMessage=function(method,args){var out='method='+escape(method.toString());var x;for(var i=0;i<args.length;i++){x=i+1;out+=';arg'+x+'='+escape(args[i]);}
XDM.debug("Serialized message: "+out);return out;};XDM.canPostMessage=function(){if(XDM.postMessageEnabled===false){return false;}else if(window.postMessage||window.document.postMessage){return true;}else{return false;}};XDM.debug=function(msg){if(XDM.debugOn&&typeof console!="undefined"&&typeof console.log!="undefined"){console.log("XDM debug: "+msg);}};XDM.listenForMessages=function(handler){if(XDM.canPostMessage()){if(window.addEventListener){return window.addEventListener("message",handler,false);}else if(window.attachEvent){return window.attachEvent("onmessage",handler);}else{return false;}}else{return true;}};XDM.isAllowedMethod=function(method){if(typeof method=="undefined"){return false;}
var found=false;for(var i=0;i<XDM.allowedMethods.length;i++){if(method.toString()===XDM.allowedMethods[i]){found=true;break;}}
return found;};XDM.executeMessage=function(serializedMessage){var nvpairs=XDM.parseQueryString(serializedMessage);if(XDM.isAllowedMethod(nvpairs["method"])){var functionArgs=[],code=nvpairs["method"];for(var prop in nvpairs){if(prop.substring(0,3)=="arg"){functionArgs.push(nvpairs[prop].replace(/"/g,'\\"'));}}
if(functionArgs.length>0){code+='("'+functionArgs.join('","')+'");';}else{code+="();";}
if(top!=self){nvpairs.destWin=nvpairs.destWin||"top";code=nvpairs.destWin+"."+code;}
XDM.debug("Evaluating "+code);return eval(code);}else{XDM.debug("Invalid method from XDM: "+nvpairs["method"]);return false;}};XDM.parseQueryString=function(qs){var ret=[];if(typeof qs!="string"){return ret;}
if(qs.charAt(0)==='?'){qs=qs.substr(1);}
qs=qs.replace(/\;/g,'&',qs);var nvpairs=qs.split('&');for(var i=0,intIndex;i<nvpairs.length;i++){if(nvpairs[i].length===0){continue;}
var varName='',varValue='';if((intIndex=nvpairs[i].indexOf('='))!=-1){varName=decodeURIComponent(nvpairs[i].substr(0,intIndex));varValue=decodeURIComponent(nvpairs[i].substr(intIndex+1));}else{varName=nvpairs[i];varValue=true;}
ret[varName]=varValue;}
return ret;};Liftium.now=new Date();if(typeof wgNow!="undefined"){Liftium.now=wgNow;Liftium.d("Using monaco time:",7,wgNow);}
Liftium.startTime=Liftium.now.getTime();Liftium.debugLevel=Liftium.getRequestVal('liftium_debug',0)||Liftium.cookie("liftium_debug");Liftium.maxHopTime=Liftium.getRequestVal('liftium_timeout',0)||Liftium.cookie("liftium_timeout")||1800000;LiftiumOptions.error_beacon=!Liftium.debugLevel&&!Liftium.getRequestVal('liftium_onerror',0)&&!Liftium.cookie("liftium_onerror");if(LiftiumOptions.error_beacon!==false){window.onerror=Liftium.catchError;}}
if(Liftium.empty(LiftiumOptions.offline)&&LiftiumOptions.autoInit!==false){Liftium.init();}
if(LiftiumOptions.callAd){Liftium.callAd(LiftiumOptions.callAd);};var Liftium=window.Liftium;try{var wgIsMainpage=window.wgIsMainpage||top.wgIsMainpage||false;}catch(e){}
var LiftiumDART={random:Math.round(Math.random()*23456787654),sites:{'Auto':'wka.auto','Creative':'wka.crea','Education':'wka.edu','Entertainment':'wka.ent','Finance':'wka.fin','Gaming':'wka.gaming','Green':'wka.green','Humor':'wka.humor','Lifestyle':'wka.life','Music':'wka.music','Philosophy':'wka.phil','Politics':'wka.poli','Science':'wka.sci','Sports':'wka.sports','Technology':'wka.tech','Test Site':'wka.test','Toys':'wka.toys','Travel':'wka.travel'},slotconfig:{'TOP_RIGHT_BOXAD':{'tile':1,'loc':"top"},'TOP_LEADERBOARD':{'tile':2,'loc':"top",'dcopt':"ist"},'DOCKED_LEADERBOARD':{'tile':8,'loc':"bottom"},'LEFT_SKYSCRAPER_1':{'tile':3,'loc':"top"},'LEFT_SKYSCRAPER_2':{'tile':3,'loc':"middle"},'LEFT_SKYSCRAPER_3':{'tile':6,'loc':"middle"},'FOOTER_BOXAD':{'tile':5,'loc':"footer"},'PREFOOTER_LEFT_BOXAD':{'tile':5,'loc':"footer"},'PREFOOTER_RIGHT_BOXAD':{'tile':5,'loc':"footer"},'PREFOOTER_BIG':{'tile':5,'loc':"footer"},'HOME_TOP_RIGHT_BOXAD':{'tile':1,'loc':"top"},'HOME_TOP_LEADERBOARD':{'tile':2,'loc':"top",'dcopt':"ist"},'HOME_LEFT_SKYSCRAPER_1':{'tile':3,'loc':"top"},'HOME_LEFT_SKYSCRAPER_2':{'tile':3,'loc':"middle"},'INCONTENT_BOXAD_1':{'tile':4,'loc':"middle"},'INCONTENT_BOXAD_2':{'tile':5,'loc':"middle"},'INCONTENT_BOXAD_3':{'tile':6,'loc':"middle"},'INCONTENT_BOXAD_4':{'tile':7,'loc':"middle"},'INCONTENT_BOXAD_5':{'tile':8,'loc':"middle"},'INCONTENT_LEADERBOARD_1':{'tile':4,'loc':"middle"},'INCONTENT_LEADERBOARD_2':{'tile':5,'loc':"middle"},'INCONTENT_LEADERBOARD_3':{'tile':6,'loc':"middle"},'INCONTENT_LEADERBOARD_4':{'tile':7,'loc':"middle"},'INCONTENT_LEADERBOARD_5':{'tile':8,'loc':"middle"},'EXIT_STITIAL_INVISIBLE':{'tile':1,'loc':"exit",'dcopt':"ist"},'EXIT_STITIAL_BOXAD_1':{'tile':2,'loc':"exit"},'EXIT_STITIAL_BOXAD_2':{'tile':3,'loc':"exit"},'INVISIBLE_1':{'tile':10,'loc':"invisible"},'INVISIBLE_2':{'tile':11,'loc':"invisible"},'HOME_INVISIBLE_TOP':{'tile':12,'loc':"invisible"},'INVISIBLE_TOP':{'tile':13,'loc':"invisible"},'TEST_TOP_RIGHT_BOXAD':{'tile':1,'loc':"top"},'TEST_HOME_TOP_RIGHT_BOXAD':{'tile':1,'loc':"top"}},sizeconfig:{'300x250':'300x250','600x250':'600x250,300x250','728x90':'728x90,468x60','160x600':'160x600,120x600','0x0':'1x1','300x53':'300x53'}};LiftiumDART.callAd=function(slotname,size,network_options){if(Liftium.e(LiftiumDART.slotconfig[slotname])){Liftium.d("Notice: LiftiumDART not configured for "+slotname);}
var url=LiftiumDART.getUrl(slotname,size,network_options,false);return'<scr'+'ipt type="text/javascript" src="'+url+'"><\/sc'+'ript>';};LiftiumDART.getUrl=function(slotname,size,network_options,iframe){var url2=AdConfig.DART.getUrl(slotname,size,true,'Liftium');var sz=url2.match(/;sz=[0-9x,]+;/);if(sz!=null){var sz2=sz[0].match(/[0-9]+x[0-9]+/);url2=url2.replace(/;sz=[0-9x,]+;/,';sz='+sz2[0]+';');}
Liftium.d("Dart URL2= "+url2,4);return url2;};LiftiumDART.getSubdomain=function(){var subdomain='ad';if(!Liftium.e(Liftium.geo.continent)){switch(Liftium.geo.continent){case'AF':case'EU':subdomain='ad-emea';break;case'AS':Liftium.d('country: '+Liftium.getCountry().toUpperCase(),4);switch(Liftium.getCountry().toUpperCase()){case'AE':case'CY':case'BH':case'IL':case'IQ':case'IR':case'JO':case'KW':case'LB':case'OM':case'PS':case'QA':case'SA':case'SY':case'TR':case'YE':subdomain='ad-emea';break;default:subdomain='ad-apac';}
break;case'OC':subdomain='ad-apac';break;case'NA':case'SA':default:subdomain='ad';}}
return subdomain;}
LiftiumDART.getAdType=function(iframe){if(iframe){return'adi';}else{return'adj';}};LiftiumDART.getDARTSite=function(hub){if(typeof LiftiumDART.sites[hub]!="undefined"){return LiftiumDART.sites[hub];}else{return'wka.wikia';}};LiftiumDART.getZone1=function(dbname){if(Liftium.e(dbname)){return'_wikia';}else{return'_'+dbname.replace('/[^0-9A-Z_a-z]/','_');}};LiftiumDART.getZone2=function(){if(!Liftium.e(Liftium.getPageVar('page_type'))){return Liftium.getPageVar('page_type');}else{return'article';}};LiftiumDART.getTileKV=function(slotname){if(!Liftium.e(LiftiumDART.slotconfig[slotname])&&LiftiumDART.slotconfig[slotname].tile){return'tile='+LiftiumDART.slotconfig[slotname].tile+';';}else{return'';}};LiftiumDART.getDcoptKV=function(slotname){if(!Liftium.e(LiftiumDART.slotconfig[slotname])&&LiftiumDART.slotconfig[slotname].dcopt){return'dcopt='+LiftiumDART.slotconfig[slotname].dcopt+';';}else{return'';}};LiftiumDART.getLocKv=function(slotname){if(!Liftium.e(LiftiumDART.slotconfig[slotname])&&LiftiumDART.slotconfig[slotname].loc){return'loc='+LiftiumDART.slotconfig[slotname].loc+';';}else{return'';}};LiftiumDART.getArticleKV=function(){if(!Liftium.e(Liftium.getPageVar('article_id'))){return"artid="+Liftium.getPageVar('article_id')+';';}else{return'';}};LiftiumDART.getTitle=function(){if(!Liftium.e(wgPageName)){return"wpage="+wgPageName+";";}else{return"";}};LiftiumDART.getDomainKV=function(hostname){var lhost,pieces,sld='',np;lhost=hostname.toLowerCase();pieces=lhost.split(".");np=pieces.length;if(pieces[np-2]=='co'){sld=pieces[np-3]+'.'+pieces[np-2]+'.'+pieces[np-1];}else{sld=pieces[np-2]+'.'+pieces[np-1];}
if(sld!==''){return'dmn='+sld.replace(/\./g,'')+';';}else{return'';}};LiftiumDART.getImpressionCount=function(slotname){var adDriverNumAllCallStorageName='adDriverNumAllCall';var storage='';var cookieStorage='';if(Liftium.e(Liftium.adDriverNumCall)){if(window.wgAdDriverUseExpiryStorage){Liftium.d('Loading AdDriver data from expiry storage');storage=$.expiryStorage.get(adDriverNumAllCallStorageName);}
if(window.wgAdDriverUseCookie){Liftium.d('Loading AdDriver data from cookie');cookieStorage=Liftium.cookie('adDriverNumAllCall');if(Liftium.e(window.wgAdDriverUseExpiryStorage)){storage=cookieStorage;}}
if(!Liftium.e(storage)){try{Liftium.adDriverNumCall=JSON.parse(storage);Liftium.d('AdDriver data loaded:',7,Liftium.AdDriverNumCall);}catch(e){Liftium.d('AdDriver data load failed',1);WikiaTracker.track([LiftiumOptions.pubid,'error','impctparse',slotname],'liftium.errors');}}
if(window.wgAdDriverUseExpiryStorage&&window.wgAdDriverUseCookie){if(storage!=cookieStorage){WikiaTracker.track([LiftiumOptions.pubid,"error","impctoutofsync",slotname],'liftium.errors');}}}
if(!Liftium.e(Liftium.adDriverNumCall)){for(var i=0;i<Liftium.adDriverNumCall.length;i++){if(Liftium.adDriverNumCall[i].slotname==slotname){if(parseInt(Liftium.adDriverNumCall[i].ts)+window.wgAdDriverCookieLifetime*3600000>Liftium.now.getTime()){var num=parseInt(Liftium.adDriverNumCall[i].num);return'impct='+num+';';}}}}
return'';}
LiftiumDART.getResolution=function(){if(Liftium.e(LiftiumDART.width)||Liftium.e(LiftiumDART.height)){LiftiumDART.width=document.documentElement.clientWidth||document.body.clientWidth;LiftiumDART.height=document.documentElement.clientHeight||document.body.clientHeight;Liftium.d("resolution: "+LiftiumDART.width+"x"+LiftiumDART.height,7);}
if(LiftiumDART.width>1024){return'dis=large;';}else{return'';}};LiftiumDART.getPrefooterStatus=function(){if(Liftium.e(LiftiumDART.hasprefooters)){if(typeof AdEngine!="undefined"){if(AdEngine.isSlotDisplayableOnCurrentPage("PREFOOTER_LEFT_BOXAD")){LiftiumDART.hasprefooters="yes";}else{LiftiumDART.hasprefooters="no";}}else{LiftiumDART.hasprefooters="unknown";}}
Liftium.d("has prefooters: "+LiftiumDART.hasprefooters,7);return"hasp="+LiftiumDART.hasprefooters+";";};LiftiumDART.getAllDartKeyvalues=function(slotname){var out='s0='+LiftiumDART.getDARTSite(Liftium.getPageVar('Hub')).replace(/wka\./,'')+';'+'s1='+LiftiumDART.getZone1(Liftium.getPageVar('wgDBname'))+';'+'s2='+LiftiumDART.getZone2()+';'+'@@WIKIA_PROVIDER_VALUES@@'+
LiftiumDART.getLocKv(slotname)+
LiftiumDART.getArticleKV()+
LiftiumDART.getDomainKV(Liftium.getPageVar('domain'))+'pos='+slotname+';';out=out.replace(/@@WIKIA_AQ@@/,Athena.getMinuteTargeting());var d=Liftium.getPageVar('dart','');if(!Liftium.e(d)){out=out.replace(/@@WIKIA_PROVIDER_VALUES@@/,d+';');}
return out;};if(!window.Athena){var Athena={now:new Date(),definedInsideWikiajs:true};Athena.getMinuteTargeting=function(){return Athena.now.getMinutes()%15;};Athena.getPageVar=Liftium.getPageVar;Athena.setPageVar=Liftium.setPageVar;}
if(typeof AQ=="undefined"){var AQ={eventUrls:[],chain:{},allTags:{},cwpid:504082,priceFloor:0,tries:0};}
AQ.next=function(slotgroup){top.Athena.d("AQ.next called with "+slotgroup,3);top.Athena.d("AQ.chain for "+slotgroup+": "+Athena.print_r(AQ.chain[slotgroup]),5);var i,nexti=0;for(i=AQ.chain[slotgroup].length-1;i>=0;i--){if(!top.Athena.e(AQ.chain[slotgroup][i]['skipped'])){nexti=i+1;break;}else if(!top.Athena.e(AQ.chain[slotgroup][i]['attempt'])){AQ.beacon(AQ.chain[slotgroup][i]['id'],"reject");AQ.chain[slotgroup][i]['reject']=true;top.Athena.d("AQ tag #"+AQ.chain[slotgroup][i]['id']+" rejected in "+slotgroup,3);nexti=i+1;break;}}
if(nexti>AQ.chain[slotgroup].length-1){top.Athena.d("AQ: End of ContextWeb chain",5);if(AQ.win==top){top.Athena.hop();}else{top.Athena.iframeHop(AQ.win.location);}}else{top.Athena.debug("AQ.next calling tag #"+AQ.chain[slotgroup][nexti]['id']+" with a value of "+AQ.chain[slotgroup][nexti]['fValue'],3);AQ.tag(slotgroup,AQ.chain[slotgroup][nexti]['id']);}};window.AQNext=AQ.next;AQ.beacon=function(cwtagid,action){if(top.Athena.rand<0.5){return;}
var url=top.Athena.baseUrl+'event/set?event=contextWebBeacon&cwtagid='+cwtagid+'&action='+action;top.Athena.d("AQ event beacon url: "+url,3);AQ.eventUrls.push(url);top.Athena.beaconCall(url);};AQ.checkForLoad=function(slotgroup){top.Athena.d("AQ.checkForLoad called for "+slotgroup,4);if(top.Athena.e(window.strCreative)){if(AQ.tries<100){var recall="AQ.checkForLoad('"+slotgroup+"');";top.Athena.d("AQ: Recalling "+recall+" in 100 ms",6);window.setTimeout(recall,100);AQ.tries++;}else{top.Athena.d("Giving up after 100 tries in AQ.checkForLoad");}
return;}
for(var i=AQ.chain[slotgroup].length-1;i>=0;i--){if(!top.Athena.e(AQ.chain[slotgroup][i]['attempt'])){if(top.Athena.e(AQ.chain[slotgroup][i]['reject'])){AQ.beacon(AQ.chain[slotgroup][i]['id'],"load");AQ.chain[slotgroup][i]['load']=true;top.Athena.d("AQ tag #"+AQ.chain[slotgroup][i]['id']+" loaded in "+slotgroup,3);}
break;}}};AQ.randomTag=function(slotgroup,win){AQ.randomTagCalled=true;var chooseFrom=[],found=false;for(var i=0;i<AQ.allTags[slotgroup].length;i++){found=false;for(var j=0;j<AQ.chain[slotgroup].length;j++){if(AQ.allTags[slotgroup][i]['id']==AQ.chain[slotgroup][j]['id']){found=true;break;}}
if(!found){chooseFrom.push(Athena.clone(AQ.allTags[slotgroup][i]));}}
if(top.Athena.e(chooseFrom)){AQ.tag(slotgroup,AQ.chain[slotgroup][0]['id'],win);return;}
var r=Math.floor(Math.random()*chooseFrom.length);top.Athena.d("AQ.randomTag calling tag "+r+" in the chain for "+slotgroup,2);var oldChain=AQ.chain[slotgroup];AQ.chain[slotgroup]=[];AQ.chain[slotgroup].push(Athena.clone(chooseFrom[r]));AQ.chain[slotgroup][0]['random']=true;AQ.chain[slotgroup].push(Athena.clone(oldChain[0]));AQ.chain[slotgroup].push(Athena.clone(oldChain[1]));AQ.tag(slotgroup,AQ.chain[slotgroup][0]['id'],win);};AQ.tag=function(slotgroup,cwtagid,win){if(typeof win!="undefined"){AQ.win=win;}
top.Athena.d("AQ.tag called for "+slotgroup+" with tag #"+cwtagid,3);AQ.lastTag=cwtagid;var currenti;for(var i=0;i<AQ.chain[slotgroup].length;i++){if(AQ.chain[slotgroup][i]['id']==cwtagid){currenti=i;break;}}
var size,w,h;switch(slotgroup){case'MR':size="300x250";w=300;h=250;break;case'LB':size="728x90";w=728;h=90;break;case'WS':size="160x600";w=160;h=600;break;default:document.write('<!-- Invalid slotgroup for AQ.tag -->');return false;}
try{var cwpage="http://"+Athena.getPageVar("hostname")+Athena.getPageVar("request");}catch(e){if(top!=self&&!Athena.e(document.referrer)){cwpage=document.referrer;}}
var cwurl='http://tag.contextweb.com/TAGPUBLISH/getad.aspx';var cwp={"tagver":1,"if":0,"ca":"VIEWAD","cp":AQ.cwpid,"ct":cwtagid,"cf":size,"cn":1,"cr":200,"cw":w,"ch":h,"cads":0,"rq":1,"cwu":cwpage,"mrnd":Athena.rand};cwurl+='?'+Athena.buildQueryString(cwp,'&');AQ.beacon(cwtagid,'attempt');AQ.chain[slotgroup][currenti]['attempt']=true;if(currenti===0){window.setTimeout("AQ.checkForLoad('"+slotgroup+"');",750*AQ.chain[slotgroup].length);}
AQ.win.document.write('<script type="text/javascript" src="'+cwurl+'"><\/scr'+'ipt>');AQ.win.document.write('<script><\/script>');return true;};var meerkat=function(options){this.settings={close:'none',dontShow:'none',meerkatPosition:'bottom',animationSpeed:'slow',height:'auto',background:'none'};if(options){jQuery.extend(this.settings,options);}
var settings=this.settings;$('html, body').css({'margin':'0','padding':'0','height':'100%'});$('#meerkat').show();$('#meerkat-wrap').css({'position':'fixed','width':'100%','height':settings.height,'left':0,'z-index':1000}).css(settings.meerkatPosition,"0");$('#meerkat-container').css({'background':settings.background,'height':settings.height});$(settings.close+","+settings.dontShow).css({"cursor":"pointer"});$('#meerkat-wrap').hide().slideDown(settings.animationSpeed);$(settings.close).click(function(){$("#meerkat-wrap").slideUp();});$(settings.dontShow).click(function(){$("#meerkat-wrap").slideUp();});};var ve_alternate=function(div){div.style.display="none";Athena.hop();};;var AIC2={fingerprint:'b',called:false,startPosition:0,stopPosition:0,magicNumber:800,WMCbaseWidth:680,marginLeft:190,isRightToLeft:false,visible:false};AIC2.init=function(){Liftium.d("AIC2: init",5);AIC2.called=true;if($("#WikiaMainContent").width()!=AIC2.WMCbaseWidth){AIC2.marginLeft=AIC2.marginLeft+parseInt(($("#WikiaMainContent").width()-AIC2.baseWidth)/2);Liftium.d("AIC2: non standard width, new marginLeft set to "+AIC2.marginLeft,5);WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"AIC2","wide"]),'liftium.varia');}
if($('body').hasClass('rtl')){Liftium.d("AIC2: rtl wiki",7);WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"AIC2","rtl"]),'liftium.varia');AIC2.isRightToLeft=true;}
if($(window).width()<1010){Liftium.d("AIC2: window too narrow, bailing out",3);WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"AIC2","too_narrow"]),'liftium.varia');return;}
if(!AIC2.checkStartStopPosition()){return;}
if(AIC2.startPosition+AIC2.magicNumber<AIC2.stopPosition){Liftium.d("AIC2: page long enough",7);$('#WikiaRail').append('<div id="INCONTENT_BOXAD_1" class="noprint" style="height: 250px; width: 300px; position: relative;"><div id="Liftium_300x250_99"><iframe width="300" height="250" id="INCONTENT_BOXAD_1_iframe" class="" noresize="true" scrolling="no" frameborder="0" marginheight="0" marginwidth="0" style="border:none" target="_blank"></iframe></div></div><!-- END SLOTNAME: INCONTENT_BOXAD_1 -->');$(window).bind("scroll.AIC2",AIC2.onScroll);$(window).bind("resize.AIC2",AIC2.onScroll);}else{Liftium.d("AIC2: page too short",3);WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"AIC2","too_short"]),'liftium.varia');}};AIC2.checkStartStopPosition=function(){Liftium.d("AIC2: check start/stop position",7);try{var adHeight=parseInt($('#INCONTENT_BOXAD_1').height())||0;var startPosition=parseInt($('#WikiaRail').offset().top)+parseInt($('#WikiaRail').height())-adHeight;var stopPosition=parseInt($('#WikiaFooter').offset().top)-10-adHeight;if($('#LEFT_SKYSCRAPER_3').length&&$('#LEFT_SKYSCRAPER_3').height()>50){Liftium.d("AIC2: sky3 found",3);stopPosition=parseInt($('#LEFT_SKYSCRAPER_3').offset().top)-20-adHeight;}}catch(e){Liftium.d("AIC2: catched in start/stop:",1,e);WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"error","AIC2","try_catch"]),'liftium.errors');return false;}
Liftium.d("AIC2: start/stop old/new",7,[AIC2.startPosition,AIC2.stopPosition,startPosition,stopPosition]);if(!AIC2.startPosition&&!AIC2.stopPosition){AIC2.startPosition=startPosition;AIC2.stopPosition=stopPosition;Liftium.d("AIC2: start/stop position set up",7);return true;}
if(AIC2.isAlmostEqual(AIC2.startPosition,startPosition)&&AIC2.isAlmostEqual(AIC2.stopPosition,stopPosition)){Liftium.d("AIC2: start/stop position correct",7);return true;}
AIC2.startPosition=startPosition;AIC2.stopPosition=stopPosition;Liftium.d("AIC2: start/stop position fixed",5);return false;};AIC2.isAlmostEqual=function(a,b){if(a==b){return true;}
if(b-3<a&&a<b+3){return true;}
return false;};AIC2.onScroll=function(){Liftium.d("AIC2: onScroll",9);if(($(window).scrollTop()>AIC2.startPosition)&&($(window).scrollTop()<AIC2.stopPosition)){if(!AIC2.visible){Liftium.d("AIC2.showAd",5);if(!AIC2.checkStartStopPosition()){return;}
if($('#INCONTENT_BOXAD_1').hasClass('wikia-ad')==false){LiftiumOptions.placement="INCONTENT_BOXAD_1";Liftium.callInjectedIframeAd("300x250",document.getElementById("INCONTENT_BOXAD_1_iframe"));$('#INCONTENT_BOXAD_1').addClass('wikia-ad');}
$('#INCONTENT_BOXAD_1').css({'position':'fixed','top':'10px','bottom':'','left':'50%','margin-left':AIC2.marginLeft+'px'});if(AIC2.isRightToLeft){$('#INCONTENT_BOXAD_1').css({'left':''});}
$('#INCONTENT_BOXAD_1').css('visibility','visible');AIC2.visible=true;}}else{if(AIC2.visible){Liftium.d("AIC2.hideAd",5);$('#INCONTENT_BOXAD_1').css('visibility','hidden');AIC2.glueAd();AIC2.visible=false;}}};AIC2.glueAd=function(){Liftium.d("AIC2: glueAd",9);var adPosition=parseInt($('#INCONTENT_BOXAD_1').offset().top);if(adPosition>AIC2.stopPosition){Liftium.d("AIC2: glue at the bottom",7);var bigSpace=parseInt(AIC2.stopPosition-AIC2.startPosition+10);$('#INCONTENT_BOXAD_1').css({'position':'relative','top':bigSpace+'px','bottom':'','left':'','margin-left':''});}else{Liftium.d("AIC2: glue at the top",7);$('#INCONTENT_BOXAD_1').css({'position':'relative','top':'10px','bottom':'','left':'','margin-left':''});}
$('#INCONTENT_BOXAD_1').css('visibility','visible');};AIC2.checkFooterAd=function(){Liftium.d("AIC2: footer ad detection",7);if($(".wikia_anchor_ad").length){Liftium.d("AIC2: footer ad detected, bailing out",3);$(window).unbind("scroll.AIC2");return true;}else{Liftium.d("AIC2: footer ad not detected, proceeding",7);return false;}};if(top==self&&!(window.wgUserName&&!window.wgUserShowAds)&&window.wgEnableAdsInContent&&window.wgIsArticle&&(window.wgNamespaceNumber!=6)&&!AIC2.called&&!window.wgIsMainpage){wgAfterContentAndJS.push(function(){AIC2.init();});};var AdDriver={adProviderAdDriver:'AdDriver',adProviderDart:'DART',adProviderLiftium:'Liftium',classNameDefaultHeight:'default-height',storageNameNumAllCall:'adDriverNumAllCall',storageNameNumDARTCall:'adDriverNumDARTCall',storageNameLastDARTCallNoAd:'adDriverLastDARTCallNoAd',country:'',debug:false,minNumDARTCall:3,paramLiftiumTag:'liftium_tag',standardLeaderboardMinHeight:90,standardLeaderboardMaxHeight:95,standardTopButtonMinHeight:100,getMinNumDARTCall:function(country){country=country.toUpperCase();if(country in window.wgHighValueCountries){return window.wgHighValueCountries[country];}
else{return AdDriver.minNumDARTCall;}},init:function(){window.adDriverLastDARTCallNoAds=[];window.adDriverAdCallComplete=[];AdDriver.debug=parseInt($.getUrlVar('debug'));},log:function(msg){if(AdDriver.debug){$().log('AdDriver: '+msg);}}}
AdDriver.getAdProviderForSpecialCase=function(slotname){switch(wgDBname){case'geekfeminism':case'kinkontap':case'lostpedia':case'sexpositive':case'wswiki':return AdDriver.adProviderLiftium;break;case'cookbook_import':break;default:}
if(window.wgEnableWikiAnswers){return AdDriver.adProviderLiftium;}
switch(slotname){case'MIDDLE_RIGHT_BOXAD':if(typeof window.partnerKeywords=='undefined'||!window.partnerKeywords){return'NO-AD';}
break;default:}
return'';}
AdDriver.isHighValue=function(slotname){if(AdConfig.isHighValueSlot(slotname)){if(Liftium.geo){AdDriver.country=Liftium.geo.country;}
else if(AdConfig.geo){AdDriver.country=AdConfig.geo.country;}
if(AdDriver.country){return AdConfig.isHighValueCountry(AdDriver.country);}
else{WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"error","no_geo"]),'liftium.varia');}}
return false;}
AdDriver.getNumDARTCall=function(slotname){var num=0;num=AdDriver.getNumCall(AdDriver.storageNameNumDARTCall,slotname);AdDriver.log(slotname+' has '+num+' DART calls');return num;}
AdDriver.getNumAllCall=function(slotname){var num=0;num=AdDriver.getNumCall(AdDriver.storageNameNumAllCall,slotname);return num;}
AdDriver.getNumCall=function(storageName,slotname){var storageNum=0,cookieNum=0,numCallStorage;try{if(window.wgAdDriverUseExpiryStorage){numCallStorage=$.expiryStorage.get(storageName);storageNum=AdDriver.getNumCallFromStorageContents(numCallStorage,slotname);}
if(window.wgAdDriverUseCookie){numCallStorage=$.cookies.get(storageName);cookieNum=AdDriver.getNumCallFromStorageContents(numCallStorage,slotname);}
if(window.wgAdDriverUseExpiryStorage&&window.wgAdDriverUseCookie){if(storageNum!=cookieNum){WikiaTracker.track([LiftiumOptions.pubid,"error","numcalloutofsync",storageName,slotname,window.wgDBname,storageNum,cookieNum],'liftium.errors');AdDriver.log('Cookie and ExpiryStorage for '+storageName+':'+slotname+' are out of sync!');AdDriver.log('Cookie contents: '+cookieNum);AdDriver.log('ExpiryStogage contents: '+storageNum);}}}
catch(e){AdDriver.log(e.message);}
return window.wgAdDriverUseExpiryStorage?storageNum:cookieNum;}
AdDriver.getNumCallFromStorageContents=function(numCallStorage,slotname){var num=0;if(typeof(numCallStorage)!='undefined'&&numCallStorage){var slotnameObjs=JSON.parse(numCallStorage);for(var i=0;i<slotnameObjs.length;i++){if(slotnameObjs[i].slotname==slotname){if(parseInt(slotnameObjs[i].ts)+window.wgAdDriverCookieLifetime*3600000>window.wgNow.getTime()){num=parseInt(slotnameObjs[i].num);break;}}}}
return num;}
AdDriver.incrementNumDARTCall=function(slotname){return AdDriver.incrementNumCall(AdDriver.storageNameNumDARTCall,slotname);}
AdDriver.incrementNumAllCall=function(slotname){return AdDriver.incrementNumCall(AdDriver.storageNameNumAllCall,slotname);}
AdDriver.incrementNumCall=function(storageName,slotname){var newSlotnameObjs=new Array();var numInStorage=0;var numInCookie=0;var timestamp=window.wgNow.getTime();var slotnameInStorage=false;if(window.wgAdDriverUseExpiryStorage){try{var numCallStorage=$.expiryStorage.get(storageName);var incrementResult=AdDriver.incrementStorageContents(numCallStorage,slotname);slotnameInStorage=incrementResult.slotnameInStorage;numInStorage=incrementResult.num;newSlotnameObjs=incrementResult.newSlotnameObjs;}
catch(e){AdDriver.log(e.message);}
if(!slotnameInStorage){newSlotnameObjs.push({slotname:slotname,num:++numInStorage,ts:timestamp});}
$.expiryStorage.set(storageName,$.toJSON(newSlotnameObjs),window.wgAdDriverCookieLifetime*3600000);}
if(window.wgAdDriverUseCookie){newSlotnameObjs=new Array();slotnameInStorage=false;try{var numCallStorage=$.cookies.get(storageName);var incrementResult=AdDriver.incrementStorageContents(numCallStorage,slotname);slotnameInStorage=incrementResult.slotnameInStorage;numInCookie=incrementResult.num;newSlotnameObjs=incrementResult.newSlotnameObjs;}
catch(e){AdDriver.log(e.message);}
if(!slotnameInStorage){newSlotnameObjs.push({slotname:slotname,num:++numInCookie,ts:timestamp});}
var cookieOptions={hoursToLive:window.wgAdDriverCookieLifetime,path:wgCookiePath};$.cookies.set(storageName,$.toJSON(newSlotnameObjs),cookieOptions);}
return window.wgAdDriverUseExpiryStorage?numInStorage:numInCookie;}
AdDriver.incrementStorageContents=function(numCallStorage,slotname){var newSlotnameObjs=new Array();var num=0;var slotnameInStorage=false;var timestamp=window.wgNow.getTime();if(typeof(numCallStorage)!='undefined'&&numCallStorage){var slotnameObjs=JSON.parse(numCallStorage);for(var i=0;i<slotnameObjs.length;i++){if(slotnameObjs[i].slotname==slotname){slotnameInStorage=true;if(parseInt(slotnameObjs[i].ts)+window.wgAdDriverCookieLifetime*3600000>window.wgNow.getTime()){num=parseInt(slotnameObjs[i].num);timestamp=parseInt(slotnameObjs[i].ts);}
newSlotnameObjs.push({slotname:slotname,num:++num,ts:timestamp});}
else{newSlotnameObjs.push(slotnameObjs[i]);}}}
var retObj=new Object();retObj.newSlotnameObjs=newSlotnameObjs;retObj.num=num;retObj.slotnameInStorage=slotnameInStorage;return retObj;}
AdDriver.isLastDARTCallNoAd=function(slotname){var storageValue=false;var cookieValue=false;try{if(window.wgAdDriverUseExpiryStorage){var lastDARTCallNoAdStorage=$.expiryStorage.get(AdDriver.storageNameLastDARTCallNoAd);storageValue=AdDriver.getLastDARTCallNoAdFromStorageContents(lastDARTCallNoAdStorage,slotname);}
if(window.wgAdDriverUseCookie){var lastDARTCallNoAdCookie=$.cookies.get(AdDriver.storageNameLastDARTCallNoAd);cookieValue=AdDriver.getLastDARTCallNoAdFromStorageContents(lastDARTCallNoAdCookie,slotname);}
if(window.wgAdDriverUseExpiryStorage&&window.wgAdDriverUseCookie){if(storageValue!=cookieValue){WikiaTracker.track([LiftiumOptions.pubid,"error","lastdartcallnoadoutofsync",slotname,window.wgDBname],'liftium.errors');}}}
catch(e){AdDriver.log(e.message);}
AdDriver.log(slotname+' last DART call had no ad? '+(window.wgAdDriverUseExpiryStorage?storageValue:cookieValue));return window.wgAdDriverUseExpiryStorage?storageValue:cookieValue;}
AdDriver.getLastDARTCallNoAdFromStorageContents=function(lastDARTCallNoAdStorage,slotname){var value=false;if(typeof(lastDARTCallNoAdStorage)!='undefined'&&lastDARTCallNoAdStorage){var slotnameTimestamps=JSON.parse(lastDARTCallNoAdStorage);for(var i=0;i<slotnameTimestamps.length;i++){if(slotnameTimestamps[i].slotname==slotname){if(parseInt(slotnameTimestamps[i].ts)+window.wgAdDriverCookieLifetime*3600000>window.wgNow.getTime()){value=true;}
break;}}}
return value;}
AdDriver.setLastDARTCallNoAd=function(slotname,value){var newSlotnameTimestamps=new Array();var slotnameInStorage=false;if(window.wgAdDriverUseExpiryStorage){try{var lastDARTCallNoAdStorage=$.expiryStorage.get(AdDriver.storageNameLastDARTCallNoAd);var setResult=AdDriver.setLastDARTCallNoAdInStorageContents(lastDARTCallNoAdStorage,slotname,value);newSlotnameTimestamps=setResult.newSlotnameTimestamps;slotnameInStorage=setResult.slotnameInStorage;}
catch(e){AdDriver.log(e.message);}
if(value&&!slotnameInStorage){newSlotnameTimestamps.push({slotname:slotname,ts:value});}
if(newSlotnameTimestamps.length){$.expiryStorage.set(AdDriver.storageNameLastDARTCallNoAd,$.toJSON(newSlotnameTimestamps),window.wgAdDriverCookieLifetime*3600000);}}
if(window.wgAdDriverUseCookie){var newSlotnameTimestamps=new Array();var slotnameInStorage=false;try{var lastDARTCallNoAdCookie=$.cookies.get(AdDriver.storageNameLastDARTCallNoAd);var setResult=AdDriver.setLastDARTCallNoAdInStorageContents(lastDARTCallNoAdCookie,slotname,value);newSlotnameTimestamps=setResult.newSlotnameTimestamps;slotnameInStorage=setResult.slotnameInStorage;}
catch(e){AdDriver.log(e.message);}
if(value&&!slotnameInStorage){newSlotnameTimestamps.push({slotname:slotname,ts:value});}
if(newSlotnameTimestamps.length){var cookieOptions={hoursToLive:window.wgAdDriverCookieLifetime,path:wgCookiePath};$.cookies.set(AdDriver.storageNameLastDARTCallNoAd,$.toJSON(newSlotnameTimestamps),cookieOptions);}}
return value;}
AdDriver.setLastDARTCallNoAdInStorageContents=function(lastDARTCallNoAdStorage,slotname,value){var slotnameInStorage=false;var newSlotnameTimestamps=new Array();if(typeof(lastDARTCallNoAdStorage)!='undefined'&&lastDARTCallNoAdStorage){var slotnameTimestamps=JSON.parse(lastDARTCallNoAdStorage);for(var i=0;i<slotnameTimestamps.length;i++){if(slotnameTimestamps[i].slotname==slotname){slotnameInStorage=true;if(value){newSlotnameTimestamps.push({slotname:slotname,ts:value});}}
else{newSlotnameTimestamps.push(slotnameTimestamps[i]);}}}
var retObj=new Object();retObj.slotnameInStorage=slotnameInStorage;retObj.newSlotnameTimestamps=newSlotnameTimestamps;return retObj;}
AdDriver.adjustSlotDisplay=function(slotname){switch(slotname){case'CORP_TOP_LEADERBOARD':case'HOME_TOP_LEADERBOARD':case'HUB_TOP_LEADERBOARD':case'TOP_LEADERBOARD':$('#'+slotname).removeClass(AdDriver.classNameDefaultHeight);if(($('#'+slotname).height()>=0&&$('#'+slotname).height()<AdDriver.standardLeaderboardMinHeight)||$('#'+slotname).height()>AdDriver.standardLeaderboardMaxHeight){$('#'+slotname).addClass('jumbo-leaderboard');$('#WikiaTopAds').removeClass('WikiaTopButtonLeft WikiaTopButtonRight');AdDriverDelayedLoader.removeItemsBySlotname('TOP_BUTTON');}
return true;break;case'CORP_TOP_RIGHT_BOXAD':case'HOME_TOP_RIGHT_BOXAD':case'TEST_HOME_TOP_RIGHT_BOXAD':case'TEST_TOP_RIGHT_BOXAD':case'TOP_RIGHT_BOXAD':case'PREFOOTER_LEFT_BOXAD':case'PREFOOTER_RIGHT_BOXAD':$('#'+slotname).removeClass(AdDriver.classNameDefaultHeight);return true;break;case'HOME_TOP_RIGHT_BUTTON':if($('#'+slotname).height()>=AdDriver.standardTopButtonMinHeight){$('#'+slotname).addClass('home-top-right-button-visible');}
break;}
return false;}
AdDriver.canCallLiftium=function(slotname){switch(slotname){case'HOME_INVISIBLE_TOP':case'HUB_TOP_LEADERBOARD':case'INVISIBLE_MODAL':case'INVISIBLE_TOP':case'MIDDLE_RIGHT_BOXAD':case'MODAL_VERTICAL_BANNER':return false;break;}
return true;}
AdDriver.doesUrlParameterExist=function(param){if($.getUrlVar(param)!=null){return true;}
return false;}
AdDriver.isForceLiftium=function(){var forceLiftiumParams=new Array(AdDriver.paramLiftiumTag);for(var i=0;i<forceLiftiumParams.length;i++){if(AdDriver.doesUrlParameterExist(forceLiftiumParams[i])){return true;}}
return false;}
AdDriver.getAdProvider=function(slotname,size,defaultAdProvider){if(AdDriver.isForceLiftium()){return AdDriver.adProviderLiftium;}
var specialCaseAdProvider=AdDriver.getAdProviderForSpecialCase(slotname);if(specialCaseAdProvider){return specialCaseAdProvider;}
if(defaultAdProvider==AdDriver.adProviderLiftium){return AdDriver.adProviderLiftium;}
if(AdDriver.isHighValue(slotname)){if(AdDriver.getNumDARTCall(slotname)<AdDriver.getMinNumDARTCall(AdDriver.country)||!AdDriver.isLastDARTCallNoAd(slotname)){return AdDriver.adProviderDart;}}
return AdDriver.adProviderLiftium;}
AdDriver.init();var AdDriverDelayedLoaderItem=function(slotname,size,defaultAdProvider){this.clientWidth=0;this.clientHeight=0;this.hasPrefooters=null;this.slotname=slotname;this.size=size;this.defaultAdProvider=defaultAdProvider;this.dartUrl=null;this.getDARTUrl=function(){if(!this.dartUrl){this.dartUrl=AdConfig.DART.getUrl(slotname,size,false,AdDriver.adProviderAdDriver);}
return this.dartUrl;};}
var AdDriverDelayedLoader={adDriverItems:null,adNum:0,currentAd:null,currentSlot:null,started:false,init:function(){AdDriverDelayedLoader.adDriverItems=new Array();AdDriverDelayedLoader.adNum=0;AdDriverDelayedLoader.currentAd=null;AdDriverDelayedLoader.started=false;}}
AdDriverDelayedLoader.init();AdDriverDelayedLoader.appendItem=function(adDriverItem){AdDriverDelayedLoader.adDriverItems.push(adDriverItem);}
AdDriverDelayedLoader.prependItem=function(adDriverItem){AdDriverDelayedLoader.adDriverItems.unshift(adDriverItem);}
AdDriverDelayedLoader.removeItemsBySlotname=function(slotname){var itemIdxs=[];for(var i=0;i<AdDriverDelayedLoader.adDriverItems.length;i++){if(slotname==AdDriverDelayedLoader.adDriverItems[i].slotname){itemIdxs.unshift(i);}}
for(var i=0;i<itemIdxs.length;i++){AdDriverDelayedLoader.adDriverItems.splice(itemIdxs[i],1);}}
AdDriverDelayedLoader.callDART=function(){AdDriver.log(AdDriverDelayedLoader.currentAd.slotname+': calling DART...');AdDriver.incrementNumDARTCall(AdDriverDelayedLoader.currentAd.slotname);AdDriver.setLastDARTCallNoAd(AdDriverDelayedLoader.currentAd.slotname,null);var slot=document.getElementById(AdDriverDelayedLoader.currentAd.slotname);ghostwriter(slot,{insertType:"append",script:{src:AdDriverDelayedLoader.currentAd.getDARTUrl()},done:function(){ghostwriter.flushloadhandlers();var nextAdProvider=null;if(typeof(window.adDriverLastDARTCallNoAds[AdDriverDelayedLoader.currentAd.slotname])=='undefined'||!window.adDriverLastDARTCallNoAds[AdDriverDelayedLoader.currentAd.slotname]){AdDriver.log(AdDriverDelayedLoader.currentAd.slotname+' was filled by DART');AdDriver.adjustSlotDisplay(AdDriverDelayedLoader.currentAd.slotname);}
else{AdDriver.log(AdDriverDelayedLoader.currentAd.slotname+' was not filled by DART');AdDriver.setLastDARTCallNoAd(AdDriverDelayedLoader.currentAd.slotname,window.wgNow.getTime());if(AdDriver.canCallLiftium(AdDriverDelayedLoader.currentAd.slotname)){nextAdProvider=AdDriver.adProviderLiftium;}}
if(nextAdProvider==AdDriver.adProviderLiftium){var liftiumItem=new AdDriverDelayedLoaderItem(AdDriverDelayedLoader.currentAd.slotname,AdDriverDelayedLoader.currentAd.size,AdDriver.adProviderLiftium);AdDriverDelayedLoader.prependItem(liftiumItem);}
else{WikiaTracker.track(Liftium.buildTrackUrl([LiftiumOptions.pubid,"slot",AdDriverDelayedLoader.currentAd.size+"_"+AdDriverDelayedLoader.currentAd.slotname])+'/addriver','liftium.slot');}
AdDriverDelayedLoader.loadNext();}});}
AdDriverDelayedLoader.getPlaceHolderIframeScript=function(slotname,size){var dims=size.split('x');return"document.write('<div id=\"Liftium_"+size+"_"+(++AdDriverDelayedLoader.adNum)+"\"><iframe width=\""+dims[0]+"\" height=\""+dims[1]+"\" id=\""+escape(slotname)+"_iframe\" noresize=\"true\" scrolling=\"no\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\" style=\"border:none;\" target=\"_blank\"></iframe><div>');";}
AdDriverDelayedLoader.getLiftiumCallScript=function(slotname,size){var script='';if(slotname in AdConfig.adSlotsRequiringJSInvocation){script='Liftium.callAd("'+size+'");';}
else{script=AdDriverDelayedLoader.getPlaceHolderIframeScript(slotname,size);script+='Liftium.callInjectedIframeAd("'+size+'", document.getElementById("'+escape(slotname)+'_iframe"));';}
return script;}
AdDriverDelayedLoader.callLiftium=function(){var slotname=AdDriverDelayedLoader.currentAd.slotname;if(!AdDriver.canCallLiftium(slotname)){AdDriverDelayedLoader.loadNext();return;}
AdDriver.log(slotname+': calling Liftium...');var size=AdDriverDelayedLoader.currentAd.size;LiftiumOptions.placement=slotname;try{var script=AdDriverDelayedLoader.getLiftiumCallScript(slotname,size);var slot=document.getElementById(slotname);ghostwriter(slot,{insertType:"append",script:{text:script},done:function(){ghostwriter.flushloadhandlers();AdDriver.adjustSlotDisplay(slotname);AdDriverDelayedLoader.loadNext();}});}
catch(e){AdDriver.log(e.message);AdDriverDelayedLoader.loadNext();}}
AdDriverDelayedLoader.loadNext=function(){if(AdDriverDelayedLoader.adDriverItems.length){AdDriverDelayedLoader.currentAd=AdDriverDelayedLoader.adDriverItems.shift();if(AdEngine.isSlotDisplayableOnCurrentPage(AdDriverDelayedLoader.currentAd.slotname)){var adProvider=AdDriver.getAdProvider(AdDriverDelayedLoader.currentAd.slotname,AdDriverDelayedLoader.currentAd.size,AdDriverDelayedLoader.currentAd.defaultAdProvider);if(adProvider==AdDriver.adProviderDart||adProvider==AdDriver.adProviderLiftium){if(AdDriverDelayedLoader.currentSlot!=AdDriverDelayedLoader.currentAd.slotname){AdDriver.incrementNumAllCall(AdDriverDelayedLoader.currentAd.slotname);AdDriverDelayedLoader.currentSlot=AdDriverDelayedLoader.currentAd.slotname;}}
if(adProvider==AdDriver.adProviderDart){AdDriverDelayedLoader.callDART();}
else if(adProvider==AdDriver.adProviderLiftium){AdDriverDelayedLoader.callLiftium();}
else{AdDriverDelayedLoader.loadNext();}}
else{$('#'+AdDriverDelayedLoader.currentAd.slotname).css("display","none");AdDriverDelayedLoader.loadNext();}}
else{AdDriverDelayedLoader.finalize();}
if(!AdDriverDelayedLoader.adDriverItems.length&&typeof Liftium!='undefined'&&Liftium){Liftium.hasMoreCalls=0;}}
AdDriverDelayedLoader.reorderItems=function(){var highPriorityItems=['TOP_LEADERBOARD','TOP_RIGHT_BOXAD'];var tmpItems=[];for(var i=0;i<AdDriverDelayedLoader.adDriverItems.length;i++){var foundHighPriorityItem=false;for(var j=0;j<highPriorityItems.length;j++){if(AdDriverDelayedLoader.adDriverItems[i].slotname.indexOf(highPriorityItems[j])>-1){if(tmpItems.length&&tmpItems[0].slotname.indexOf('TOP_LEADERBOARD')>-1){tmpItems.splice(1,0,AdDriverDelayedLoader.adDriverItems[i]);}
else{tmpItems.unshift(AdDriverDelayedLoader.adDriverItems[i]);}
foundHighPriorityItem=true;break;}}
if(!foundHighPriorityItem){tmpItems.push(AdDriverDelayedLoader.adDriverItems[i]);}}
AdDriverDelayedLoader.adDriverItems=tmpItems;}
AdDriverDelayedLoader.load=function(){AdDriverDelayedLoader.started=true;if(typeof wgNow!='undefined'&&AdDriverDelayedLoader.adDriverItems.length){var loadTime=(new Date()).getTime()-wgNow.getTime();$().log('AdDriver started loading after '+loadTime+' ms');}
AdDriverDelayedLoader.reorderItems();AdDriverDelayedLoader.loadNext();}
AdDriverDelayedLoader.reset=function(){AdDriverDelayedLoader.init();}
AdDriverDelayedLoader.isRunning=function(){return AdDriverDelayedLoader.started&&AdDriverDelayedLoader.adDriverItems.length;}
AdDriverDelayedLoader.finalize=function(){if(window.wgEnableKruxTargeting){AdDriver.log('loading krux');Krux.load(window.wgKruxCategoryId);}}
if(window.wgEnableKruxTargeting){window.Krux||((Krux=function(){Krux.q.push(arguments)}).q=[]);Krux.load=function(confid){var k=document.createElement('script');k.type='text/javascript';k.async=true;var m,src=(m=location.href.match(/\bkxsrc=([^&]+)\b/))&&decodeURIComponent(m[1]);k.src=src||(location.protocol==='https:'?'https:':'http:')+'//cdn.krxd.net/controltag?confid='+confid;var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(k,s);};window.Krux||((Krux=function(){Krux.q.push(arguments)}).q=[]);(function(){function store(n){var m,k='kx'+n;return((m=this.localStorage)?m[k]||'':(m=document.cookie)&&(m=m.match('\\b'+k+'=([^;]*)'))&&decodeURIComponent(m[1]))||''}
var segs=store('segs'),key='ksgmnt=';Krux.dartKeyValues=segs?key+segs.split(',').join(key)+';u='+store('user')+';':'';})();}
$(window).bind('load',function(){AdDriverDelayedLoader.load();});;var AdSS={sponsormsg:null,siteAds:[],heightThreshold:600,init:function(){AdSS.sponsormsg=$("div.sponsormsg > ul");if(AdSS.sponsormsg.length){var importantContentHeight=$('#WikiaArticle').height();importantContentHeight+=$('#WikiaArticleComments').height();if(importantContentHeight>=AdSS.heightThreshold){if(typeof(wgAdSS_pageAds)!=='undefined'){$.each(wgAdSS_pageAds,function(i,v){AdSS.sponsormsg.append(v);});}
if(typeof(wgAdSS_selfAd)!=='undefined'){$(wgAdSS_selfAd).appendTo(AdSS.sponsormsg).find("a").bind("click",{adId:0},AdSS.onClick);$.tracker.byStr("adss/publisher/view/0");}
$.getJSON(wgScript,{'action':'ajax','rs':'AdSS_Publisher::getSiteAdsAjax','cb':'3.1'},AdSS.onGetSiteAds);}}},onGetSiteAds:function(response){var i;for(i=0;i<response.length;i++){if(response[i].id>0){if(AdSS.siteAds.length==0||AdSS.siteAds[AdSS.siteAds.length-1].id!=response[i].id){AdSS.siteAds.push(response[i]);}
response[i].idx=AdSS.siteAds.length-1;}}
var slot;var showedAds=[];for(slot=1;slot<response.length/50+1;slot++){var rand_no=Math.random()*response.length;rand_no=Math.floor(rand_no+1);var rand_ad=response[rand_no-1];if(rand_ad.id>0&&$.inArray(rand_ad.hash,showedAds)==-1){showedAds.push(rand_ad.hash);AdSS.replaceAd($("<li></li>").insertBefore(AdSS.sponsormsg.find("li").last()),rand_ad.idx);}}
AdSS.sponsormsg.parents('.sponsorwrapper').show();},replaceAd:function(oldAd,adIdx){var adId=AdSS.siteAds[adIdx].id;var ad=$(AdSS.siteAds[adIdx].html);ad.find("a").bind("click",{adId:adId},AdSS.onClick).before(AdSS.getPrevNext(adIdx));ad.css({"position":"relative"});oldAd.replaceWith(ad);$.tracker.byStr("adss/publisher/view/"+adId);},getPrevNext:function(idx){var prevIdx=idx-1;var nextIdx=idx+1;if(prevIdx<0){prevIdx=AdSS.siteAds.length-1;}
if(nextIdx==AdSS.siteAds.length){nextIdx=0;}
var prevnext=$('<div class="prevnext"><a href="#" class="prev" rel="'+prevIdx+'">&lt;</a>&nbsp;<a href="#" class="next" rel="'+nextIdx+'">&gt;</a></div>');prevnext.css({"float":"right","font-size":"80%"});prevnext.find("a").css({"border":"1px solid","padding":"1px"}).click(function(e){e.preventDefault();AdSS.replaceAd($(this).closest("li"),parseInt($(this).attr("rel")));});return prevnext;},onClick:function(event){$.tracker.byStr("adss/publisher/click/"+event.data.adId);},displayForm:function(){$(function(){$.tracker.byStr("adss/form/view");if($("#wpType").val()=="site-premium"){$("#wpSelectSitePremium").parent().addClass("selected");$("#wpWeight").val("4").attr("disabled",true);}
else if($("#wpType").val()=="site"){$("#wpSelectSite").parent().addClass("selected");}
else if($("#wpType").val()=="hub"){$("#wpSelectHub").parent().addClass("selected");}
if(location.href.indexOf("#")==-1){location.href=location.href+"#form";}});$("#wpSelectSite").click(function(){$(".SponsoredLinkDesc section").removeClass("selected");$(this).parent().addClass("selected");$("#wpType").val("site");$("#wpWeight").val("1").removeAttr("disabled").parent().show();$('.box .corner-right, .box .corner-left').show();$('#wpSelectHub').parents('.box').find('.corner-left').hide();});$("#wpSelectSitePremium").click(function(){$(".SponsoredLinkDesc section").removeClass("selected");$(this).parent().addClass("selected");$("#wpType").val("site-premium");$("#wpWeight").val("4").attr("disabled",true).parent().show();$('.box .corner-right, .box .corner-left').show();});$("#wpSelectHub").click(function(){$(".SponsoredLinkDesc section").removeClass("selected");$(this).parent().addClass("selected");$("#wpType").val("hub");$("#wpWeight").val("1").removeAttr("disabled").parent().show();$('.box .corner-right, .box .corner-left').show();$('#wpSelectSitePremium').parents('.box').find('.corner-left').hide();});$("#adssLoginAction > a").click(function(e){e.preventDefault();$("#adssLoginAction").hide();$("#wpPassword").parent().show();});$("#wpUrl").keyup(function(){$("div.sponsormsg-preview > ul > li > a").attr("href","http://"+$("#wpUrl").val());});$("#wpText").keyup(function(){$("div.sponsormsg-preview > ul > li > a").html($("#wpText").val());});$("#wpDesc").keyup(function(){$("div.sponsormsg-preview > ul > li > p").html($("#wpDesc").val());});var tooltipNode;$(".form-questionmark").mouseover(function(){tooltipNode=$('<div id="sponsoredlink-tooltip">'+$(this).attr('data-tooltip')+'</div>').appendTo('.SponsoredLinkForm').css('top',$(this).offset().top-250-$("#sponsoredlink-tooltip").height()+'px').css('left','81px');}).mouseout(function(){tooltipNode.remove();});var animationEnabled=false;var modalHtml='<div id="loading-modal"><h2>'+$.msg('adss-form-modal-title')+'</h2><div id="indicator"><div id="green-dot"></div></div></div>';var dotSpeed=300;function dotMove(leftPosition){$('div#green-dot').fadeOut(dotSpeed,function(){$(this).css('left',leftPosition+'px');$('div#green-dot').fadeIn(dotSpeed,function(){leftPosition=leftPosition+24;if(leftPosition==249){leftPosition=129;}
dotMove(leftPosition);});});}
$('.paypal-pay .wikia-button').click(function(event){$.ajax({type:"POST",dataType:"json",url:window.wgScriptPath+"/index.php?title=Special:AdSS&method=process&format=json",data:'wpUrl='+$('.SponsoredLinkForm #wpUrl').val()
+'&wpText='+$('.SponsoredLinkForm #wpText').val()
+'&wpDesc='+$('.SponsoredLinkForm #wpDesc').val()
+'&wpToken='+$('.SponsoredLinkForm #wpToken').val()
+'&wpType='+$('.SponsoredLinkForm #wpType').val()
+'&wpEmail='+$('.SponsoredLinkForm #wpEmail').val()
+'&wpWeight='+$('.SponsoredLinkForm #wpWeight').val(),beforeSend:function(){$.showModal('',modalHtml,{id:'paypalModal',width:434,showCloseButton:false,callback:function(){$('#paypay-error').text();if(!animationEnabled){animationEnabled=true;dotMove(153);}}});},success:function(data){$('.paypal-error').text('');if(data.status=='error'){for(var property in data.form.errors){$('.paypal-error.error-'+property).text(data.form.errors[property]);}
$('#paypalModal').closeModal();$('#wpToken').val(data.formToken);$.tracker.byStr("adss/form/view/errors");}
else if(data.status=='ok'){window.location=data.paypalUrl;}}});event.preventDefault();});}}
$(AdSS.init);;$(function(){if($('.position-marker').exists()){$('.editsection a').click(function(e){$().log('go to section','PLB');var target=$(e.target),marker=target.closest('h1,h2,h3').nextAll('.position-marker:first');if(marker.exists()){var id=target.closest('h1,h2,h3').nextAll('.position-marker:first').attr('id');window.location=target.attr('href')+'#'+id;return false;}else{return true;}});}});;(function($){var loadedPackages=[];$.extend({msg:function(){var key=Array.prototype.shift.call(arguments),params=arguments;var ret=false;if(typeof wgMessages!='undefined'){ret=wgMessages[key]||ret;if(ret!==false&&params&&params.length){$.each(params,function(i,param){ret=ret.replace(new RegExp('\\$'+parseInt(i+1),'g'),param);});}}
return ret!==false?ret:('<'+key+'>');},getMessages:function(packages,callback,language){if(typeof packages=='string'){packages=[packages];}
language=language||window.wgUserLanguage;$().log('loading '+packages.join(',')+' package(s) for "'+language+'"','JSMessages');var packagesToLoad=[];for(var i=0,len=packages.length;i<len;i++){if(loadedPackages.indexOf(packages[i])===-1){packagesToLoad.push(packages[i]);}}
if(packagesToLoad.length==0){$().log('package(s) are already loaded','JSMessages');if(typeof callback=='function'){callback();}}
else{$.get(wgScriptPath+'/wikia.php',{controller:'JSMessages',method:'getMessages',format:'html',packages:packagesToLoad.join(','),uselang:language,cb:window.wgJSMessagesCB},function(){$().log(packagesToLoad.join(',')+' package(s) loaded','JSMessages');if(typeof callback=='function'){callback();}
loadedPackages=loadedPackages.concat(packagesToLoad);},'script');}},getMessagesForContent:function(packages,callback){this.getMessages(packages,callback,window.wgContentLanguage);}});})(jQuery);;GlobalNotification={dom:false,timed:false,enableShow:true,init:function(callback){if(!jQuery.isFunction(callback)){callback=function(){};}
callback();},createDom:function(){GlobalNotification.dom=$('<div class="global-notification"><div class="msg"></div></div>');$(GlobalNotification.isModal()?GlobalNotification.modal:'body').prepend(GlobalNotification.dom);GlobalNotification.msg=GlobalNotification.dom.find('.msg');},notify:function(content){GlobalNotification.content=content;GlobalNotification.show();},warn:function(content){GlobalNotification.content='<span class="warning"></span>'+content;GlobalNotification.show();},show:function(){GlobalNotification.enableShow=true;var callback=function(){GlobalNotification.init(function(){if(GlobalNotification.enableShow==true){GlobalNotification.createDom();GlobalNotification.msg.html(GlobalNotification.content);GlobalNotification.dom.fadeIn();}else{GlobalNotification.hide();}});};if(GlobalNotification.dom){GlobalNotification.hide(callback);}else{callback();}},hide:function(callback){GlobalNotification.enableShow=false;if(GlobalNotification.dom!=false){GlobalNotification.dom.fadeOut(400,function(){GlobalNotification.dom.remove();GlobalNotification.dom=false;if(jQuery.isFunction(callback)){GlobalNotification.enableShow=true;callback();}});}},isModal:function(){GlobalNotification.modal=$('.modalWrapper');if(GlobalNotification.modal.length>0&&GlobalNotification.modal.is(':visible')){return true;}
return false;}};if(typeof wgAjaxFailureMsg!='undefined'){$(document).ajaxError(function(evt,request,settings){GlobalNotification.warn(wgAjaxFailureMsg);});};var GlobalModal={init:function(){var modal=$.getUrlVar('modal');if(modal){var f=GlobalModal['show'+modal];if(typeof f==='function'){f();}}},showUploadImage:function(){if(!wgUserName){$('.ajaxLogin').trigger('click');}else{$('.upphotos').trigger('click');}},showAddPage:function(){if(!wgUserName){$('.ajaxLogin').trigger('click');}else{$('.createpage').trigger('click');}},showLogin:function(){if(!wgUserName){$('.ajaxLogin').trigger('click');}},showAdopt:function(){$.get(wgScript,{action:'ajax',rs:'moduleProxy',moduleName:'AutomaticWikiAdoption',actionName:'AdoptWelcomeDialog',outputType:'html',cb:wgCurRevisionId},function(html){$(html).makeModal({width:500,height:400});});var sassUrl=$.getSassCommonURL('/extensions/wikia/AutomaticWikiAdoption/css/AutomaticWikiAdoption.scss');$.getCSS(sassUrl);}}
$(function(){GlobalModal.init();});;var UserLogin={rteForceLogin:function(){if(!window.wgComboAjaxLogin){window.onbeforeunload=function(){};UserLoginModal.show({persistModal:true,callback:function(){window.WikiaEditor&&WikiaEditor.reloadEditor();}});}else{showComboAjaxForPlaceHolder("",false,"",false,true);}},isForceLogIn:function(){if(wgUserName==null){if(!window.wgComboAjaxLogin){UserLoginModal.show();return true;}
else if(showComboAjaxForPlaceHolder("",false,"",false,true)){return true;}}
return false;}};;